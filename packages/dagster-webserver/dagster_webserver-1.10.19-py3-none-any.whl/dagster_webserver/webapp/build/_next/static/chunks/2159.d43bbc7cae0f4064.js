"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2159],{8637:function(e,t,n){n.d(t,{T:function(){return i}});let i=n(35505).ZP.div.withConfig({componentId:"sc-2cf5acf-0"})(["height:100%;overflow-y:auto;padding-bottom:64px;width:100%;"])},52112:function(e,t,n){n.d(t,{z:function(){return l}});var i=n(73235),s=n(4760),r=n(69752);function o(){let e=(0,i._)(["\n  fragment AutomationAssetSelectionFragment on AssetSelection {\n    assetSelectionString\n    assetChecks {\n      name\n      assetKey {\n        path\n      }\n    }\n    assetsOrError {\n      ... on AssetConnection {\n        nodes {\n          id\n          ...AssetSelectionNodeFragment\n        }\n      }\n      ... on PythonError {\n        ...PythonErrorFragment\n      }\n    }\n  }\n\n  fragment AssetSelectionNodeFragment on Asset {\n    id\n    key {\n      path\n    }\n    definition {\n      id\n      automationCondition {\n        __typename\n      }\n    }\n  }\n\n  ","\n"]);return o=function(){return e},e}let l=(0,s.Ps)(o(),r.B)},39427:function(e,t,n){n.d(t,{p:function(){return w}});var i=n(52322),s=n(48177),r=n(54854),o=n(3217),l=n(39361),a=n(18984),d=n(44537),c=n(94466),u=n(54123),h=n(2784),x=n(47933),m=n(78288),p=n(93977),g=n(13547),j=n(34515),v=n(9628),f=n(55638),y=n(84991),S=n(89164),k=n(32549);let w=e=>{let{assetSelection:t,automationType:n,targets:l,repoAddress:a}=e,d=(0,k.Ux)(a);if(!l&&!t)return(0,i.jsx)("span",{});let c=null==l?void 0:l.filter(e=>!(0,v.pv)(e.pipelineName));return t?(0,i.jsx)(C,{assetSelection:t,automationType:n}):(null==c?void 0:c.length)?(0,i.jsx)(s.x,{flex:{direction:"row",gap:4},children:c.map(e=>e.pipelineName?(0,i.jsx)(r.V,{icon:"job",tooltipText:e.pipelineName,children:(0,i.jsx)(S.h,{pipelineName:e.pipelineName,pipelineHrefContext:a,isJob:!!(d&&(0,k.E8)(d,e.pipelineName))},e.pipelineName)},e.pipelineName):null)}):(0,i.jsx)(r.V,{children:(0,i.jsx)("div",{style:{color:o.$()},children:"None"})})},C=e=>{let{assetSelection:t,automationType:n}=e,[S,k]=(0,h.useState)(!1),w="PythonError"===t.assetsOrError.__typename?t.assetsOrError:null,{checks:C,assets:b,assetsWithAMP:E,assetsWithoutAMP:I}=(0,h.useMemo)(()=>{if("PythonError"===t.assetsOrError.__typename)return{checks:[],assets:[],assetsWithAMP:[],assetsWithoutAMP:[]};let e=t.assetsOrError.nodes;return{checks:t.assetChecks.slice().sort(m.jj),assets:e.map(e=>e.key).sort(m.Vq),assetsWithAMP:e.filter(e=>{var t;return!!(null===(t=e.definition)||void 0===t?void 0:t.automationCondition)}).map(e=>e.key).sort(m.Vq),assetsWithoutAMP:e.filter(e=>{var t;return!(null===(t=e.definition)||void 0===t?void 0:t.automationCondition)}).map(e=>e.key).sort(m.Vq)}},[t]),[T,R]=(0,h.useState)("none"),A=C.length&&!b.length?"checks":"assets";(0,h.useEffect)(()=>R(A),[A]);let N=t.assetSelectionString||"",_="all materializable assets"===N;if(0===C.length&&1===b.length&&b[0])return(0,i.jsx)(r.V,{icon:"asset",children:(0,i.jsx)(x.rU,{to:(0,f.p)(b[0]),children:(0,v.ll)(b[0])})});if(0===b.length&&1===C.length&&C[0])return(0,i.jsx)(r.V,{icon:"asset_check",children:(0,i.jsx)(x.rU,{to:(0,f.A)(C[0]),children:(0,m.fJ)(C[0])})});let P=n===y.dEY.AUTO_MATERIALIZE||n===y.dEY.AUTOMATION;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.Vq,{isOpen:S,title:"Targeted assets",onClose:()=>k(!1),style:{width:"750px",maxWidth:"80vw",minWidth:"500px"},canOutsideClickClose:!0,canEscapeKeyClose:!0,children:[(0,i.jsx)(s.x,{flex:{direction:"column",gap:16},padding:{horizontal:20,vertical:16},border:"bottom",children:(0,i.jsxs)(s.x,{flex:{direction:"column",gap:4},children:[(0,i.jsx)(a.Tj,{children:"Asset selection"}),(0,i.jsx)(a.fv,{children:N})]})}),(0,i.jsx)(s.x,{padding:{horizontal:20,top:8},border:"bottom",children:(0,i.jsxs)(d.mQ,{size:"small",selectedTabId:T,children:[P?(0,i.jsx)(d.OK,{id:"assets",title:"Assets with Automation Conditions (".concat(E.length,")"),onClick:()=>R("assets")}):(0,i.jsx)(d.OK,{id:"assets",title:"Assets (".concat(b.length,")"),onClick:()=>R("assets")}),P&&(0,i.jsx)(d.OK,{id:"assets-without-conditions",disabled:0===I.length,title:"Other Assets (".concat(I.length,")"),onClick:()=>R("assets-without-conditions")}),(0,i.jsx)(d.OK,{id:"checks",disabled:0===C.length,title:"Checks ".concat(C.length),onClick:()=>R("checks")})]})}),(0,i.jsx)(s.x,{flex:{direction:"column"},style:{maxHeight:"60vh",minHeight:"300px"},children:"checks"===T?(0,i.jsx)(p.Y,{items:C,renderItem:m.iY,itemBorders:!0}):(0,i.jsx)(p.Y,{items:"assets-without-conditions"===T?I:P?E:b,renderItem:m.p9,itemBorders:!0})}),(0,i.jsx)(l.cN,{topBorder:!0,children:(0,i.jsx)(c.zx,{intent:"primary",onClick:()=>{k(!1)},children:"Close"})})]}),(0,i.jsx)(r.V,{icon:1===b.length?"asset":"asset_group",intent:w?"danger":"none",children:(0,i.jsx)(u.Z,{onClick:()=>{w?(0,g._K)({title:"Python error",body:(0,i.jsx)(j.T9,{error:w})}):k(!0)},color:w?o.Yn():o.Es(),children:w?"Error loading asset selection":_?"All materializable assets":N})})]})}},5242:function(e,t,n){n.d(t,{p:function(){return y}});var i=n(52322),s=n(3217),r=n(82422),o=n(18984),l=n(26834),a=n(12597),d=n(28879),c=n.n(d),u=n(77491),h=n.n(u),x=n(2784),m=n(35505),p=n(96586),g=n(47793),j=n(84991);c().extend(h());let v={[j.izS.SUCCESS]:s.fA(),[j.izS.FAILURE]:s.FY(),[j.izS.STARTED]:s.v4(),[j.izS.SKIPPED]:s.A8()},f={[j.izS.SUCCESS]:s.Lv(),[j.izS.FAILURE]:s.MP(),[j.izS.STARTED]:s.Jq(),[j.izS.SKIPPED]:s.$l()},y=e=>{let{ticks:t,tickResultType:n,onHoverTick:s,onSelectTick:a,exactRange:d,timeRange:c=3e5,tickGrid:u=6e4,timeAfter:h=6e4}=e,[m,j]=(0,x.useState)(Date.now()),[v,f]=(0,x.useState)(!1);(0,x.useEffect)(()=>{if(!v&&!d){let e=setInterval(()=>{j(Date.now())},100);return()=>clearInterval(e)}return()=>{}},[d,v]);let y=(null==d?void 0:d[1])?1e3*d[1]:m+h,R=(null==d?void 0:d[0])?1e3*d[0]:m-c,A=R<m&&m<y,N=y-R,{viewport:_,containerProps:P}=(0,r.S)(),O=(0,x.useMemo)(()=>t.filter(e=>!e.endTimestamp||1e3*e.endTimestamp>R).reverse(),[t,R]),q=(0,x.useMemo)(()=>O.map((e,t)=>{var n,i;let s=(n=1e3*e.timestamp,_.width*(n-R)/N),r=(i=(0,g.g6)(e,O.length-t-1)?e.timestamp:e.endTimestamp?1e3*e.endTimestamp:m,_.width*(i-R)/N);return{...e,width:Math.max(r-s,8),startX:s}}),[R,m,O,N,_.width]),z=Math.max((y-R)/25,u)/5,D=Math.ceil(R/z)*z,F=Math.ceil((y-D)/z),L=Math.ceil(F/5),M=(0,x.useMemo)(()=>{let e=[];for(let t=0;t<F;t++){let n=D+t*z;e.push({time:n,x:_.width*(n-R)/N,showLabel:t%L==0})}return e},[F,D,z,_.width,R,N,L]);return(0,i.jsx)("div",{style:{marginRight:"8px"},children:(0,i.jsxs)("div",{...P,children:[(0,i.jsxs)(k,{children:[M.map(e=>(0,i.jsxs)(b,{style:{transform:"translateX(".concat(e.x,"px)")},children:[(0,i.jsx)(E,{}),e.showLabel?(0,i.jsx)(I,{children:(0,i.jsx)(o.YS,{children:(0,i.jsx)(p.E,{timestamp:{ms:e.time},timeFormat:{showSeconds:!0}})})}):null]},e.time)),q.map(e=>{var t,r;let o=null!==(r="materializations"!==n&&"runIds"in e?null===(t=e.runIds)||void 0===t?void 0:t.length:e.requestedAssetMaterializationCount)&&void 0!==r?r:0;return(0,i.jsx)(C,{style:{transform:"translateX(".concat(e.startX,"px)"),width:"".concat(e.width,"px")},status:e.status,onMouseEnter:()=>{s(e),f(!0)},onMouseLeave:()=>{s(),f(!1)},onClick:()=>{a(e)},children:(0,i.jsx)(l.u,{content:(0,i.jsx)(S,{tick:e,tickResultType:n}),children:(0,i.jsx)("div",{style:{width:e.width+"px",height:"80px"},children:o>0?o:null})})},e.id)}),A?(0,i.jsx)(T,{style:{transform:"translateX(".concat(_.width*(m-R)/N,"px)")}}):null]}),(0,i.jsx)(w,{})]})})},S=(0,x.memo)(e=>{let{tick:t,tickResultType:n}=e,r=(0,x.useMemo)(()=>{var e,i;return t.status===j.izS.FAILURE?"Evaluation failed":t.status===j.izS.STARTED?"Evaluating…":"materializations"!==n&&"runs"in t?"".concat((null===(e=t.runs)||void 0===e?void 0:e.length)||0," run").concat((0,a.I)(null===(i=t.runs)||void 0===i?void 0:i.length,"","s")," requested"):"".concat(t.requestedAssetMaterializationCount," materialization").concat((0,a.I)(t.requestedAssetMaterializationCount,"","s")," requested")},[t,n]),l=c()(1e3*t.timestamp),d=c()(t.endTimestamp?1e3*t.endTimestamp:Date.now()),u=l.to(d,!0);return(0,i.jsxs)("div",{children:[(0,i.jsx)(o.YS,{as:"div",children:(0,i.jsx)(p.E,{timestamp:{unix:t.timestamp},timeFormat:{showSeconds:!0}})}),(0,i.jsxs)(o.YS,{as:"div",children:[r," (",u,")"]}),t.status===j.izS.STARTED?null:(0,i.jsx)(o.YS,{color:s.$(),children:"Click for details"})]})}),k=m.ZP.div.withConfig({componentId:"sc-93f8c965-0"})(["position:relative;height:100px;padding:10px 2px;border-bottom:1px solid ",";"],s.wL()),w=m.ZP.div.withConfig({componentId:"sc-93f8c965-1"})(["height:24px;"]),C=m.ZP.div.withConfig({componentId:"sc-93f8c965-2"})(["cursor:pointer;position:absolute;top:10px;height:80px;will-change:transform,width;border-radius:2px;div{place-content:center;display:grid;}color:",";",""],s.v8(),e=>{let{status:t}=e;return"\n    background: ".concat(v[t],";\n    &:hover {\n      background: ").concat(f[t],";\n    }\n  ")}),b=m.ZP.div.withConfig({componentId:"sc-93f8c965-3"})(["position:absolute;top:0;height:124px;will-change:transform;"]),E=m.ZP.div.withConfig({componentId:"sc-93f8c965-4"})(["position:absolute;top:0;height:108px;width:1px;background:",";"],s.wL()),I=m.ZP.div.withConfig({componentId:"sc-93f8c965-5"})(["height:16px;position:absolute;bottom:0;width:100px;margin-left:-24px;"]),T=m.ZP.div.withConfig({componentId:"sc-93f8c965-6"})(["position:absolute;top:0;height:126px;width:2px;background:",";&:after{content:'Now';position:absolute;left:0;background:",";color:",";bottom:0;font-size:12px;padding:3px 4px;}"],s.Bj(),s.Bj(),s.KH())},8923:function(e,t,n){n.d(t,{C:function(){return H},H:function(){return Z}});var i,s,r=n(73235),o=n(52322);n(86317);var l=n(48177),a=n(74741),d=n(15997),c=n(1026),u=n(78401),h=n(60206),x=n(94466),m=n(20940),p=n(18984),g=n(56328),j=n(2636),v=n(54123),f=n(12597),y=n(58351),S=n(65511),k=n(42418),w=n(2784),C=n(35505),b=n(8375),E=n(77744),I=n(5242),T=n(45511),R=n(47793),A=n(4760),N=n(69752),_=n(34515),P=n(98933),O=n(84991),q=n(22710),z=n(69706),D=n(68313),F=n(26893),L=n(53761),M=n(47333),K=n(88322),$=n(53674),U=n(91245);function Y(){let e=(0,r._)(["\n  query TickHistoryQuery(\n    $instigationSelector: InstigationSelector!\n    $dayRange: Int\n    $limit: Int\n    $cursor: String\n    $statuses: [InstigationTickStatus!]\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        ticks(\n          dayRange: $dayRange\n          limit: $limit\n          cursor: $cursor\n          statuses: $statuses\n          beforeTimestamp: $beforeTimestamp\n          afterTimestamp: $afterTimestamp\n        ) {\n          id\n          ...HistoryTick\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return Y=function(){return e},e}S.kL.register(k.ZP),(i=s||(s={})).ALL="all",i.FAILED="failed",i.SUCCESS="success";let V={all:[O.izS.SUCCESS,O.izS.FAILURE,O.izS.STARTED,O.izS.SKIPPED],failed:[O.izS.FAILURE],success:[O.izS.SUCCESS]},Z=e=>{var t,n;let{name:i,repoAddress:s,tabs:r,tickResultType:u,setTimerange:h,setParentStatuses:x}=e,[m,p]=(0,q.q)({queryKey:"status",defaults:{status:"all"}}),[g,j]=(0,w.useState)(null),[v,f]=(0,w.useState)(null),y={...(0,U.$)(s),name:i},S=w.useMemo(()=>V[m]||V.all,[m]),{queryResult:k,paginationProps:C}=(0,D.l)({nextCursorForResult:e=>{var t;if("InstigationState"===e.instigationStateOrError.__typename)return null===(t=e.instigationStateOrError.ticks[24])||void 0===t?void 0:t.id},getResultArray:e=>e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[],variables:{instigationSelector:y,statuses:S},query:W,pageSize:25});(0,P.C4)(k,P.dT);let b=null==k?void 0:null===(t=k.data)||void 0===t?void 0:t.instigationStateOrError,E=w.useMemo(()=>(null==b?void 0:b.__typename)==="InstigationState"?b.ticks:[],[b]);w.useEffect(()=>{if(C.hasPrevCursor){if(E&&E.length){var e,t;let n=null===(e=E[E.length-1])||void 0===e?void 0:e.timestamp,i=null===(t=E[0])||void 0===t?void 0:t.endTimestamp;n&&i&&(null==h||h([n,i]))}}else null==h||h(void 0)},[C.hasPrevCursor,E,h]),w.useEffect(()=>{C.hasPrevCursor?null==x||x(Array.from(S)):null==x||x(void 0)},[C.hasPrevCursor,x,S]),w.useEffect(()=>{!C.hasPrevCursor||E.length||k.loading||C.reset()},[E,k.loading,C.hasPrevCursor]);let{data:I}=k;if(!I)return(0,o.jsx)(l.x,{padding:{vertical:48},children:(0,o.jsx)(a.$,{purpose:"page"})});if("PythonError"===I.instigationStateOrError.__typename)return(0,o.jsx)(_.T9,{error:I.instigationStateOrError});if("InstigationStateNotFoundError"===I.instigationStateOrError.__typename)return(0,o.jsx)(l.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(d.t,{icon:"no-results",title:"No ticks to display"})});let{instigationType:R}=I.instigationStateOrError;return E.length||"all"!==m?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.x,{padding:{vertical:12,horizontal:24},children:(0,o.jsxs)(l.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[r,(0,o.jsx)(l.x,{flex:{direction:"row",gap:16},children:(0,o.jsx)(B,{status:m,onChange:p})})]})}),E.length?(0,o.jsxs)(Q,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,o.jsx)("th",{style:{width:90},children:"Status"}),(0,o.jsx)("th",{style:{width:90},children:"Duration"}),R===O._5b.SENSOR?(0,o.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,o.jsx)("th",{style:{width:180},children:"Result"}),(0,o.jsx)("th",{style:{width:80},children:"Logs"})]})}),(0,o.jsx)("tbody",{children:E.map((e,t)=>(0,o.jsx)(J,{tick:e,tickResultType:u,instigationSelector:y,index:t,onShowDetails:j,onShowLogs:f},e.id))})]}):(0,o.jsx)(l.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(d.t,{icon:"no-results",title:"No ticks to display"})}),E.length>0?(0,o.jsx)("div",{style:{marginTop:"16px"},children:(0,o.jsx)(c.pI,{...C})}):null,(0,o.jsx)(T.X,{isOpen:!!g,tickId:null==g?void 0:g.tickId,tickResultType:u,instigationSelector:y,onClose:()=>j(null)}),(0,o.jsx)(M.l,{isOpen:!!v,tickId:null!==(n=null==v?void 0:v.tickId)&&void 0!==n?n:null,timestamp:null==v?void 0:v.timestamp,instigationSelector:y,onClose:()=>f(null)})]}):null},B=e=>{let{status:t,onChange:n}=e,i=[{key:"all",label:"All ticks"},{key:"success",label:"Requested"},{key:"failed",label:"Failed"}],s=i.find(e=>{let{key:n}=e;return n===t});return(0,o.jsx)(u.P,{popoverProps:{position:"bottom-right"},filterable:!1,activeItem:s,items:i,itemRenderer:(e,t)=>(0,o.jsx)(h.sN,{active:t.modifiers.active,onClick:t.handleClick,text:e.label,style:{width:"300px"}},e.key),itemListRenderer:e=>{let{renderItem:t,filteredItems:n}=e,i=n.map(t).filter(Boolean);return(0,o.jsx)(h.v2,{children:i})},onItemSelect:e=>n(e.key),children:(0,o.jsx)(x.zx,{rightIcon:(0,o.jsx)(m.JO,{name:"arrow_drop_down"}),style:{minWidth:"200px",display:"flex",justifyContent:"space-between"},children:null==s?void 0:s.label})})},H=e=>{let{name:t,repoAddress:n,tickResultType:i,onHighlightRunIds:s,beforeTimestamp:r,afterTimestamp:d,statuses:c}=e,[u,h]=(0,q.q)({encode:e=>({tickId:e}),decode:e=>"string"==typeof e.tickId?e.tickId:void 0}),[x,m]=w.useState(!1),g={...(0,U.$)(n),name:t},j=(0,A.aM)(W,{variables:{instigationSelector:g,beforeTimestamp:r,afterTimestamp:d,statuses:c,limit:r?void 0:15},notifyOnNetworkStatusChange:!0});(0,P.C4)(j,1e3,!(x||r&&d));let{data:v,error:f}=j;if(!v||f)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.x,{padding:{top:16,horizontal:24},border:"bottom",children:(0,o.jsx)(p.pm,{children:"Recent ticks"})}),(0,o.jsx)(l.x,{padding:{vertical:64},children:(0,o.jsx)(a.$,{purpose:"section"})})]});if("PythonError"===v.instigationStateOrError.__typename)return(0,o.jsx)(_.T9,{error:v.instigationStateOrError});if("InstigationStateNotFoundError"===v.instigationStateOrError.__typename)return null;let{ticks:y=[]}=v.instigationStateOrError,S=e=>{h(e?e.tickId:void 0)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.X,{isOpen:!!u,tickId:u,tickResultType:i,instigationSelector:g,onClose:()=>S(void 0)}),(0,o.jsx)(l.x,{padding:{vertical:16,horizontal:24},children:(0,o.jsx)(p.pm,{children:"Recent ticks"})}),(0,o.jsx)(l.x,{border:"top",children:(0,o.jsx)(I.p,{ticks:y,tickResultType:i,onHoverTick:e=>{e||m(!1),(null==e?void 0:e.runIds)&&(s&&s(e.runIds),m(!0))},onSelectTick:S,exactRange:r&&d?[d,r]:void 0})})]})};function J(e){let{tick:t,tickResultType:n,index:i,onShowDetails:s,onShowLogs:r}=e,[a,d]=w.useMemo(()=>{let e=t.dynamicPartitionsRequestResults;return[(0,R.sw)(e,O.Dq2.ADD_PARTITIONS),(0,R.sw)(e,O.Dq2.DELETE_PARTITIONS)]},[null==t?void 0:t.dynamicPartitionsRequestResults]),c=(0,R.g6)(t,i);return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)(F.v,{timestamp:t.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,o.jsx)("td",{children:(0,o.jsx)(K.a,{tick:t,tickResultType:n,isStuckStarted:c})}),(0,o.jsx)("td",{children:c?"- ":(0,o.jsx)(z.Q,{startUnix:t.timestamp,endUnix:t.endTimestamp||Date.now()/1e3})}),t.instigationType===O._5b.SENSOR?(0,o.jsx)("td",{children:t.cursor?(0,o.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,o.jsx)("div",{style:{fontFamily:g.b.monospace,fontSize:"14px",maxWidth:"400px",overflow:"hidden"},children:(0,o.jsx)(j.g,{text:(0,L.pJ)(t.cursor)||""})}),(0,o.jsx)($.m,{value:t.cursor||""})]}):(0,o.jsx)(o.Fragment,{children:"—"})}):null,(0,o.jsx)("td",{children:(0,o.jsxs)(l.x,{flex:{direction:"column",gap:6},children:["runs"===n?(0,o.jsxs)(l.x,{flex:{alignItems:"center",gap:8},children:[(0,o.jsx)(v.Z,{onClick:()=>s(t),children:1===t.runIds.length?"1 run requested":"".concat(t.runIds.length," runs requested")}),1===t.runs.length?t.runs.map(e=>(0,o.jsx)(w.Fragment,{children:(0,o.jsx)(E.RX,{run:e})},e.id)):null]}):(0,o.jsx)(l.x,{flex:{alignItems:"center",gap:8},children:(0,o.jsx)(v.Z,{onClick:()=>s(t),children:1===t.requestedAssetMaterializationCount?"1 materialization requested":"".concat(t.requestedAssetMaterializationCount," materializations requested")})}),a||d?(0,o.jsxs)(p.YS,{children:["(",a?(0,o.jsxs)("span",{children:[a," partition",(0,f.I)(a,"","s")," created",d?",":""]}):null,d?(0,o.jsxs)("span",{children:[d," partition",(0,f.I)(d,"","s")," deleted,"]}):null,")"]}):null]})}),(0,o.jsx)("td",{children:(0,o.jsx)(x.zx,{onClick:()=>r(t),children:"View logs"})})]})}let W=(0,A.Ps)(Y(),E.S9,N.B,b.dY,E.vw),Q=(0,C.ZP)(y.i).withConfig({componentId:"sc-dba3e574-0"})(["th,td{vertical-align:middle !important;}"])},47793:function(e,t,n){n.d(t,{g6:function(){return s},sw:function(){return r}});var i=n(84991);function s(e,t){return!e.endTimestamp&&(0!==t&&e.status===i.izS.STARTED||1e3*e.timestamp<Date.now()-259200)}function r(e,t){return e.reduce((e,n)=>{if(n.type===t){var i;return e+((null===(i=n.partitionKeys)||void 0===i?void 0:i.length)||0)}return e},0)}},31451:function(e,t,n){n.d(t,{W:function(){return c}});var i=n(2784),s=n(7267),r=n(5953),o=n(4760),l=n(25644),a=n(21111),d=n(41349);function c(){let[e]=(0,o.Db)(d.Dl),t=(0,a.Ci)(),n=(0,s.k6)();return(0,i.useCallback)(async(i,s)=>{try{var o;let r=Array.isArray(i.executionParamsList)?i.executionParamsList:[i.executionParamsList],c=r.map(e=>e.selector.jobName||e.selector.pipelineName);if(c.length!==r.length||c.includes(void 0)||c.includes(null))throw Error("Error: Invalid job names. Each RunRequest must specify a job name to launch all runs");let u={jobNames:c.filter(e=>void 0!==e),opSelection:void 0},h={...i,executionParamsList:Array.isArray(i.executionParamsList)?i.executionParamsList.map(l.QO):(0,l.QO)(i.executionParamsList)},x=null===(o=(await e({variables:h})).data)||void 0===o?void 0:o.launchMultipleRuns;return x&&((0,d.nh)(x,n,{behavior:s}),t(a.Iq.LAUNCH_MULTIPLE_RUNS,u)),x}catch(e){console.error("error",e),(0,r.t)(e)}},[n,e,t])}},90325:function(e,t,n){n.d(t,{d:function(){return a}});var i=n(73235),s=n(4760),r=n(69752),o=n(52112);function l(){let e=(0,i._)(["\n  query ScheduleAssetSelectionQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        assetSelection {\n          ...AutomationAssetSelectionFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return l=function(){return e},e}let a=(0,s.Ps)(l(),o.z,r.B)},53761:function(e,t,n){n.d(t,{ex:function(){return eh},pJ:function(){return ec}});var i=n(52322),s=n(71018),r=n(18984),o=n(54854),l=n(48177),a=n(96832),d=n(56328),c=n(26834),u=n(94466),h=n(20940),x=n(2784),m=n(47933);let p=e=>null;var g=n(35505),j=n(96923),v=n(86998);let f=e=>{var t;let{metadata:n}=e;return(null==n?void 0:null===(t=n.assetKeys)||void 0===t?void 0:t.length)?(0,i.jsx)(l.x,{flex:{direction:"column",gap:2},children:n.assetKeys.map(e=>(0,i.jsx)(v.R,{path:e.path,icon:"asset"},e.path.join("/")))}):(0,i.jsx)("span",{})};var y=n(2602),S=n(4760),k=n(1168),w=n(91245);let C=e=>{let{repoAddress:t,sensor:n}=e,{permissions:{canStartSensor:s,canStopSensor:r}}=(0,k.xz)(t.location),{name:o}=n,l={...(0,w.$)(t),sensorName:o},[a,{loading:d}]=(0,S.Db)(y.Lq,{onCompleted:y.oI}),h=s&&r,x=h?'In code, a default status for "'.concat(o,'" has been set to "').concat(n.defaultStatus,'". Click here to reset the sensor status to track the status set in code.'):k.Qr;return(0,i.jsx)(c.u,{content:(0,i.jsx)("div",{style:{maxWidth:"500px",wordBreak:"break-word"},children:x}),display:"flex",children:(0,i.jsx)(u.zx,{disabled:d||!h,onClick:()=>{a({variables:{sensorSelector:l}})},children:"Reset sensor status"})})};var b=n(84345),E=n(73235),I=n(39361),T=n(56876),R=n(54123),A=n(3217),N=n(74741),_=n(15997),P=n(50683),O=n(35367),q=n(58351),z=n(84991);function D(e){let{includeTitle:t=!0,requests:n}=e,s=(0,x.useMemo)(()=>{if(!n.length)return[];let e=[];return n.forEach(t=>{let{partitionKeys:n,partitionsDefName:i,type:s}=t;null==n||n.forEach(t=>{e.push({key:t,def:i,type:s})})}),e},[n]);return s.length?(0,i.jsxs)(l.x,{flex:{direction:"column",gap:12,grow:1},children:[t?(0,i.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,i.jsx)(h.JO,{name:"partition"}),(0,i.jsx)(r.pm,{children:"Dynamic Partition Requests"})]}):null,(0,i.jsxs)(q.i,{style:{borderRight:"1px solid ".concat(A.wL())},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Partition"}),(0,i.jsx)("th",{children:"Partition definition"}),(0,i.jsx)("th",{children:"Requested change"})]})}),(0,i.jsx)("tbody",{children:s.map((e,t)=>{let{key:n,def:s,type:r}=e;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:n}),(0,i.jsx)("td",{children:s}),(0,i.jsx)("td",{children:r===z.Dq2.ADD_PARTITIONS?(0,i.jsx)(o.V,{intent:"success",children:(0,i.jsx)("span",{children:"Add Partition"})}):(0,i.jsx)(o.V,{intent:"danger",children:(0,i.jsx)("span",{children:"Delete Partition"})})})]},t)})})]})]}):null}var F=n(47874),L=n(13547),M=n(29872),K=n(69752),$=n(34515),U=n(6317),Y=n(96798),V=n(77823),Z=n(31451),B=n(25793),H=n(73653),J=n(97111);function W(){let e=(0,E._)(["\n  mutation SensorDryRunMutation($selectorData: SensorSelector!, $cursor: String) {\n    sensorDryRun(selectorData: $selectorData, cursor: $cursor) {\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          cursor\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n          dynamicPartitionsRequests {\n            ...DynamicPartitionRequestFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment DynamicPartitionRequestFragment on DynamicPartitionRequest {\n    partitionKeys\n    partitionsDefName\n    type\n  }\n\n  ","\n  ","\n"]);return W=function(){return e},e}let Q=e=>{let{isOpen:t,onClose:n,name:s}=e;return(0,i.jsx)(I.Vq,{isOpen:t,onClose:n,style:{width:"70vw",display:"flex"},icon:"preview_tick",title:"Preview tick result for ".concat(s),children:(0,i.jsx)(X,{...e})})},X=e=>{var t,n;let{repoAddress:s,name:a,currentCursor:d,onClose:m,jobName:p}=e,g=(0,Y.Ke)(),[v]=(0,S.Db)(G),[f]=(0,S.Db)(j.T),[y]=(0,S.Db)(B.J),[k]=(0,S.Db)(V.Px),[w,C]=(0,x.useState)(d),[b,E]=(0,x.useState)(!1),[q,F]=(0,x.useState)(!1),[K,W]=(0,x.useState)(null),[Q,X]=(0,x.useState)(null),ei=(0,x.useMemo)(()=>({sensorName:a,repositoryLocationName:s.location,repositoryName:s.name}),[s,a]),es=(0,x.useMemo)(()=>Q&&ei?(0,J.Q)(Q,ei,p):[],[ei,Q,p]),er=null==Q?void 0:null===(t=Q.evaluationResult)||void 0===t?void 0:t.dynamicPartitionsRequests,eo=(0,x.useCallback)(async()=>{var e,t;E(!0);let n=null===(e=(await v({variables:{selectorData:ei,cursor:w}})).data)||void 0===e?void 0:e.sensorDryRun;n?(null==n?void 0:n.__typename)==="DryRunInstigationTick"?(null===(t=n.evaluationResult)||void 0===t?void 0:t.error)?W(n.evaluationResult.error):X(n):(null==n?void 0:n.__typename)==="SensorNotFoundError"?(0,L._K)({title:"Sensor not found",body:"Could not find a sensor named: ".concat(a)}):W(n):(0,U.UT)("sensorDryRun Mutation returned no data??"),E(!1)},[v,ei,w,a]),el=(0,x.useCallback)(async()=>{var e;let t=null==Q?void 0:null===(e=Q.evaluationResult)||void 0===e?void 0:e.cursor;if(!t)return;let{data:n}=await f({variables:{sensorSelector:ei,cursor:t}});if((null==n?void 0:n.setSensorCursor.__typename)==="Sensor")await (0,M.B)({message:"Cursor value updated",intent:"success"});else if(null==n?void 0:n.setSensorCursor){let e=n.setSensorCursor;await (0,M.B)({intent:"danger",message:(0,i.jsxs)(T.Z,{direction:"row",spacing:8,children:[(0,i.jsx)("div",{children:"Could not set cursor value."}),(0,i.jsx)(R.Z,{color:A.KH(),underline:"always",onClick:()=>{(0,L._K)({title:"Python Error",body:"PythonError"===e.__typename?(0,i.jsx)($.T9,{error:e}):"Sensor not found"})},children:"View error"})]})})}},[null==Q?void 0:null===(n=Q.evaluationResult)||void 0===n?void 0:n.cursor,ei,f]),ea=(0,Z.W)(),ed=(0,x.useMemo)(()=>null!=es&&es.length>0||((null==er?void 0:er.length)||0)>0,[es,er]),ec=(0,x.useCallback)(async()=>{if(ed){g("launch-all-sensor"),F(!0);try{(null==er?void 0:er.length)&&await Promise.all(er.map(async e=>{e.type===z.Dq2.ADD_PARTITIONS?await Promise.all((e.partitionKeys||[]).map(async t=>{await y({variables:{repositorySelector:{repositoryName:s.name,repositoryLocationName:s.location},partitionsDefName:e.partitionsDefName,partitionKey:t}})})):e.partitionKeys&&e.partitionKeys.length&&await k({variables:{repositorySelector:{repositoryName:s.name,repositoryLocationName:s.location},partitionsDefName:e.partitionsDefName,partitionKeys:e.partitionKeys}})})),es&&await ea({executionParamsList:es},"toast"),el()}catch(e){console.error(e)}F(!1),m()}},[ed,y,k,er,es,ea,m,el,s,g]),eu=(0,x.useMemo)(()=>q?null:Q||K?(0,i.jsx)(u.zx,{icon:(0,i.jsx)(h.JO,{name:"settings_backup_restore"}),"data-testid":(0,H.N)("try-again"),onClick:()=>{X(null),W(null)},children:"Try again"}):null,[q,Q,K]),eh=(0,x.useMemo)(()=>{if(q)return(0,i.jsx)(l.x,{flex:{direction:"row",gap:8}});if(Q||K){var e;let t=null==Q?void 0:null===(e=Q.evaluationResult)||void 0===e?void 0:e.runRequests,n=(null==t?void 0:t.length)||0,s=!K&&0===n;return K?(0,i.jsx)(l.x,{flex:{direction:"row",gap:8},children:(0,i.jsx)(u.zx,{onClick:m,children:"Close"})}):s?(0,i.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,i.jsx)(u.zx,{onClick:m,children:"Close"}),(0,i.jsx)(c.u,{content:"Commits tick result",placement:"top-end",children:(0,i.jsx)(u.zx,{icon:(0,i.jsx)(h.JO,{name:"check_filled"}),intent:"primary",onClick:el,"data-testid":(0,H.N)("commit-tick-result"),children:(0,i.jsx)("div",{children:"Commit tick result"})})})]}):(0,i.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,i.jsx)(u.zx,{onClick:m,children:"Close"}),(0,i.jsx)(c.u,{canShow:!ed||q,content:"Applies requests, launches all runs, and commits tick result",placement:"top-end",children:(0,i.jsx)(u.zx,{icon:(0,i.jsx)(h.JO,{name:"check_filled"}),intent:"primary",disabled:!ed||q,onClick:ec,"data-testid":(0,H.N)("launch-all"),children:(0,i.jsx)("div",{children:"Apply requests & commit tick result"})})})]})}return b?(0,i.jsx)(l.x,{flex:{direction:"row",gap:8},children:(0,i.jsx)(u.zx,{onClick:m,children:"Cancel"})}):(0,i.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,i.jsx)(u.zx,{onClick:m,children:"Cancel"}),(0,i.jsx)(u.zx,{onClick:eo,intent:"primary","data-testid":(0,H.N)("continue"),children:"Continue"})]})},[q,Q,K,b,m,el,ed,ec,eo]),ex=(0,x.useMemo)(()=>{if(q)return(0,i.jsxs)(l.x,{flex:{direction:"row",gap:8,justifyContent:"center",alignItems:"center"},children:[(0,i.jsx)(N.$,{purpose:"body-text"}),(0,i.jsx)("div",{children:"Launching runs"})]});if(Q||K){var e,t,n,d,c;let u=null==Q?void 0:null===(e=Q.evaluationResult)||void 0===e?void 0:e.runRequests,h=(null==u?void 0:u.length)||0,x=!K&&0===h,m=null==Q?void 0:null===(t=Q.evaluationResult)||void 0===t?void 0:t.dynamicPartitionsRequests;return(0,i.jsxs)(l.x,{flex:{direction:"column",gap:8},children:[(0,i.jsxs)(ee,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(r.pm,{children:"Result"}),(0,i.jsx)(l.x,{flex:{grow:1,alignItems:"center"},children:(0,i.jsx)("div",{children:K?(0,i.jsx)(o.V,{intent:"danger",children:"Failed"}):h?(0,i.jsxs)(o.V,{intent:"success",children:[h," run requests"]}):(0,i.jsx)(o.V,{intent:"warning",children:"Skipped"})})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(r.pm,{children:"Used cursor value"}),(0,i.jsx)("pre",{children:(null==w?void 0:w.length)?w:"None"})]})]}),(0,i.jsxs)(l.x,{children:[K?(0,i.jsx)("div",{children:(0,i.jsx)($.T9,{error:K})}):null,x?(0,i.jsxs)(l.x,{flex:{direction:"column",gap:8},children:[(0,i.jsx)(r.pm,{style:{marginBottom:8},children:"Requested runs (0)"}),(0,i.jsx)("div",{children:(0,i.jsx)(en,{children:(0,i.jsx)(_.t,{icon:"missing",title:"No runs requested",description:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:"The sensor function was successfully evaluated but didn't return any run requests."}),(0,i.jsxs)("span",{children:[(0,i.jsx)("br",{}),"Skip reason:"," ",(null==Q?void 0:null===(n=Q.evaluationResult)||void 0===n?void 0:n.skipReason)?'"'.concat(Q.evaluationResult.skipReason,'"'):"No skip reason was output"]})]})})})})]}):null,h&&u?(0,i.jsxs)(l.x,{flex:{direction:"column",gap:8},children:[(0,i.jsxs)(r.pm,{children:["Requested runs (",h,")"]}),(0,i.jsx)(O.k,{runRequests:u,name:a,jobName:p,isJob:!0,repoAddress:s})]}):null,(null==m?void 0:m.length)?(0,i.jsx)("div",{style:{marginTop:"24px"},children:(0,i.jsx)(D,{requests:m})}):null]}),(0,i.jsxs)(et,{children:[(0,i.jsx)(r.pm,{children:"Computed cursor value"}),(0,i.jsx)("pre",{children:(null==Q?void 0:null===(c=Q.evaluationResult)||void 0===c?void 0:null===(d=c.cursor)||void 0===d?void 0:d.length)?null==Q?void 0:Q.evaluationResult.cursor:K?"Error":"None"})]})]})}return b?(0,i.jsxs)(l.x,{flex:{direction:"row",gap:8,justifyContent:"center",alignItems:"center"},children:[(0,i.jsx)(N.$,{purpose:"body-text"}),(0,i.jsx)("div",{children:"Evaluating sensor"})]}):(0,i.jsxs)(l.x,{flex:{direction:"column",gap:8},children:[(0,i.jsx)("div",{children:"Cursor value (optional)"}),(0,i.jsx)(P.oi,{value:w,onChange:e=>C(e.target.value),"data-testid":(0,H.N)("cursor-input"),placeholder:"Enter a cursor value"}),(0,i.jsx)("div",{children:"A cursor tracks where a sensor left off, allowing the sensor to efficiently process new changes or events without missing anything or duplicating work. The cursor is typically a string, and can be updated within the sensor's logic to reflect the latest state."}),(0,i.jsxs)("div",{children:[(0,i.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#idempotence-and-cursors",children:"Learn more"})," ","about cursors"]})]})},[Q,K,b,q,a,p,s,w]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I.a7,{children:(0,i.jsx)("div",{style:{minHeight:"300px"},children:ex})}),(0,i.jsx)(I.cN,{topBorder:!0,left:eu,children:eh})]})},G=(0,S.Ps)(W(),F.s,K.B),ee=g.ZP.div.withConfig({componentId:"sc-dd0c8c8e-0"})(["display:grid;grid-template-columns:repeat(2,1fr);padding-bottom:12px;border-bottom:1px solid ",";","{padding-bottom:4px;display:block;}pre{margin:0;}button{margin-top:4px;}"],A.wL(),r.pm),et=g.ZP.div.withConfig({componentId:"sc-dd0c8c8e-1"})(["display:grid;grid-template-columns:repeat(1,1fr);padding-bottom:12px;","{padding-bottom:4px;display:block;}pre{margin:0;}button{margin-top:4px;}"],r.pm),en=g.ZP.div.withConfig({componentId:"sc-dd0c8c8e-2"})(["","{margin:auto !important;width:unset !important;max-width:unset !important;}"],_.Y),ei=e=>{let{cursor:t,name:n,repoAddress:s,jobName:r,sensorType:o}=e,[a,d]=(0,x.useState)(!1);return(0,i.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,i.jsx)(c.u,{canShow:o!==z.dEY.STANDARD,content:"Testing not available for this sensor type",placement:"top-end",children:(0,i.jsx)(u.zx,{disabled:o!==z.dEY.STANDARD,onClick:()=>d(!0),icon:(0,i.jsx)(h.JO,{name:"preview_tick"}),children:"Preview tick result"})}),(0,i.jsx)(Q,{isOpen:a,onClose:()=>d(!1),currentCursor:t,name:n,repoAddress:s,jobName:r})]})};var es=n(98933),er=n(39427),eo=n(63385),el=n(26893),ea=n(88322);let ed={showSeconds:!0,showTimezone:!1},ec=e=>{if(e&&e.startsWith('{"__class__"')){let t=JSON.parse(e);return delete t.__class__,Object.entries(t).filter(e=>null!==e[1]&&0!==e[1]).map(e=>{let[t,n]=e;return"".concat(t,"=").concat(n)}).join(",")}return e},eu=e=>(e||(e=30),e<60||e%60)?"~".concat(e," sec"):3600===e?"~1 hour":e<3600||e%3600?"~".concat(e/60," min"):86400===e?"~1 day":e<86400||e%86400?"~".concat(e/3600," hours"):"~".concat(e/86400," days"),eh=e=>{var t,n;let{sensor:g,repoAddress:v,daemonHealth:y,refreshState:S,assetSelection:w}=e,{name:E,sensorState:{status:I,ticks:T},metadata:R}=g,{permissions:A,disabledReasons:N,loading:_}=(0,k.xz)(v.location),{canUpdateSensorCursor:P}=A,[O,q]=(0,x.useState)(!1),D={sensorName:g.name,repositoryName:v.name,repositoryLocationName:v.location},F=T.length?T[0]:null,L=g.sensorState.typeSpecificData&&"SensorData"===g.sensorState.typeSpecificData.__typename&&g.sensorState.typeSpecificData.lastCursor,M=I===z.ynu.RUNNING;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.m,{title:(0,i.jsxs)(r.X6,{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,i.jsx)(m.rU,{to:"/automation",children:"Automation"}),(0,i.jsx)("span",{children:"/"}),E]}),icon:"sensors",tags:(0,i.jsxs)(o.V,{icon:"sensors",children:["Sensor in ",(0,i.jsx)(eo.b,{repoAddress:v})]}),right:(0,i.jsxs)(l.x,{margin:{top:4},flex:{direction:"row",alignItems:"center",gap:8},children:[(0,i.jsx)(es.xi,{refreshState:S}),(0,i.jsx)(ei,{cursor:L||"",name:g.name,repoAddress:v,jobName:(null===(n=g.targets)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.pipelineName)||"",sensorType:g.sensorType})]})}),(0,i.jsx)(a.fJ,{children:(0,i.jsxs)("tbody",{children:[g.description?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Description"}),(0,i.jsx)("td",{children:g.description})]}):null,(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Latest tick"}),(0,i.jsx)("td",{children:F?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},style:{marginTop:"-2px"},children:[(0,i.jsx)(el.v,{timestamp:F.timestamp,timeFormat:ed}),(0,i.jsx)(ea.a,{tick:F,tickResultType:"runs"})]})}):"Sensor has never run"})]}),g.nextTick&&y&&M&&(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Next tick"}),(0,i.jsx)("td",{children:(0,i.jsx)(el.v,{timestamp:g.nextTick.timestamp,timeFormat:ed})})]}),g.targets&&g.targets.length||w?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Target"}),(0,i.jsx)(ex,{children:(0,i.jsx)(er.p,{targets:g.targets,repoAddress:v,assetSelection:w||null,automationType:g.sensorType})})]}):null,(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(l.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Running"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},style:{height:"32px"},children:[(0,i.jsx)(b.c,{repoAddress:v,sensor:g}),g.canReset&&(0,i.jsx)(C,{repoAddress:v,sensor:g})]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Frequency"}),(0,i.jsx)("td",{children:eu(g.minIntervalSeconds)})]}),R.assetKeys&&R.assetKeys.length?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Monitored assets"}),(0,i.jsx)("td",{children:(0,i.jsx)(f,{metadata:R})})]}):null,g.sensorType!==z.dEY.AUTO_MATERIALIZE&&g.sensorType!==z.dEY.AUTOMATION?(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(l.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Cursor"})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontFamily:d.b.monospace,fontSize:"14px"},children:L?ec(L):"None"}),(0,i.jsx)(c.u,{canShow:!P,content:N.canUpdateSensorCursor,children:(0,i.jsx)(u.zx,{icon:(0,i.jsx)(h.JO,{name:"edit"}),disabled:!P||_,onClick:()=>q(!0),children:L!==ec(L)?"View Raw / Edit":"Edit"})})]}),(0,i.jsx)(j.x,{isOpen:O,sensorSelector:D,cursor:L||"",onClose:()=>q(!1)})]})]}):null,(0,i.jsx)(p,{repoAddress:v,sensorName:E})]})})]})},ex=g.ZP.td.withConfig({componentId:"sc-bf5de352-0"})(["button{line-height:20px;}"])},31188:function(e,t,n){n.d(t,{Z:function(){return L},A:function(){return D}});var i=n(73235),s=n(52322),r=n(86587),o=n(48177),l=n(74741),a=n(3217),d=n(15997),c=n(8637),u=n(2784),h=n(7267),x=n(53761),m=n(4760),p=n(77744);function g(){let e=(0,i._)(["\n  fragment SensorFragment on Sensor {\n    id\n    name\n    description\n    minIntervalSeconds\n    sensorType\n    nextTick {\n      timestamp\n    }\n    defaultStatus\n    canReset\n    sensorState {\n      id\n      ...InstigationStateFragment\n    }\n    targets {\n      pipelineName\n      solidSelection\n      mode\n    }\n    metadata {\n      assetKeys {\n        path\n      }\n    }\n  }\n\n  ","\n"]);return g=function(){return e},e}let j=(0,m.Ps)(g(),p.ai);var v=n(97077);let f=e=>{let{sensorDaemonStatus:t,assetDaemonStatus:n,...i}=e,r=t&&!1===t.healthy&&t.required,l=n&&!1==!n.healthy&&n.required;return l||r?(0,s.jsx)(o.x,{...i,children:(0,s.jsx)(v.b,{intent:"warning",title:r?l?"The sensor and asset daemons are not running":"The sensor daemon is not running":"The asset daemon is not running",description:(0,s.jsxs)("div",{children:["See the"," ",(0,s.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}):null};var y=n(14284),S=n(86224),k=n(27450);let w=e=>{let{sensor:t,repoAddress:n,tabs:i}=e,r=u.useMemo(()=>({tags:[{key:S.H.SensorName,value:t.name},{key:S.H.RepositoryLabelTag,value:(0,k.Wg)(n)}]}),[n,t.name]);return(0,s.jsx)(y.g,{filter:r,includeRunsFromBackfills:!0,actionBarComponents:i})};var C=n(69752),b=n(34515),E=n(98933),I=n(96798),T=n(52112),R=n(84991),A=n(93781),N=n(22710),_=n(80439),P=n(8923),O=n(91245);function q(){let e=(0,i._)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        sensorDaemonStatus: daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n          required\n        }\n        ampDaemonStatus: daemonStatus(daemonType: "ASSET") {\n          id\n          healthy\n          required\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return q=function(){return e},e}function z(){let e=(0,i._)(["\n  query SensorAssetSelectionQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        assetSelection {\n          ...AutomationAssetSelectionFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return z=function(){return e},e}let D=e=>{var t;let{repoAddress:n}=e;(0,I.Px)();let{sensorName:i}=(0,h.UO)();(0,A.j)("Sensor: ".concat(i));let p={...(0,O.$)(n),sensorName:i},[g,j]=(0,u.useState)(void 0),[v,y]=(0,u.useState)(void 0),S=(0,u.useMemo)(()=>v||g?{afterTimestamp:null==v?void 0:v[0],beforeTimestamp:null==v?void 0:v[1],statuses:g}:{},[g,v]),[k,C]=(0,N.q)((0,u.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:t}=e;return"runs"===t?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),T=(0,m.aM)(F,{variables:{sensorSelector:p},notifyOnNetworkStatusChange:!0}),_=(0,m.aM)(L,{variables:{sensorSelector:p},notifyOnNetworkStatusChange:!0}),q=(0,E.C4)(T,E.dT),z=(0,E.C4)(_,E.dT),D=(0,E.V5)(q,z),{data:M,loading:K}=T,$=(0,s.jsx)(r.h,{activeItems:new Set([k]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{C(e)}});if(!M&&K)return(0,s.jsxs)(o.x,{margin:{top:32},flex:{direction:"row",alignItems:"center",justifyContent:"center",gap:16},children:[(0,s.jsx)(l.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:a.$()},children:"Loading sensor…"})]});if(!M||"SensorNotFoundError"===M.sensorOrError.__typename)return(0,s.jsx)(o.x,{padding:{vertical:32},children:(0,s.jsx)(d.t,{icon:"error",title:"Could not find sensor `".concat(i,"` in definitions for `").concat(n.name,"`")})});let{sensorOrError:U}=M;if("PythonError"===U.__typename)return(0,s.jsx)(b.T9,{error:U});if("UnauthorizedError"===U.__typename)return(0,s.jsx)(h.l_,{to:"/overview/sensors"});let{instance:Y}=M,V=(null===(t=_.data)||void 0===t?void 0:t.sensorOrError.__typename)==="Sensor"?_.data.sensorOrError.assetSelection:null,Z=U.sensorType===R.dEY.AUTO_MATERIALIZE||U.sensorType===R.dEY.AUTOMATION,B=Y.daemonHealth.sensorDaemonStatus,H=Z?"materializations":"runs";return(0,s.jsxs)(c.T,{children:[(0,s.jsx)(x.ex,{repoAddress:n,sensor:U,daemonHealth:B.healthy,refreshState:D,assetSelection:V||null}),(0,s.jsx)(f,{sensorDaemonStatus:B,padding:{vertical:16,horizontal:24}}),(0,s.jsx)(P.C,{tickResultType:H,repoAddress:n,name:U.name,...S}),(0,s.jsx)(o.x,{margin:{top:32},border:"top",children:"evaluations"===k?(0,s.jsx)(P.H,{tabs:$,tickResultType:H,repoAddress:n,name:U.name,setParentStatuses:j,setTimerange:y}):(0,s.jsx)(w,{repoAddress:n,sensor:U,tabs:$})})]})},F=(0,m.Ps)(q(),j,C.B,_.O),L=(0,m.Ps)(z(),T.z,C.B)},35367:function(e,t,n){n.d(t,{k:function(){return p}});var i=n(52322),s=n(48177),r=n(58351),o=n(3217),l=n(26834),a=n(94466),d=n(20940),c=n(2784),u=n(26855),h=n(89164),x=n(73653),m=n(32549);let p=e=>{let{runRequests:t,isJob:n,repoAddress:l,mode:a,jobName:d}=e,p=(0,m.Ux)(l),[j,v]=(0,c.useState)(null),[f,y]=(0,c.useState)(null),S=(0,i.jsxs)("tbody",{"data-testid":(0,x.N)("table-body"),children:[t.map((e,t)=>{var r;return(0,i.jsxs)("tr",{"data-testid":(0,x.N)(e.runKey||""),children:[(0,i.jsx)("td",{style:{verticalAlign:"middle"},children:(0,i.jsx)(s.x,{flex:{alignItems:"center",gap:8},children:(0,i.jsx)(h.h,{pipelineName:null!==(r=e.jobName)&&void 0!==r?r:d,pipelineHrefContext:l,isJob:!!p&&n,showIcon:!0,size:"small"})})}),(0,i.jsx)("td",{style:{width:"7.5%",verticalAlign:"middle",textAlign:"center"},children:(0,i.jsx)(g,{request:e,onClick:()=>{v(e),y("config")}})})]},t)}),j&&(0,i.jsx)(u.U,{isOpen:"config"===f,onClose:()=>y(null),mode:a||null,runConfigYaml:j.runConfigYaml,tags:j.tags,isJob:n,jobName:d,request:j,repoAddress:l})]});return(0,i.jsx)("div",{children:(0,i.jsxs)(r.i,{style:{borderRight:"1px solid ".concat(o.wL()),tableLayout:"fixed"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Target"}),(0,i.jsx)("th",{style:{width:"7.5%"},children:"Actions"})]})}),S]})})};function g(e){let{request:t,onClick:n}=e;return(0,i.jsx)(l.u,{content:"Preview run config and tags",placement:"left-start",children:(0,i.jsx)(a.zx,{icon:(0,i.jsx)(d.JO,{name:"data_object"}),onClick:n,"data-testid":(0,x.N)("preview-".concat(t.runKey||""))})})}},47874:function(e,t,n){n.d(t,{s:function(){return r}});var i=n(73235);function s(){let e=(0,i._)(["\n  fragment RunRequestFragment on RunRequest {\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n    runKey\n    jobName\n    assetSelection {\n      path\n    }\n  }\n"]);return s=function(){return e},e}let r=(0,n(4760).Ps)(s())},47333:function(e,t,n){n.d(t,{l:function(){return g}});var i=n(73235),s=n(52322),r=n(39361),o=n(48177),l=n(3217),a=n(94466),d=n(99564),c=n(15997),u=n(20940),h=n(14553),x=n(4760),m=n(26893);function p(){let e=(0,i._)(["\n  query TickLogEventsQuery($instigationSelector: InstigationSelector!, $tickId: ID!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        tick(tickId: $tickId) {\n          id\n          status\n          timestamp\n          logEvents {\n            events {\n              ...InstigationEventLog\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}let g=e=>{let{tickId:t,timestamp:n,instigationSelector:i,isOpen:d,onClose:c}=e;return(0,s.jsxs)(r.Vq,{isOpen:d,onClose:c,style:{width:"70vw",maxWidth:"1200px",minWidth:"800px"},title:(0,s.jsx)("span",{children:n?(0,s.jsxs)("span",{children:[(0,s.jsxs)("span",{children:["Logs for ",i.name,": "]}),(0,s.jsx)(m.v,{timestamp:n,timeFormat:{showSeconds:!0}})]}):(0,s.jsxs)("span",{children:["Logs for ",i.name]})}),children:[t?(0,s.jsx)(j,{instigationSelector:i,tickId:t}):null,(0,s.jsx)(o.x,{background:l.v8(),style:{zIndex:3,position:"relative"},children:(0,s.jsx)(r.cN,{topBorder:!0,children:(0,s.jsx)(a.zx,{onClick:c,children:"Done"})})})]})},j=e=>{let{instigationSelector:t,tickId:n}=e,{data:i,loading:r}=(0,x.aM)(v,{variables:{instigationSelector:t,tickId:n},notifyOnNetworkStatusChange:!0}),l=(null==i?void 0:i.instigationStateOrError.__typename)==="InstigationState"&&(null==i?void 0:i.instigationStateOrError.tick)?null==i?void 0:i.instigationStateOrError.tick.logEvents.events:void 0;if(r)return(0,s.jsx)(o.x,{style:{height:500},flex:{justifyContent:"center",alignItems:"center"},children:(0,s.jsx)(d.f,{label:"Loading logs…"})});if(l&&l.length)return(0,s.jsx)(o.x,{style:{height:500},flex:{direction:"column"},children:(0,s.jsx)(h.g,{events:l})});let m=(null==i?void 0:i.instigationStateOrError.__typename)==="InstigationState"?null==i?void 0:i.instigationStateOrError.tick.status:void 0,p=(null==i?void 0:i.instigationStateOrError.__typename)==="InstigationState"?null==i?void 0:i.instigationStateOrError.instigationType:void 0,g="SENSOR"===p?"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#logging-in-sensors":"SCHEDULE"===p?"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules#logging-in-schedules":void 0;return(0,s.jsx)(o.x,{style:{height:500},flex:{justifyContent:"center",alignItems:"center"},padding:{vertical:48},children:(0,s.jsx)(c.t,{icon:"no-results",title:"No logs to display",description:(0,s.jsxs)(o.x,{flex:{direction:"column",gap:12},children:[(0,s.jsx)("div",{children:"Your evaluation did not emit any logs. To learn how to emit logs in your evaluation, visit the documentation for more information."}),"FAILURE"===m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:"For failed evaluations, logs will only be displayed if your Dagster and Dagster Cloud agent versions 1.5.14 or higher."}),(0,s.jsx)("div",{children:"Upgrade your Dagster versions to view logs for failed evaluations."})]})]}),action:g&&(0,s.jsx)(a.fr,{href:g,rightIcon:(0,s.jsx)(u.JO,{name:"open_in_new"}),children:"View documentation"})})})},v=(0,x.Ps)(p(),h.n)},88322:function(e,t,n){n.d(t,{a:function(){return g}});var i=n(52322),s=n(54854),r=n(38082),o=n(3217),l=n(26834),a=n(48177),d=n(54123),c=n(12597),u=n(39361),h=n(94466),x=n(2784),m=n(34515),p=n(84991);let g=e=>{let{tick:t,tickResultType:n,isStuckStarted:g}=e,[j,v]=(0,x.useState)(!1),f=(0,x.useMemo)(()=>{let e="materializations"===n?"materialization":"run";switch(t.status){case p.izS.STARTED:return(0,i.jsx)(s.V,{intent:"primary",icon:g?void 0:"spinner",children:g?"In progress":"Evaluating"});case p.izS.SKIPPED:let u=(0,i.jsx)(r.m,{fillColor:o.fk(),label:"materializations"===n?"0 materializations requested":"0 runs requested"});if("runKeys"in t&&t.runKeys.length){let e="".concat(t.runKeys.length," runs requested, but skipped because the runs already exist for the requested keys.");return(0,i.jsx)(l.u,{position:"right",content:e,children:u})}if("skipReason"in t&&t.skipReason)return(0,i.jsx)(l.u,{position:"right",content:t.skipReason,targetTagName:"div",children:u});return u;case p.izS.FAILURE:return(0,i.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,i.jsx)(s.V,{intent:"danger",children:"Failure"}),t.error?(0,i.jsx)(d.Z,{onClick:()=>{v(!0)},children:"View"}):null]});case p.izS.SUCCESS:let h="materializations"===n?t.requestedAssetMaterializationCount:t.runIds.length,x=(0,i.jsxs)(s.V,{intent:"success",children:[h," ",e,(0,c.I)(h,"","s")," requested"]});if("runKeys"in t&&t.runKeys.length>t.runIds.length){let e="".concat(t.runKeys.length," runs requested, but ").concat(t.runKeys.length-t.runIds.length," skipped because the runs already exist for those requested keys.");return(0,i.jsx)(l.u,{position:"right",content:e,children:x})}return x}},[g,t,n]);return(0,i.jsxs)(i.Fragment,{children:[f,t.error?(0,i.jsxs)(u.Vq,{isOpen:j,title:"Error",style:{width:"80vw"},children:[(0,i.jsx)(u.a7,{children:(0,i.jsx)(m.T9,{error:t.error})}),(0,i.jsx)(u.cN,{topBorder:!0,children:(0,i.jsx)(h.zx,{intent:"primary",onClick:()=>{v(!1)},children:"Close"})})]}):null]})}},97111:function(e,t,n){n.d(t,{G:function(){return d},Q:function(){return a}});var i=n(45984),s=n(13547),r=n(38921);let o="The YAML you provided couldn't be parsed. Please fix the syntax errors and try again.",l=e=>{let{key:t,value:n}=e;return{key:t,value:n}},a=(e,t,n)=>{var a,d;if(!e)return[];let c=[];return null==e||null===(d=e.evaluationResult)||void 0===d||null===(a=d.runRequests)||void 0===a||a.forEach(e=>{var a;let d=(0,r.s)(e.runConfigYaml);try{i.Qc(d)}catch{(0,s._K)({title:"Invalid YAML",body:o});return}let{repositoryLocationName:u,repositoryName:h}=t,x={runConfigData:d,selector:{jobName:null!==(a=e.jobName)&&void 0!==a?a:n,repositoryLocationName:u,repositoryName:h,assetSelection:[],assetCheckSelection:[],solidSelection:void 0},mode:"default",executionMetadata:{tags:[...e.tags.map(l)]}};c.push(x)}),c},d=(e,t,n)=>{var a,d;if(!e)return[];let c=[];return null==e||null===(d=e.evaluationResult)||void 0===d||null===(a=d.runRequests)||void 0===a||a.forEach(e=>{var a;let d=(0,r.s)(e.runConfigYaml);try{i.Qc(d)}catch{(0,s._K)({title:"Invalid YAML",body:o});return}let{repositoryLocationName:u,repositoryName:h}=t,x={runConfigData:d,selector:{jobName:null!==(a=e.jobName)&&void 0!==a?a:n,repositoryLocationName:u,repositoryName:h,assetSelection:[],assetCheckSelection:[],solidSelection:void 0},mode:"default",executionMetadata:{tags:[...e.tags.map(l)]}};c.push(x)}),c}}}]);
//# sourceMappingURL=2159.d43bbc7cae0f4064.js.map