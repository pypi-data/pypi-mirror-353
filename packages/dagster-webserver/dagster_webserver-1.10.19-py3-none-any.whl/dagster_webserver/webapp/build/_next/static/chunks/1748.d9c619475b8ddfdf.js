"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1748],{41748:function(e,s,n){n.d(s,{r:function(){return z},$:function(){return C}});var r=n(73235),t=n(52322),i=n(48177),l=n(3217),o=n(8637),c=n(71018),d=n(18984),a=n(54854),x=n(97077),h=n(56876),j=n(54123),u=n(44067),p=n(26834),m=n(58351),g=n(15997),y=n(20940),f=n(2636);n(2784);var v=n(7267),b=n(47933),U=n(44537),R=n(74597),w=n(18328);let O={configuration:"Configuration",uses:"Uses"},D=e=>{let{repoAddress:s,resourceName:n,numUses:r}=e,l=(0,v.$B)(["/locations/:repoPath/resources/:name/:tab?"]),o=(null==l?void 0:l.params.tab)&&O[null==l?void 0:l.params.tab]||"Configuration";return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(U.mQ,{size:"large",selectedTabId:o,children:[(0,t.jsx)(R.f,{id:"Configuration",title:"Configuration",to:(0,w.$U)(s,"/resources/".concat(n))},"configuration"),(0,t.jsx)(R.f,{id:"Uses",title:(0,t.jsxs)(i.x,{flex:{gap:4,alignItems:"center"},children:["Uses",(0,t.jsx)(a.V,{intent:"none",minimal:!0,children:r})]}),to:(0,w.$U)(s,"/resources/".concat(n,"/uses"))},"uses")]})})};var E=n(4760),_=n(13547),S=n(69752),T=n(96798),V=n(86998),$=n(93781),L=n(63385),N=n(16450),I=n(70251),P=n(91245);function A(){let e=(0,r._)(["\n  fragment ResourceDetailsFragment on ResourceDetails {\n    name\n    description\n    configFields {\n      name\n      description\n      configTypeKey\n      isRequired\n      defaultValueAsJson\n    }\n    configuredValues {\n      key\n      value\n      type\n    }\n    nestedResources {\n      name\n      type\n      resource {\n        name\n        resourceType\n        description\n      }\n    }\n    parentResources {\n      name\n      resource {\n        name\n        resourceType\n        description\n      }\n    }\n    assetKeysUsing {\n      path\n    }\n    schedulesUsing\n    sensorsUsing\n    jobsOpsUsing {\n      jobName\n      opHandleIDs\n    }\n    resourceType\n  }\n"]);return A=function(){return e},e}function J(){let e=(0,r._)(["\n  query ResourceRootQuery($resourceSelector: ResourceSelector!) {\n    topLevelResourceDetailsOrError(resourceSelector: $resourceSelector) {\n      ...ResourceDetailsFragment\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n"]);return J=function(){return e},e}let k=e=>"StringSourceType"===e?"String":"IntSourceType"===e?"Int":"BoolSourceType"===e?"Bool":e,C=e=>(null==e?void 0:e.split(".").pop())||null,F=e=>e?e.name.startsWith("_nested_")?C(null==e?void 0:e.resourceType):e.name:null,K=e=>(0,t.jsx)(i.x,{padding:{left:24,vertical:16},background:l.gJ(),border:"all",children:e.children}),W=e=>e.split("\n").map(e=>e.replace(/^    /,"")).join("\n"),z=e=>{var s,n,r,m;(0,T.Px)();let{repoAddress:g}=e,{resourceName:y}=(0,v.UO)();(0,$.j)("Resource: ".concat(y));let f={...(0,P.$)(g),resourceName:y},b=(0,E.aM)(Q,{variables:{resourceSelector:f}}),U=(null===(s=b.data)||void 0===s?void 0:s.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"&&F(null===(n=b.data)||void 0===n?void 0:n.topLevelResourceDetailsOrError)||y,R=(null===(r=b.data)||void 0===r?void 0:r.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"?b.data.topLevelResourceDetailsOrError.parentResources.length+b.data.topLevelResourceDetailsOrError.assetKeysUsing.length+b.data.topLevelResourceDetailsOrError.jobsOpsUsing.length+b.data.topLevelResourceDetailsOrError.schedulesUsing.length+b.data.topLevelResourceDetailsOrError.sensorsUsing.length:0,w=null===(m=(0,v.$B)(["/locations/:repoPath/resources/:name/:tab?"]))||void 0===m?void 0:m.params.tab;return(0,t.jsxs)(o.T,{style:{height:"100%",overflow:"hidden"},children:[(0,t.jsx)(c.m,{title:(0,t.jsx)(d.X6,{children:U}),tags:(0,t.jsxs)(a.V,{icon:"resource",children:["Resource in ",(0,t.jsx)(L.b,{repoAddress:g})]}),tabs:(0,t.jsx)(D,{repoAddress:g,resourceName:y,numUses:R})}),(0,t.jsx)(N.g,{queryResult:b,allowStaleData:!0,children:e=>{let{topLevelResourceDetailsOrError:s}=e;if("ResourceDetails"!==s.__typename){let e=null;return"PythonError"===s.__typename&&(e=s.message),(0,t.jsx)(x.b,{intent:"warning",title:(0,t.jsxs)(h.Z,{direction:"row",spacing:4,children:[(0,t.jsx)("div",{children:"Could not load resource."}),e&&(0,t.jsx)(j.Z,{color:l.Es(),underline:"always",onClick:()=>{(0,_._K)({title:"Python error",body:e})},children:"View error"})]})})}let n=C(s.resourceType);return(0,t.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,t.jsx)(u.O,{identifier:"resource-explorer",firstInitialPercent:50,firstMinSize:400,first:(0,t.jsx)(i.x,{padding:{bottom:48},style:{overflowY:"auto"},children:"uses"===w?(0,t.jsx)(q,{resourceDetails:s,repoAddress:g,numUses:R}):(0,t.jsx)(B,{resourceDetails:s,repoAddress:g})}),second:(0,t.jsxs)(i.x,{padding:{bottom:48},style:{overflowY:"auto"},children:[(0,t.jsxs)(i.x,{flex:{gap:4,direction:"column"},margin:{left:24,right:12,vertical:16},children:[(0,t.jsx)(d.X6,{children:U}),(0,t.jsx)(p.u,{content:s.resourceType||"",children:(0,t.jsx)(d.fv,{children:n})})]}),(0,t.jsx)(i.x,{border:"top-and-bottom",background:l.gJ(),padding:{vertical:8,horizontal:24},style:{fontSize:"12px",fontWeight:500},children:"Description"}),(0,t.jsx)(i.x,{padding:{horizontal:24,vertical:16},children:s.description?(0,t.jsx)(I.U,{children:W(s.description)}):"None"})]})})})}})]})},B=e=>{let{resourceDetails:s,repoAddress:n}=e,r=Object.fromEntries(s.configuredValues.map(e=>[e.key,{value:e.value,type:e.type}])),o=s.nestedResources;return(0,t.jsxs)(t.Fragment,{children:[o.length>0&&(0,t.jsxs)(i.x,{children:[(0,t.jsx)(K,{children:(0,t.jsx)(d.pm,{children:"Resource dependencies"})}),(0,t.jsxs)(m.i,{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{width:120},children:"Key"}),(0,t.jsx)("th",{style:{width:180},children:"Resource"})]})}),(0,t.jsx)("tbody",{children:o.map(e=>{let s="TOP_LEVEL"===e.type&&e.resource?(0,t.jsx)(H,{url:(0,w.$U)(n,"/resources/".concat(e.name)),name:F(e.resource)||"",description:e.resource.description||void 0},e.name):(0,t.jsx)(H,{name:e.name},e.name);return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:e.name})}),(0,t.jsx)("td",{colSpan:2,children:s})]},e.name)})})]})]}),(0,t.jsxs)(i.x,{children:[(0,t.jsx)(K,{children:(0,t.jsx)(d.pm,{children:"Configuration"})}),(0,t.jsxs)(m.i,{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{width:120},children:"Key"}),(0,t.jsx)("th",{style:{width:90},children:"Type"}),(0,t.jsx)("th",{style:{width:90},children:"Value"})]})}),(0,t.jsx)("tbody",{children:0===s.configFields.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,children:(0,t.jsx)(i.x,{padding:{vertical:8},children:(0,t.jsx)(g.t,{icon:"settings",title:"No configuration",description:"This resource has no configuration fields."})})})}):s.configFields.map(e=>{let s=e.defaultValueAsJson,n=r.hasOwnProperty(e.name)?r[e.name].type:null,o=r.hasOwnProperty(e.name)?r[e.name].value:s,c="VALUE"===n&&s===o;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(i.x,{flex:{direction:"column",gap:4,alignItems:"flex-start"},children:[(0,t.jsx)("strong",{children:e.name}),(0,t.jsx)("div",{style:{fontSize:12,color:l.$()},children:e.description})]})}),(0,t.jsx)("td",{children:k(e.configTypeKey)}),(0,t.jsx)("td",{children:(0,t.jsxs)(i.x,{flex:{direction:"row",gap:16},children:[(0,t.jsx)(p.u,{content:(0,t.jsxs)(t.Fragment,{children:["Default: ",s]}),canShow:!c&&!!s,children:"ENV_VAR"===n?(0,t.jsx)(a.V,{children:o}):o}),c&&(0,t.jsx)(a.V,{children:"Default"}),"ENV_VAR"===n&&(0,t.jsx)(a.V,{intent:"success",children:"Env var"})]})})]},e.name)})})]})]})]})},q=e=>{let{resourceDetails:s,repoAddress:n,numUses:r}=e;if(0===r)return(0,t.jsx)(i.x,{padding:{vertical:16},children:(0,t.jsx)(g.t,{icon:"list",title:"No uses",description:"This resource is not used by any assets or resources."})});let o=s.parentResources;return(0,t.jsxs)(t.Fragment,{children:[o.length>0&&(0,t.jsxs)(i.x,{children:[(0,t.jsx)(K,{children:(0,t.jsx)(d.pm,{children:"Parent resources"})}),(0,t.jsxs)(m.i,{children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:(0,t.jsx)("th",{children:"Resource"})})}),(0,t.jsx)("tbody",{children:o.map(e=>e.resource&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{children:(0,t.jsx)(H,{url:(0,w.$U)(n,"/resources/".concat(e.resource.name)),name:F(e.resource)||"",description:e.resource.description||void 0})})},e.resource.name))})]})]}),s.assetKeysUsing.length>0&&(0,t.jsxs)(i.x,{children:[(0,t.jsx)(K,{children:(0,t.jsx)(d.pm,{children:"Assets"})}),(0,t.jsxs)(m.i,{children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:(0,t.jsx)("th",{children:"Asset key"})})}),(0,t.jsx)("tbody",{children:s.assetKeysUsing.map(e=>(0,t.jsx)("tr",{children:(0,t.jsx)("td",{children:(0,t.jsx)(V.R,{path:e.path,icon:"asset"},e.path.join("/"))})},e.path.join("/")))})]})]}),s.jobsOpsUsing.length>0&&(0,t.jsxs)(i.x,{children:[(0,t.jsx)(K,{children:(0,t.jsx)(d.pm,{children:"Jobs"})}),(0,t.jsxs)(m.i,{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Job name"}),(0,t.jsx)("th",{children:"Ops"})]})}),(0,t.jsx)("tbody",{children:s.jobsOpsUsing.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,t.jsx)(y.JO,{name:"job",color:l.md()}),(0,t.jsx)(b.rU,{to:(0,w.$U)(n,"/jobs/".concat(e.jobName)),children:(0,t.jsx)(f.g,{text:e.jobName})})]})}),(0,t.jsx)("td",{children:(0,t.jsx)(i.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:e.opHandleIDs.map(s=>(0,t.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,t.jsx)(y.JO,{name:"op",color:l.md()}),(0,t.jsx)(b.rU,{to:(0,w.$U)(n,"/jobs/".concat(e.jobName,"/").concat(s.split(".").join("/"))),children:(0,t.jsx)(f.g,{text:s})})]},s))})})]},e.jobName))})]})]}),[{name:"Schedules",objects:s.schedulesUsing,icon:(0,t.jsx)(y.JO,{name:"schedule",color:l.md()})},{name:"Sensors",objects:s.sensorsUsing,icon:(0,t.jsx)(y.JO,{name:"sensors",color:l.md()})}].filter(e=>{let{objects:s}=e;return s.length>0}).map(e=>{let{name:s,objects:r,icon:l}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)(K,{children:(0,t.jsx)(d.pm,{children:s})}),(0,t.jsxs)(m.i,{children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:(0,t.jsx)("th",{children:"Name"})})}),(0,t.jsx)("tbody",{children:r.map(e=>(0,t.jsx)("tr",{children:(0,t.jsx)("td",{children:(0,t.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[l,(0,t.jsx)(b.rU,{to:(0,w.$U)(n,"/".concat(s.toLowerCase(),"/").concat(e)),children:(0,t.jsx)(f.g,{text:e})})]})})},s+":"+e))})]})]},s)})]})},H=e=>{let{url:s,name:n,description:r}=e;return(0,t.jsxs)(i.x,{flex:{direction:"column"},children:[(0,t.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},style:{maxWidth:"100%"},children:[(0,t.jsx)(y.JO,{name:"resource",color:l.L$()}),(0,t.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:s?(0,t.jsx)(b.rU,{to:s,style:{overflow:"hidden"},children:(0,t.jsx)(f.g,{text:n})}):(0,t.jsx)(f.g,{text:n})})]}),(0,t.jsx)(d.aU,{children:r})]})},M=(0,E.Ps)(A()),Q=(0,E.Ps)(J(),M,S.B)}}]);
//# sourceMappingURL=1748.d9c619475b8ddfdf.js.map