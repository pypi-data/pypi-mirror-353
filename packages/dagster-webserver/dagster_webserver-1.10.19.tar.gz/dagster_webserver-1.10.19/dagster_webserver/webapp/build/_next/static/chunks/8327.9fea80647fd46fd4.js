"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8327],{8637:function(e,t,n){n.d(t,{T:function(){return i}});let i=n(35505).ZP.div.withConfig({componentId:"sc-2cf5acf-0"})(["height:100%;overflow-y:auto;padding-bottom:64px;width:100%;"])},5242:function(e,t,n){n.d(t,{p:function(){return y}});var i=n(52322),s=n(3217),r=n(82422),o=n(18984),l=n(26834),a=n(12597),d=n(28879),c=n.n(d),u=n(77491),h=n.n(u),x=n(2784),p=n(35505),m=n(96586),g=n(47793),j=n(84991);c().extend(h());let v={[j.izS.SUCCESS]:s.fA(),[j.izS.FAILURE]:s.FY(),[j.izS.STARTED]:s.v4(),[j.izS.SKIPPED]:s.A8()},f={[j.izS.SUCCESS]:s.Lv(),[j.izS.FAILURE]:s.MP(),[j.izS.STARTED]:s.Jq(),[j.izS.SKIPPED]:s.$l()},y=e=>{let{ticks:t,tickResultType:n,onHoverTick:s,onSelectTick:a,exactRange:d,timeRange:c=3e5,tickGrid:u=6e4,timeAfter:h=6e4}=e,[p,j]=(0,x.useState)(Date.now()),[v,f]=(0,x.useState)(!1);(0,x.useEffect)(()=>{if(!v&&!d){let e=setInterval(()=>{j(Date.now())},100);return()=>clearInterval(e)}return()=>{}},[d,v]);let y=(null==d?void 0:d[1])?1e3*d[1]:p+h,A=(null==d?void 0:d[0])?1e3*d[0]:p-c,E=A<p&&p<y,R=y-A,{viewport:M,containerProps:P}=(0,r.S)(),L=(0,x.useMemo)(()=>t.filter(e=>!e.endTimestamp||1e3*e.endTimestamp>A).reverse(),[t,A]),N=(0,x.useMemo)(()=>L.map((e,t)=>{var n,i;let s=(n=1e3*e.timestamp,M.width*(n-A)/R),r=(i=(0,g.g6)(e,L.length-t-1)?e.timestamp:e.endTimestamp?1e3*e.endTimestamp:p,M.width*(i-A)/R);return{...e,width:Math.max(r-s,8),startX:s}}),[A,p,L,R,M.width]),$=Math.max((y-A)/25,u)/5,q=Math.ceil(A/$)*$,U=Math.ceil((y-q)/$),F=Math.ceil(U/5),O=(0,x.useMemo)(()=>{let e=[];for(let t=0;t<U;t++){let n=q+t*$;e.push({time:n,x:M.width*(n-A)/R,showLabel:t%F==0})}return e},[U,q,$,M.width,A,R,F]);return(0,i.jsx)("div",{style:{marginRight:"8px"},children:(0,i.jsxs)("div",{...P,children:[(0,i.jsxs)(b,{children:[O.map(e=>(0,i.jsxs)(k,{style:{transform:"translateX(".concat(e.x,"px)")},children:[(0,i.jsx)(T,{}),e.showLabel?(0,i.jsx)(z,{children:(0,i.jsx)(o.YS,{children:(0,i.jsx)(m.E,{timestamp:{ms:e.time},timeFormat:{showSeconds:!0}})})}):null]},e.time)),N.map(e=>{var t,r;let o=null!==(r="materializations"!==n&&"runIds"in e?null===(t=e.runIds)||void 0===t?void 0:t.length:e.requestedAssetMaterializationCount)&&void 0!==r?r:0;return(0,i.jsx)(C,{style:{transform:"translateX(".concat(e.startX,"px)"),width:"".concat(e.width,"px")},status:e.status,onMouseEnter:()=>{s(e),f(!0)},onMouseLeave:()=>{s(),f(!1)},onClick:()=>{a(e)},children:(0,i.jsx)(l.u,{content:(0,i.jsx)(w,{tick:e,tickResultType:n}),children:(0,i.jsx)("div",{style:{width:e.width+"px",height:"80px"},children:o>0?o:null})})},e.id)}),E?(0,i.jsx)(I,{style:{transform:"translateX(".concat(M.width*(p-A)/R,"px)")}}):null]}),(0,i.jsx)(S,{})]})})},w=(0,x.memo)(e=>{let{tick:t,tickResultType:n}=e,r=(0,x.useMemo)(()=>{var e,i;return t.status===j.izS.FAILURE?"Evaluation failed":t.status===j.izS.STARTED?"Evaluating…":"materializations"!==n&&"runs"in t?"".concat((null===(e=t.runs)||void 0===e?void 0:e.length)||0," run").concat((0,a.I)(null===(i=t.runs)||void 0===i?void 0:i.length,"","s")," requested"):"".concat(t.requestedAssetMaterializationCount," materialization").concat((0,a.I)(t.requestedAssetMaterializationCount,"","s")," requested")},[t,n]),l=c()(1e3*t.timestamp),d=c()(t.endTimestamp?1e3*t.endTimestamp:Date.now()),u=l.to(d,!0);return(0,i.jsxs)("div",{children:[(0,i.jsx)(o.YS,{as:"div",children:(0,i.jsx)(m.E,{timestamp:{unix:t.timestamp},timeFormat:{showSeconds:!0}})}),(0,i.jsxs)(o.YS,{as:"div",children:[r," (",u,")"]}),t.status===j.izS.STARTED?null:(0,i.jsx)(o.YS,{color:s.$(),children:"Click for details"})]})}),b=p.ZP.div.withConfig({componentId:"sc-93f8c965-0"})(["position:relative;height:100px;padding:10px 2px;border-bottom:1px solid ",";"],s.wL()),S=p.ZP.div.withConfig({componentId:"sc-93f8c965-1"})(["height:24px;"]),C=p.ZP.div.withConfig({componentId:"sc-93f8c965-2"})(["cursor:pointer;position:absolute;top:10px;height:80px;will-change:transform,width;border-radius:2px;div{place-content:center;display:grid;}color:",";",""],s.v8(),e=>{let{status:t}=e;return"\n    background: ".concat(v[t],";\n    &:hover {\n      background: ").concat(f[t],";\n    }\n  ")}),k=p.ZP.div.withConfig({componentId:"sc-93f8c965-3"})(["position:absolute;top:0;height:124px;will-change:transform;"]),T=p.ZP.div.withConfig({componentId:"sc-93f8c965-4"})(["position:absolute;top:0;height:108px;width:1px;background:",";"],s.wL()),z=p.ZP.div.withConfig({componentId:"sc-93f8c965-5"})(["height:16px;position:absolute;bottom:0;width:100px;margin-left:-24px;"]),I=p.ZP.div.withConfig({componentId:"sc-93f8c965-6"})(["position:absolute;top:0;height:126px;width:2px;background:",";&:after{content:'Now';position:absolute;left:0;background:",";color:",";bottom:0;font-size:12px;padding:3px 4px;}"],s.Bj(),s.Bj(),s.KH())},47793:function(e,t,n){n.d(t,{g6:function(){return s},sw:function(){return r}});var i=n(84991);function s(e,t){return!e.endTimestamp&&(0!==t&&e.status===i.izS.STARTED||1e3*e.timestamp<Date.now()-259200)}function r(e,t){return e.reduce((e,n)=>{if(n.type===t){var i;return e+((null===(i=n.partitionKeys)||void 0===i?void 0:i.length)||0)}return e},0)}},98327:function(e,t,n){n.r(t),n.d(t,{OverviewRoot:function(){return tc},default:function(){return tu}});var i,s,r=n(52322),o=n(7267),l=n(94466),a=n(48177),d=n(2784),c=n(74741),u=n(50683),h=n(97077),x=n(82422),p=n(20940),m=n(54854),g=n(3217),j=n(78401),v=n(60206),f=n(18984),y=n(88510),w=n(47933),b=n(35505),S=n(34515),C=n(98933),k=n(96798),T=n(43251),z=n(34970),I=n(9628),A=n(52027),E=n(47121),R=n(44929),M=n(55638),P=n(93781),L=n(22710),N=n(63385),$=n(97373),q=n(91987),U=n(18328);let F=e=>{let{Header:t,TabButton:n}=e;(0,k.Px)(),(0,P.j)("Overview | Assets");let{assets:i,query:s,error:o,loading:l}=(0,R.Zg)(),x=(0,C.bT)({refresh:s,intervalMs:C.dT,leading:!0}),p=d.useMemo(()=>i?function(e){let t={};return e.forEach(e=>{if(!e.definition)return;let n=e.definition.groupName,i=e.definition.repository.name,s="".concat(n,"||").concat(i),r=t[s]||{groupName:n,repositoryName:i,assets:[]};r.assets.push(e),t[s]=r}),Object.values(t)}(i):[],[i]),[m,g]=(0,L.q)({queryKey:"q",encode:e=>({searchQuery:e?JSON.stringify(e):void 0}),decode:e=>{if("string"==typeof e.searchQuery)try{return JSON.parse(e.searchQuery)}catch{}return""}}),j=d.useMemo(()=>""===m?p:p.filter(e=>(e.groupName||D).toLowerCase().includes(m.toLowerCase())||e.repositoryName.toLowerCase().includes(m.toLowerCase())),[p,m]),v=d.useMemo(()=>{var e;return null!==(e=j.flatMap(e=>e.assets.map(e=>e.key)))&&void 0!==e?e:[]},[j]);(0,T.NY)(v,"OverviewAssetsRoot");let f=d.useRef(null),b=(0,y.MG)({count:j.length,getScrollElement:()=>f.current,estimateSize:()=>82,overscan:5}),z=b.getTotalSize(),I=b.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,r.jsx)(t,{refreshState:x}),(0,r.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,r.jsx)(n,{selected:"assets"}),(0,r.jsx)(u.oi,{value:m,onChange:e=>{g(e.target.value)},placeholder:"Filter asset groups…"})]}),(0,r.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:"top",children:(0,r.jsx)(h.b,{intent:"info",title:"This Assets tab will be removed in an upcoming release.",description:(0,r.jsxs)(r.Fragment,{children:["Use the ",(0,r.jsx)(w.rU,{to:"/asset-groups",children:"global asset lineage page"})," to view grouped asset status details."]})})})]}),l?(0,r.jsx)(a.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(c.$,{purpose:"page"})}):o?(0,r.jsx)(a.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(S.T9,{error:o})}):(0,r.jsx)(a.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,r.jsxs)($.W2,{ref:f,children:[(0,r.jsx)(_,{}),(0,r.jsx)($.Nh,{$totalHeight:z,children:I.map(e=>{let{index:t,key:n,size:i,start:s}=e,o=j[t];return(0,r.jsx)(K,{start:s,height:i,group:o},n)})})]})})]})},O="5fr 1fr 1fr 1fr 1fr",_=()=>(0,r.jsxs)($.VJ,{templateColumns:O,sticky:!0,children:[(0,r.jsx)($.qN,{children:"Group name"}),(0,r.jsx)($.qN,{children:"Missing"}),(0,r.jsx)($.qN,{children:"Failed/Overdue"}),(0,r.jsx)($.qN,{children:"In progress"}),(0,r.jsx)($.qN,{children:"Materialized"})]}),D="Ungrouped Assets";function K(e){var t,n;let{height:i,start:s,group:o}=e,l=d.useMemo(()=>o.assets.map(e=>({path:e.key.path})),[o.assets]),{liveDataByNode:u}=(0,T.NY)(l),h=d.useMemo(()=>(0,A.s)(o.assets,u),[u,o.assets]),j=null===(n=o.assets.find(e=>{var t;return null===(t=e.definition)||void 0===t?void 0:t.repository}))||void 0===n?void 0:null===(t=n.definition)||void 0===t?void 0:t.repository,v=(0,q.kQ)((null==j?void 0:j.name)||"",(null==j?void 0:j.location.name)||""),{containerProps:f,viewport:y}=(0,x.S)(),b=l.length!==Object.keys(u).length,S=b?"":"0";return(0,r.jsx)($.X2,{$height:i,$start:s,children:(0,r.jsxs)(Z,{border:"bottom",children:[(0,r.jsx)(B,{children:(0,r.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,r.jsxs)(a.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(p.JO,{name:"asset_group"}),o.groupName?(0,r.jsx)(w.rU,{style:{fontWeight:700},to:(0,U.$U)(v,"/asset-groups/".concat(o.groupName)),children:o.groupName}):D]}),(0,r.jsx)("div",{...f,children:(0,r.jsx)(V,{maxWidth:y.width,children:(0,r.jsx)(N.b,{repoAddress:v,showRefresh:!1})})})]}),(0,r.jsx)(a.x,{flex:{direction:"column",justifyContent:"center"},children:b?(0,r.jsx)(c.$,{purpose:"body-text"}):null})]})}),(0,r.jsx)(B,{children:h.missing.length?(0,r.jsx)(W,{assets:h.missing,getCount:e=>{let{status:t}=e;return t.case===z.KB.PARTITIONS_MISSING&&t.numMissing||0},adjective:"missing",children:(0,r.jsx)(m.V,{intent:"none",children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(g.im()),borderRadius:"50%"}}),h.missing.length]})})}):S}),(0,r.jsx)(B,{children:h.failed.length?(0,r.jsx)(W,{assets:h.failed,getCount:e=>{let{status:t}=e;return t.case===z.KB.PARTITIONS_FAILED&&t.numFailed||0},adjective:"failed",children:(0,r.jsx)(m.V,{intent:"danger",children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),h.failed.length]})})}):S}),(0,r.jsx)(B,{children:h.inprogress.length?(0,r.jsx)(W,{assets:h.inprogress,getCount:e=>{let{status:t}=e;return t.case===z.KB.MATERIALIZING&&t.numMaterializing||0},adjective:"materializing",children:(0,r.jsx)(m.V,{intent:"primary",icon:"spinner",children:h.inprogress.length})}):S}),(0,r.jsx)(B,{children:h.successful.length?(0,r.jsx)(W,{assets:h.successful,getCount:e=>{let{status:t}=e;return t.case===z.KB.PARTITIONS_MATERIALIZED&&t.numMaterialized||0},adjective:"materialized",children:(0,r.jsx)(m.V,{intent:"success",children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{backgroundColor:g.fA(),width:"10px",height:"10px",borderRadius:"50%"}}),h.successful.length]})})}):S})]})})}let Z=(0,b.ZP)(a.x).withConfig({componentId:"sc-b5f7f4f2-0"})(["display:grid;grid-template-columns:",";height:100%;> *{vertical-align:middle;}"],O),B=e=>{let{children:t}=e;return(0,r.jsx)($.E5,{style:{color:g.Ep()},children:(0,r.jsx)(a.x,{flex:{direction:"row",alignItems:"center",grow:1},children:t})})},V=b.ZP.div.withConfig({componentId:"sc-b5f7f4f2-1"})(["font-size:12px;pointer-events:none;a{color:",";pointer-events:none;max-width:",";}"],g.$(),e=>{let{maxWidth:t}=e;return t?"unset":"".concat(t,"px")});function W(e){let{assets:t,children:n,getCount:i,adjective:s}=e;return(0,r.jsx)(J,{children:(0,r.jsx)(j.P,{items:t,itemPredicate:(e,t)=>(0,I.ll)(t.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase()),itemRenderer:e=>{let t=i(e);return(0,r.jsx)(Q,{to:(0,M.p)(e.asset.key),target:"_blank",children:(0,r.jsx)(v.sN,{text:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)("div",{style:{paddingLeft:"4px"},children:(0,r.jsx)(p.JO,{name:"asset"})}),(0,r.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,I.ll)(e.asset.key)}),t&&t>0?(0,r.jsxs)(f.YS,{style:{color:g.$()},children:[(0,E._e)(t)," ",s]}):null]})},(0,I.ll)(e.asset.key))})},onItemSelect:()=>{},children:n})})}let J=b.ZP.div.withConfig({componentId:"sc-b5f7f4f2-2"})(["cursor:pointer;&:hover{font-weight:600;}"]),Q=(0,b.ZP)(w.rU).withConfig({componentId:"sc-b5f7f4f2-3"})(["&:hover{text-decoration:none;}"]);var G=n(71018),Y=n(44537),H=n(90025),X=n(98828),ee=n(73809),et=n(74597);let en=e=>{let{refreshState:t,tab:n}=e,i=(0,ee.dx)(),s=(0,X.I)(),{enableAssetHealthOverviewPreview:o}=(0,d.useContext)(H.G);return(0,r.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,r.jsxs)(Y.mQ,{selectedTabId:n,children:[(0,r.jsx)(et.f,{id:"activity",title:"Timeline",to:"/overview/activity"}),o&&(0,r.jsx)(et.f,{id:"asset-health",title:"Asset health",to:"/overview/asset-health"}),"has-global-amp"===s?(0,r.jsx)(et.f,{id:"amp",title:(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)("div",{children:"Auto-materialize"}),i.loading?(0,r.jsx)(c.$,{purpose:"body-text"}):(0,r.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===i.paused?g.L$():g.md()}})]}),to:"/overview/automation"}):null,(0,r.jsx)(et.f,{id:"resources",title:"Resources",to:"/overview/resources"})]}),t?(0,r.jsx)(a.x,{style:{alignSelf:"center"},children:(0,r.jsx)(C.xi,{refreshState:t})}):null]})},ei=e=>{let{tab:t,queryData:n,refreshState:i,...s}=e;return(0,r.jsx)(G.m,{tabs:(0,r.jsx)(a.x,{flex:{direction:"column",gap:8},children:(0,r.jsx)(en,{tab:t,queryData:n,refreshState:i})}),...s})};var es=n(87189),er=n(98768),eo=n(57595),el=n(6023);let ea=(0,b.ZP)(el.A).withConfig({componentId:"sc-3b34d0e7-0"})(["color:",";&&:hover{color:",";}",""],g.$(),g.$(),e=>{let{$active:t}=e;return t?(0,b.iv)(["background-color:",";color:",";&&:hover{background-color:",";color:",";}"],g.AU(),g.Ep(),g.AU(),g.Ep()):(0,b.iv)(["background-color:",";"],g.v8())}),ed=()=>{(0,P.j)("Overview | Activity");let e=d.useCallback(e=>{let{refreshState:t}=e;return(0,r.jsx)(ei,{tab:"activity",refreshState:t})},[]),[t,n]=(0,eo.U)("overview-activity-tab",e=>["timeline","assets"].includes(e)?e:"timeline"),{enableAssetHealthOverviewPreview:i}=d.useContext(H.G),s=i?"timeline":t,c=d.useCallback(e=>{let{selected:t}=e;return i?null:(s!==t&&n(t),(0,r.jsxs)(l.zH,{children:[(0,r.jsx)(ea,{$active:"timeline"===t,to:"/overview/activity/timeline",children:"Timeline"}),(0,r.jsx)(ea,{$active:"assets"===t,to:"/overview/activity/assets",children:"Assets"})]}))},[s,n,i]);return(0,r.jsx)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,r.jsxs)(o.rs,{children:[!i&&(0,r.jsx)(er.A,{path:"/overview/activity/assets",children:(0,r.jsx)(F,{Header:e,TabButton:c})}),(0,r.jsx)(er.A,{path:"/overview/activity/timeline",children:(0,r.jsx)(es.U,{Header:e,TabButton:c})}),(0,r.jsx)(er.A,{path:"*",isNestingRoute:!0,render:d.useCallback(()=>"timeline"===s?(0,r.jsx)(o.l_,{to:"/overview/activity/timeline"}):(0,r.jsx)(o.l_,{to:"/overview/activity/assets"}),[s])})]})})};var ec=n(73235),eu=n(15997),eh=n(26834),ex=n(9774),ep=n(2636),em=n(41748);let eg="1.5fr 1fr 1fr",ej=e=>{let{name:t,description:n,repoAddress:i,start:s,height:o,resourceType:l,parentResources:d,jobsOpsUsing:c,assetKeysUsing:u,schedulesUsing:h,sensorsUsing:x}=e,m=(0,em.$)(l),j=d.length+c.length+u.length+h.length+x.length;return(0,r.jsx)($.X2,{$height:o,$start:s,children:(0,r.jsxs)(ef,{border:"bottom",children:[(0,r.jsx)($.E5,{children:(0,r.jsxs)(a.x,{flex:{direction:"column",gap:4},children:[(0,r.jsxs)(a.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,r.jsx)(p.JO,{name:"resource",color:g.md()}),(0,r.jsx)("span",{style:{fontWeight:500},children:(0,r.jsx)(w.rU,{to:(0,U.$U)(i,"/resources/".concat(t)),children:(0,r.jsx)(ep.g,{text:t})})})]}),(0,r.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,r.jsx)(f.YS,{style:{color:g.$(),whiteSpace:"nowrap"},children:n})})]})}),(0,r.jsx)($.E5,{children:(0,r.jsx)(eh.u,{content:l,children:(0,r.jsx)(f.fv,{children:m})})}),(0,r.jsx)($.E5,{children:(0,r.jsx)(w.rU,{to:(0,U.$U)(i,"/resources/".concat(t,"/uses")),children:j})})]})})},ev=()=>(0,r.jsxs)($.VJ,{templateColumns:eg,sticky:!0,children:[(0,r.jsx)($.qN,{children:"Name"}),(0,r.jsx)($.qN,{children:"Type"}),(0,r.jsx)($.qN,{children:"Uses"})]}),ef=(0,b.ZP)(a.x).withConfig({componentId:"sc-6af8490b-0"})(["display:grid;grid-template-columns:",";height:100%;"],eg);var ey=n(29134),ew=n(81942),eb=n(14500),eS=n(27450);let eC=e=>{let{repos:t}=e,n=(0,d.useRef)(null),i=(0,d.useMemo)(()=>t.map(e=>{let{repoAddress:t}=e;return(0,eS.Uz)(t)}),[t]),{expandedKeys:s,onToggle:o,onToggleAll:l}=(0,ew.N)(ex.y,i),a=(0,d.useMemo)(()=>{let e=[];return t.forEach(t=>{let{repoAddress:n,resources:i}=t;e.push({type:"header",repoAddress:n,resourceCount:i.length});let r=(0,eS.Uz)(n);s.includes(r)&&i.forEach(t=>{e.push({type:"resource",repoAddress:n,...t})})}),e},[t,s]),c=(0,ey.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),u=(0,y.MG)({count:a.length,getScrollElement:()=>n.current,estimateSize:e=>{let t=a[e];return(null==t?void 0:t.type)==="header"?32:64},overscan:10}),h=u.getTotalSize(),x=u.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)($.W2,{ref:n,children:[(0,r.jsx)(ev,{}),(0,r.jsx)($.Nh,{$totalHeight:h,children:x.map(e=>{let{index:t,key:n,size:i,start:d}=e,u=a[t];return"header"===u.type?(0,r.jsx)(eb.vG,{repoAddress:u.repoAddress,height:i,start:d,onToggle:o,onToggleAll:l,expanded:s.includes((0,eS.Uz)(u.repoAddress)),showLocation:c.has(u.repoAddress.name),rightElement:(0,r.jsx)(eh.u,{content:1===u.resourceCount?"1 resource":"".concat(u.resourceCount," resources"),placement:"top",children:(0,r.jsx)(m.V,{children:u.resourceCount})})},n):(0,r.jsx)(ej,{height:i,start:d,...u},n)})})]})})};var ek=n(39916),eT=n(39282),ez=n(4760),eI=n(69752),eA=n(83891),eE=n(58926),eR=n(66135);let eM=e=>{let{tooltipContent:t}=e;return(0,eR.F)(2e3)?(0,r.jsx)(a.x,{margin:{top:1},children:(0,r.jsx)(eh.u,{placement:"top",canShow:!!t,content:t||"",children:(0,r.jsx)(c.$,{purpose:"body-text"})})}):null};var eP=n(630);function eL(){let e=(0,ec._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return eL=function(){return e},e}let eN=()=>{(0,k.Px)(),(0,P.j)("Overview | Resources");let{allRepos:e,visibleRepos:t,loading:n,data:i}=(0,d.useContext)(eP.C5),[s,o]=(0,L.q)({queryKey:"search",defaults:{search:""}}),l=e.length,h=(0,ez.aM)(eq,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),{data:x,loading:p}=h,m=(0,C.C4)(h,C.dT),j=(0,d.useMemo)(()=>{let e=(0,eT.S)(t),n=Object.values(i).filter(e=>"WorkspaceLocationEntry"===e.__typename),s=null==x?void 0:x.workspaceOrError;return e$((null==s?void 0:s.__typename)==="Workspace"?s.locationEntries:n).filter(t=>{let{repoAddress:n}=t;return e.has((0,eS.Uz)(n))})},[i,x,t]),v=!x&&p&&n,f=s.trim().toLocaleLowerCase(),y=f.length>0,w=(0,d.useMemo)(()=>{let e=f.toLocaleLowerCase();return j.map(t=>{let{repoAddress:n,resources:i}=t;return{repoAddress:n,resources:i.filter(t=>{let{name:n}=t;return n.toLocaleLowerCase().includes(e)})}}).filter(e=>{let{resources:t}=e;return t.length>0})},[j,f]),b=p&&!x;return(0,r.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(ei,{tab:"resources",refreshState:m}),(0,r.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[l>1?(0,r.jsx)(eA.C,{}):null,(0,r.jsx)(u.oi,{icon:"search",value:s,rightElement:b?(0,r.jsx)(eM,{tooltipContent:"Loading resources…"}):void 0,onChange:e=>o(e.target.value),placeholder:"Filter by resource name…",style:{width:"340px"}})]}),v&&!l?(0,r.jsx)(a.x,{padding:64,children:(0,r.jsx)(c.$,{purpose:"page"})}):(()=>{if(v)return(0,r.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(c.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:g.$()},children:"Loading resources…"})]})});let n=e.length>t.length;return w.length?(0,r.jsx)(eC,{repos:w}):y?(0,r.jsx)(a.x,{padding:{top:20},children:(0,r.jsx)(eu.t,{icon:"search",title:"No matching resources",description:n?(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:s})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:s})," were found in your definitions"]})})}):(0,r.jsx)(a.x,{padding:{top:20},children:(0,r.jsx)(eu.t,{icon:"search",title:"No resources",description:n?"No resources were found in the selected code locations":"No resources were found in your definitions"})})})()]})},e$=e=>{let t=e.map(e=>e.locationOrLoadError),n=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:i,allTopLevelResourceDetails:s}=t,r=(0,q.kQ)(i,e.name);s.length>0&&n.push({repoAddress:r,resources:s})}return(0,ek.S)(n)},eq=(0,ez.Ps)(eL(),eI.B,eE.L);var eU=n(8637),eF=n(86587),eO=n(58351),e_=n(35025);function eD(){let e=(0,ec._)(["\n  fragment AssetDaemonTickFragment on InstigationTick {\n    id\n    timestamp\n    endTimestamp\n    status\n    instigationType\n    error {\n      ...PythonErrorFragment\n    }\n    requestedAssetKeys {\n      path\n    }\n    requestedAssetMaterializationCount\n    autoMaterializeAssetEvaluationId\n    requestedMaterializationsForAssets {\n      assetKey {\n        path\n      }\n      partitionKeys\n    }\n  }\n\n  ","\n"]);return eD=function(){return e},e}function eK(){let e=(0,ec._)(["\n  query AssetDaemonTicksQuery(\n    $dayRange: Int\n    $dayOffset: Int\n    $statuses: [InstigationTickStatus!]\n    $limit: Int\n    $cursor: String\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    autoMaterializeTicks(\n      dayRange: $dayRange\n      dayOffset: $dayOffset\n      statuses: $statuses\n      limit: $limit\n      cursor: $cursor\n      beforeTimestamp: $beforeTimestamp\n      afterTimestamp: $afterTimestamp\n    ) {\n      id\n      ...AssetDaemonTickFragment\n    }\n  }\n\n  ","\n"]);return eK=function(){return e},e}let eZ=(0,ez.Ps)(eD(),eI.B),eB=(0,ez.Ps)(eK(),eZ);var eV=n(39361),eW=n(96586),eJ=n(84991),eQ=n(45511),eG=n(6891),eY=n(1801);let eH=(0,d.memo)(e=>{let{tick:t,isOpen:n,close:i}=e;return(0,r.jsx)(eY.Vm,{isOpen:n,setIsOpen:i,height:400,header:(0,r.jsx)(eV.fK,{label:t?(0,r.jsx)("div",{children:(0,r.jsx)(eW.E,{timestamp:{unix:t.timestamp},timeFormat:{showTimezone:!0}})}):""}),content:(0,r.jsxs)("div",{style:{display:"grid",gridTemplateRows:"auto auto minmax(0, 1fr)",height:"100%"},children:[(0,r.jsx)(a.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:t?(0,r.jsx)(eQ.c,{tick:t,tickResultType:"materializations"}):null}),(null==t?void 0:t.status)===eJ.izS.STARTED?null:(0,r.jsx)(eG.u,{tick:t})]})})});var eX=n(54123),e0=n(1026),e1=n(69706),e2=n(88322);let e8=e=>{let{loading:t,ticks:n,tickStatus:i,setTickStatus:s,setSelectedTick:o,paginationProps:l,actionBarComponents:d}=e;return(0,r.jsxs)(a.x,{children:[(0,r.jsxs)(a.x,{flex:{justifyContent:"space-between",alignItems:"center"},padding:{vertical:12,horizontal:24},margin:{top:32},border:"top",children:[(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[d,!t||(null==n?void 0:n.length)?null:(0,r.jsx)(c.$,{purpose:"body-text"})]}),(0,r.jsx)(e5,{status:i,onChange:s})]}),(0,r.jsxs)(e9,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,r.jsx)("th",{style:{width:90},children:"Status"}),(0,r.jsx)("th",{style:{width:90},children:"Duration"}),(0,r.jsx)("th",{style:{width:180},children:"Result"})]})}),(0,r.jsx)("tbody",{children:n.map((e,t)=>{let n=0!==t&&e.status===eJ.izS.STARTED&&!l.hasPrevCursor;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(eW.E,{timestamp:{unix:e.timestamp},timeFormat:{showTimezone:!0}})}),(0,r.jsx)("td",{children:(0,r.jsx)(e2.a,{tick:e,tickResultType:"materializations",isStuckStarted:n})}),(0,r.jsx)("td",{children:n?" - ":(0,r.jsx)(e1.Q,{startUnix:e.timestamp,endUnix:e.endTimestamp})}),(0,r.jsx)("td",{children:[eJ.izS.SKIPPED,eJ.izS.SUCCESS].includes(e.status)?(0,r.jsx)(eX.Z,{onClick:()=>{o(e)},children:(0,r.jsxs)(f.pN,{children:[e.requestedAssetMaterializationCount," materializations requested"]})}):" - "})]},e.id)})})]}),(0,r.jsx)("div",{style:{paddingBottom:"16px"},children:(0,r.jsx)(e0.pI,{...l})})]})};(i=s||(s={})).ALL="all",i.FAILED="failed",i.SUCCESS="success";let e3={all:[eJ.izS.SUCCESS,eJ.izS.FAILURE,eJ.izS.STARTED,eJ.izS.SKIPPED],failed:[eJ.izS.FAILURE],success:[eJ.izS.SUCCESS]},e4=[{key:"all",label:"All ticks"},{key:"success",label:"Requested"},{key:"failed",label:"Failed"}],e5=e=>{let{status:t,onChange:n}=e,i=e4.find(e=>{let{key:n}=e;return n===t});return(0,r.jsx)(j.P,{popoverProps:{position:"bottom-right"},filterable:!1,activeItem:i,items:e4,itemRenderer:(e,t)=>(0,r.jsx)(v.sN,{active:t.modifiers.active,onClick:t.handleClick,text:e.label,style:{width:"300px"}},e.key),onItemSelect:e=>n(e.key),children:(0,r.jsx)(l.zx,{rightIcon:(0,r.jsx)(p.JO,{name:"arrow_drop_down"}),style:{minWidth:"200px",display:"flex",justifyContent:"space-between"},children:null==i?void 0:i.label})})},e9=(0,b.ZP)(eO.i).withConfig({componentId:"sc-1b725a66-0"})(["th,td{vertical-align:middle !important;}"]);var e6=n(68313);let e7=e=>{var t,n;let{setSelectedTick:i,setTimerange:o,setParentStatuses:l,actionBarComponents:a}=e,[c,u]=(0,L.q)({queryKey:"status",defaults:{status:s.ALL}}),h=(0,d.useMemo)(()=>e3[c]||e3[s.ALL],[c]),{queryResult:x,paginationProps:p}=(0,e6.l)({query:eB,variables:{statuses:(0,d.useMemo)(()=>Array.from(h),[h])},nextCursorForResult:e=>{var t;let n=e.autoMaterializeTicks;if(n.length)return null===(t=n[14])||void 0===t?void 0:t.id},getResultArray:e=>(null==e?void 0:e.autoMaterializeTicks)?e.autoMaterializeTicks:[],pageSize:15});return(0,C.C4)(x,1e4,!p.hasPrevCursor),(0,d.useEffect)(()=>{if(p.hasPrevCursor){var e,t,n;let i=null===(e=x.data)||void 0===e?void 0:e.autoMaterializeTicks;if(i&&i.length){let e=null===(t=i[i.length-1])||void 0===t?void 0:t.timestamp,s=null===(n=i[0])||void 0===n?void 0:n.endTimestamp;e&&s&&o([e,s])}}else o(void 0)},[p.hasPrevCursor,null===(t=x.data)||void 0===t?void 0:t.autoMaterializeTicks,o]),(0,d.useEffect)(()=>{p.hasPrevCursor?l(Array.from(h)):l(void 0)},[p.hasPrevCursor,l,h]),(0,r.jsx)(e8,{loading:x.loading,ticks:(null===(n=x.data)||void 0===n?void 0:n.autoMaterializeTicks)||[],paginationProps:p,setSelectedTick:i,tickStatus:c,setTickStatus:u,actionBarComponents:a})};var te=n(15103),tt=n(1168),tn=n(5242),ti=n(47793),ts=n(14284);let tr={tags:[{key:"dagster/auto_materialize",value:"true"}]},to=()=>{var e;let t=(0,ee.dx)(),n=(0,te.p)(),{permissions:{canToggleAutoMaterialize:i}={}}=(0,tt.WB)(),[s,o]=(0,d.useState)(!1),[l,u]=(0,d.useState)(void 0),[h,x]=(0,d.useState)(void 0),p=(0,d.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return h||l?{afterTimestamp:null==h?void 0:h[0],beforeTimestamp:null==h?void 0:h[1],statuses:l}:{afterTimestamp:(e-12e5)/1e3}},[l,h]),[m,j]=(0,ez.td)(eB),v=(0,d.useCallback)(async()=>await m({variables:p()}),[m,p]);(0,d.useEffect)(()=>{v()},[v]),(0,C.bT)({refresh:v,enabled:!s&&!h&&!l,intervalMs:2e3,leading:!0});let[y,w]=(0,d.useState)(null),[b,S]=(0,L.q)((0,d.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:t}=e;return"runs"===t?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),k=null!==(e=j.data)&&void 0!==e?e:j.previousData,T=(0,d.useMemo)(()=>(null==k?void 0:k.autoMaterializeTicks)||[],[k]),z=(0,d.useMemo)(()=>{var e;return null!==(e=null==T?void 0:T.map((e,t)=>{let n=T[t-1];if(n&&(0,ti.g6)(e,t)){let t={...e};return t.endTimestamp=n.timestamp,t.status=eJ.izS.FAILURE,t}return e}))&&void 0!==e?e:[]},[JSON.stringify(T.map(e=>"".concat(e.id,":").concat(e.status)))]),I=(0,d.useCallback)(e=>{o(!!e)},[o]),A=(0,r.jsx)(eF.h,{activeItems:new Set([b]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{S(e)}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eO.i,{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Running"}),(0,r.jsx)("td",{children:t.loading?(0,r.jsx)(c.$,{purpose:"body-text"}):(0,r.jsx)(e_.X,{format:"switch",checked:!t.paused,disabled:!i,onChange:async e=>{let i=e.target.checked;i||await n({title:"Pause Auto-materializing?",description:"Pausing Auto-materializing will prevent new materializations triggered by an Auto-materializing policy."}),t.setPaused(!i)}})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Evaluation frequency"}),(0,r.jsx)("td",{children:"~30s"})]})]})}),(0,r.jsx)(a.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,r.jsx)(f.Tj,{children:"Evaluation timeline"})}),k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tn.p,{ticks:z,tickResultType:"materializations",onHoverTick:I,onSelectTick:w,exactRange:h,timeRange:12e5,tickGrid:3e5,timeAfter:18e4}),(0,r.jsx)(eH,{tick:y,isOpen:!!y,close:()=>{w(null)}}),"evaluations"===b?(0,r.jsx)(e7,{setSelectedTick:w,setParentStatuses:u,setTimerange:x,actionBarComponents:A}):(0,r.jsx)(a.x,{margin:{top:32},border:"top",children:(0,r.jsx)(ts.g,{filter:tr,actionBarComponents:A,includeRunsFromBackfills:!0})})]}):(0,r.jsxs)(a.x,{padding:{vertical:48},flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,r.jsx)(c.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:g.$()},children:"Loading evaluations…"})]})]})};var tl=n(6317);let ta=()=>{let e=(0,X.I)();switch(e){case"unknown":return(0,r.jsx)("div",{});case"has-global-amp":return(0,r.jsx)(td,{});case"has-sensor-amp":return(0,r.jsx)(o.l_,{to:"/automation"});default:(0,tl.UT)(e)}},td=()=>((0,k.Px)(),(0,P.j)("Overview | Auto-materialize"),(0,r.jsxs)(eU.T,{children:[(0,r.jsx)(ei,{tab:"amp"}),(0,r.jsx)(to,{})]})),tc=()=>(0,r.jsxs)(o.rs,{children:[(0,r.jsx)(er.A,{path:"/overview/activity",isNestingRoute:!0,children:(0,r.jsx)(ed,{})}),(0,r.jsx)(er.A,{path:"/overview/jobs",render:()=>(0,r.jsx)(o.l_,{to:"/jobs"})}),(0,r.jsx)(er.A,{path:"/overview/schedules",render:()=>(0,r.jsx)(o.l_,{to:"/automation"})}),(0,r.jsx)(er.A,{path:"/overview/sensors",render:()=>(0,r.jsx)(o.l_,{to:"/automation"})}),(0,r.jsx)(er.A,{path:"/overview/automation",render:()=>(0,r.jsx)(ta,{})}),(0,r.jsx)(er.A,{path:"/overview/backfills",exact:!0,render:()=>(0,r.jsx)(o.l_,{to:"/runs?view=backfills"})}),(0,r.jsx)(er.A,{path:"/overview/resources",children:(0,r.jsx)(eN,{})}),(0,r.jsx)(er.A,{path:"*",isNestingRoute:!0,render:()=>(0,r.jsx)(o.l_,{to:"/overview/activity"})})]});var tu=tc},39916:function(e,t,n){n.d(t,{S:function(){return s}});var i=n(27450);let s=e=>[...e].sort((e,t)=>{let n=(0,i.Uz)(e.repoAddress),s=(0,i.Uz)(t.repoAddress);return n.localeCompare(s)})},39282:function(e,t,n){n.d(t,{S:function(){return r}});var i=n(91987),s=n(27450);let r=e=>new Set(e.map(e=>(0,s.Uz)((0,i.kQ)(e.repository.name,e.repositoryLocation.name))))},88322:function(e,t,n){n.d(t,{a:function(){return g}});var i=n(52322),s=n(54854),r=n(38082),o=n(3217),l=n(26834),a=n(48177),d=n(54123),c=n(12597),u=n(39361),h=n(94466),x=n(2784),p=n(34515),m=n(84991);let g=e=>{let{tick:t,tickResultType:n,isStuckStarted:g}=e,[j,v]=(0,x.useState)(!1),f=(0,x.useMemo)(()=>{let e="materializations"===n?"materialization":"run";switch(t.status){case m.izS.STARTED:return(0,i.jsx)(s.V,{intent:"primary",icon:g?void 0:"spinner",children:g?"In progress":"Evaluating"});case m.izS.SKIPPED:let u=(0,i.jsx)(r.m,{fillColor:o.fk(),label:"materializations"===n?"0 materializations requested":"0 runs requested"});if("runKeys"in t&&t.runKeys.length){let e="".concat(t.runKeys.length," runs requested, but skipped because the runs already exist for the requested keys.");return(0,i.jsx)(l.u,{position:"right",content:e,children:u})}if("skipReason"in t&&t.skipReason)return(0,i.jsx)(l.u,{position:"right",content:t.skipReason,targetTagName:"div",children:u});return u;case m.izS.FAILURE:return(0,i.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,i.jsx)(s.V,{intent:"danger",children:"Failure"}),t.error?(0,i.jsx)(d.Z,{onClick:()=>{v(!0)},children:"View"}):null]});case m.izS.SUCCESS:let h="materializations"===n?t.requestedAssetMaterializationCount:t.runIds.length,x=(0,i.jsxs)(s.V,{intent:"success",children:[h," ",e,(0,c.I)(h,"","s")," requested"]});if("runKeys"in t&&t.runKeys.length>t.runIds.length){let e="".concat(t.runKeys.length," runs requested, but ").concat(t.runKeys.length-t.runIds.length," skipped because the runs already exist for those requested keys.");return(0,i.jsx)(l.u,{position:"right",content:e,children:x})}return x}},[g,t,n]);return(0,i.jsxs)(i.Fragment,{children:[f,t.error?(0,i.jsxs)(u.Vq,{isOpen:j,title:"Error",style:{width:"80vw"},children:[(0,i.jsx)(u.a7,{children:(0,i.jsx)(p.T9,{error:t.error})}),(0,i.jsx)(u.cN,{topBorder:!0,children:(0,i.jsx)(h.zx,{intent:"primary",onClick:()=>{v(!1)},children:"Close"})})]}):null]})}}}]);
//# sourceMappingURL=8327.9fea80647fd46fd4.js.map