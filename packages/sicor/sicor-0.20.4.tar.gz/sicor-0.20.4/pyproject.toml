# coding: utf-8

# SICOR is a freely available, platform-independent software designed to process hyperspectral remote sensing data,
# and particularly developed to handle data from the EnMAP sensor.

# This file contains the package setup tools.

# Copyright (C) 2018-2025 Niklas Bohn (GFZ, <nbohn@gfz.de>),
# GFZ Helmholtz Centre for Geosciences (GFZ, <https://www.gfz.de>)

# This software was developed within the context of the EnMAP project supported by the DLR Space Administration with
# funds of the German Federal Ministry of Economic Affairs and Energy (on the basis of a decision by the German
# Bundestag: 50 EE 1529) and contributions from DLR, GFZ and OHB System AG.

# This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public
# License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later
# version.

# This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied
# warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

# You should have received a copy of the GNU General Public License along with this program.
# If not, see <https://www.gnu.org/licenses/>.

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "sicor"
description = "Sensor Independent Atmospheric Correction"
authors = [
    {name = "Daniel Scheffler", email = "daniel.scheffler@gfz.de"},
    {name = "Niklas Bohn", email = "nbohn@gfz.de"},
]
maintainers = [
    {name = "Daniel Scheffler", email = "daniel.scheffler@gfz.de"},
]
license = "GPL-3.0-only"
license-files = ["LICEN[CS]E*", "AUTHORS.rst"]
classifiers = [
    "Development Status :: 4 - Beta",
    "Natural Language :: English",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
]
keywords = [
    "SICOR",
    "EnMAP",
    "EnMAP-Box",
    "hyperspectral",
    "remote sensing",
    "satellite",
    "atmospheric correction"
]
requires-python = ">=3.9"
dependencies = [
    "arosics>=1.2.4",
    "cachetools",
    "cdsapi",
    "cerberus",
    "dicttoxml",
    "dill",
    "ecmwf-api-client",
    "gdal",
    "gdown",
    "geoarray",
    "glymur",
    "h5py",
    "iso8601",
    "isofit",
    "jsmin",
    "matplotlib",
    "mpld3",
    "netCDF4",
    "numba",
    "numpy",
    "numpy-indexed",
    "openpyxl",  # implicitly required by pandas.read_excel()
    "pandas",
    "pillow",
    "pint",
    "psutil",
    "py_tools_ds",
    "pygrib",
    "pyprind",
    "pyproj",
    "pyrsr",
    "requests",
    "scikit-image>=0.20.0",
    "scikit-learn",
    "scipy",
    "spectral",
    "sympy",
    "tables",
    "tqdm",
    "xlrd",  # Excel support for pandas
]
dynamic = ["version"]

[project.readme]
file = "README.rst"
content-type = "text/x-rst"

[project.urls]
"Source code" = "https://git.gfz-potsdam.de/EnMAP/sicor"
"Issue Tracker" = "https://git.gfz-potsdam.de/EnMAP/sicor/-/issues"
"Documentation" = "https://enmap.git-pages.gfz-potsdam.de/sicor/doc/"
"Change log" = "https://git.gfz-potsdam.de/EnMAP/sicor/-/blob/main/HISTORY.rst"
"Zenodo" = "https://zenodo.org/records/5535505"

[project.optional-dependencies]
doc = [
    "sphinx-argparse",
    "sphinx_rtd_theme",
]
test = [
    "enpt>=0.20.0",
    "ipython_memory_usage",
    "pyorbital",  # needed to de-serialize a dill file from GeoMultiSens
    "pytest",
    "pytest-cov",
    "pytest-reporter-html1",
    "urlchecker",
]
lint = [
    "flake8",
    "pycodestyle",
    "pydocstyle",
]
dev = [
    "sicor[test]",
    "sicor[doc]",
    "sicor[lint]",
]

[project.scripts]
sicor_ac = "sicor.cli.sicor_ac:main"
sicor_ecmwf = "sicor.cli.sicor_ecmwf:main"
sicor_ac_EnMAP = "sicor.cli.sicor_ac_EnMAP:main"

[tool.hatch.version]
path = "sicor/version.py"

[tool.hatch.build.targets.wheel]
packages = ["sicor"]

[tool.hatch.build.targets.sdist]
exclude = [
    ".coveragerc",
    ".editorconfig",
    ".gitattributes",
    ".gitlab-ci.yml",
    ".github/**",
    "docs/**",
    "tests/**",
    "examples/**",
    "sicor/aerosol*.zip",
    "sicor/AC/data/EnMAP_LUT_MOD5_formatted_1nm",
    "sicor/sensors/S2MSI/GranuleInfo/data/S2_tile_data_full.json",
    "sicor/tables/cld_mask_S2_classi_20170412_v20170412_11:43:14.h5",
    "sicor/tables/linear_atm_functions_*.h5",
    "sicor/tables/noclear_novelty_detector_*.h5",
    "sicor/tables/noclear_novelty_detector_*.pkl",
    "__pycache__/**",
    "*.py[co]",
]
