import{s as Z,I as j,O,H as ee,J as te,K as ne,L as le,d as v,w as E,i as V,b as C,A as Fe,c as R,e as K,g as A,h as F,j as H,k as X,E as je,o as _e,q as _t,n as me,m as pt,f as se,t as oe,a as ue,Q as Et,z as Nt,F as Mt,B as qe,C as We,a8 as Ct}from"../chunks/DCD4EaBV.js";import{S as G,i as J,d as k,t as _,a as $,m as I,e as T,b as S,g as Y,c as x}from"../chunks/D7AglyOH.js";import{D as Pt,g as re,a as ae,e as pe,l as Lt,W as ye,c as ke,m as Vt,n as Pe,o as At,p as Ae,d as He,q as Ze,r as Ge,t as Ht}from"../chunks/BaU__oLp.js";import{c as ce}from"../chunks/DPkO8WLB.js";import{T as Rt,S as ht,a as Ft,c as jt,b as Kt,p as Ut,C as Ot}from"../chunks/Bcv6085W.js";import{T as y,C as zt,P as bt}from"../chunks/aXBliVKG.js";import{p as Bt}from"../chunks/B9u33kEZ.js";import{f as vt,T as U,a as qt,b as Je,c as Qe,e as Wt,s as ge,d as wt,k as kt,g as Se,t as Re,n as It,p as Ne,h as Tt,i as St,j as yt,l as we,o as De,q as Ee,m as Xe}from"../chunks/DUlpEjRy.js";import{I as ie,L as Zt,a as Gt}from"../chunks/DahxAjc2.js";import{g as Le}from"../chunks/C9O7YBlx.js";import{p as Me}from"../chunks/CEITR9xX.js";const Jt=!1,Qt=!1,Ql=Object.freeze(Object.defineProperty({__proto__:null,prerender:Jt,ssr:Qt},Symbol.toStringTag,{value:"Module"}));async function Ye(r,e=void 0){const l=[];let n="";e&&e!==""&&(n=`&where=${e}`);for(let s=0;;s+=1e3)try{const o=await fetch(`/items/${r}/?limit=1000&skip=${s}${n}`);if(o.ok){const i=await o.json();if(l.push(...i.map(a=>a.id)),i&&i.length<1e3)break}else{o.status!=404&&console.log("api.getDatasetItemsIds -",o.status,o.statusText,await o.text());break}}catch(o){console.log("api.getDatasetItemsIds -",o)}return l}async function Xt(){let r,e;try{const l=await fetch("/datasets/info");l.ok?(r=await l.json(),e=r.map(t=>new Pt(t))):(e=[],console.log("api.getDatasetsInfo -",l.status,l.statusText,await l.text()))}catch(l){e=[],console.log("api.getDatasetsInfo -",l)}return e}async function Yt(){let r;try{const e=await fetch("/models");e.ok?r=await e.json():(r=[],console.log("api.getModels -",e.status,e.statusText))}catch(e){r=[],console.log("api.getModels -",e)}return r}function xt(r){let e;const l=r[2].default,t=ee(l,r,r[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||($(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function en(r){let e,l;const t=[{name:"arrow-left-circle"},r[1],{iconNode:r[0]}];let n={$$slots:{default:[xt]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){I(e,s,o),l=!0},p(s,[o]){const i=o&3?re(t,[t[0],o&2&&ae(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){l||($(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function tn(r,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M16 12H8"}],["path",{d:"m12 8-4 4 4 4"}]];return r.$$set=o=>{l(1,e=j(j({},e),O(o))),"$$scope"in o&&l(3,n=o.$$scope)},e=O(e),[s,e,t,n]}class nn extends G{constructor(e){super(),J(this,e,tn,en,Z,{})}}function ln(r){let e;const l=r[2].default,t=ee(l,r,r[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||($(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function sn(r){let e,l;const t=[{name:"arrow-left"},r[1],{iconNode:r[0]}];let n={$$slots:{default:[ln]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){I(e,s,o),l=!0},p(s,[o]){const i=o&3?re(t,[t[0],o&2&&ae(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){l||($(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function on(r,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];return r.$$set=o=>{l(1,e=j(j({},e),O(o))),"$$scope"in o&&l(3,n=o.$$scope)},e=O(e),[s,e,t,n]}class rn extends G{constructor(e){super(),J(this,e,on,sn,Z,{})}}function an(r){let e;const l=r[2].default,t=ee(l,r,r[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||($(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function fn(r){let e,l;const t=[{name:"arrow-right"},r[1],{iconNode:r[0]}];let n={$$slots:{default:[an]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){I(e,s,o),l=!0},p(s,[o]){const i=o&3?re(t,[t[0],o&2&&ae(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){l||($(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function cn(r,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];return r.$$set=o=>{l(1,e=j(j({},e),O(o))),"$$scope"in o&&l(3,n=o.$$scope)},e=O(e),[s,e,t,n]}class un extends G{constructor(e){super(),J(this,e,cn,fn,Z,{})}}function mn(r){let e;const l=r[2].default,t=ee(l,r,r[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||($(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function $n(r){let e,l;const t=[{name:"database"},r[1],{iconNode:r[0]}];let n={$$slots:{default:[mn]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){I(e,s,o),l=!0},p(s,[o]){const i=o&3?re(t,[t[0],o&2&&ae(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){l||($(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function dn(r,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]];return r.$$set=o=>{l(1,e=j(j({},e),O(o))),"$$scope"in o&&l(3,n=o.$$scope)},e=O(e),[s,e,t,n]}class gn extends G{constructor(e){super(),J(this,e,dn,$n,Z,{})}}function _n(r){let e;const l=r[2].default,t=ee(l,r,r[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||($(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function pn(r){let e,l;const t=[{name:"home"},r[1],{iconNode:r[0]}];let n={$$slots:{default:[_n]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){I(e,s,o),l=!0},p(s,[o]){const i=o&3?re(t,[t[0],o&2&&ae(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){l||($(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function hn(r,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}],["polyline",{points:"9 22 9 12 15 12 15 22"}]];return r.$$set=o=>{l(1,e=j(j({},e),O(o))),"$$scope"in o&&l(3,n=o.$$scope)},e=O(e),[s,e,t,n]}class Dt extends G{constructor(e){super(),J(this,e,hn,pn,Z,{})}}function bn(r){let e;const l=r[2].default,t=ee(l,r,r[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||($(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function vn(r){let e,l;const t=[{name:"minus-circle"},r[1],{iconNode:r[0]}];let n={$$slots:{default:[bn]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){I(e,s,o),l=!0},p(s,[o]){const i=o&3?re(t,[t[0],o&2&&ae(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){l||($(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function wn(r,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 12h8"}]];return r.$$set=o=>{l(1,e=j(j({},e),O(o))),"$$scope"in o&&l(3,n=o.$$scope)},e=O(e),[s,e,t,n]}class kn extends G{constructor(e){super(),J(this,e,wn,vn,Z,{})}}function In(r){let e;const l=r[2].default,t=ee(l,r,r[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||($(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Tn(r){let e,l;const t=[{name:"mouse-pointer"},r[1],{iconNode:r[0]}];let n={$$slots:{default:[In]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){I(e,s,o),l=!0},p(s,[o]){const i=o&3?re(t,[t[0],o&2&&ae(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){l||($(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Sn(r,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}],["path",{d:"m13 13 6 6"}]];return r.$$set=o=>{l(1,e=j(j({},e),O(o))),"$$scope"in o&&l(3,n=o.$$scope)},e=O(e),[s,e,t,n]}class Dn extends G{constructor(e){super(),J(this,e,Sn,Tn,Z,{})}}function En(r){let e;const l=r[2].default,t=ee(l,r,r[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||($(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Nn(r){let e,l;const t=[{name:"plus-circle"},r[1],{iconNode:r[0]}];let n={$$slots:{default:[En]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){I(e,s,o),l=!0},p(s,[o]){const i=o&3?re(t,[t[0],o&2&&ae(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){l||($(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Mn(r,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 12h8"}],["path",{d:"M12 8v8"}]];return r.$$set=o=>{l(1,e=j(j({},e),O(o))),"$$scope"in o&&l(3,n=o.$$scope)},e=O(e),[s,e,t,n]}class Cn extends G{constructor(e){super(),J(this,e,Mn,Nn,Z,{})}}function Pn(r){let e;const l=r[2].default,t=ee(l,r,r[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||($(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Ln(r){let e,l;const t=[{name:"replace-all"},r[1],{iconNode:r[0]}];let n={$$slots:{default:[Pn]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){I(e,s,o),l=!0},p(s,[o]){const i=o&3?re(t,[t[0],o&2&&ae(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){l||($(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Vn(r,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"M14 4c0-1.1.9-2 2-2"}],["path",{d:"M20 2c1.1 0 2 .9 2 2"}],["path",{d:"M22 8c0 1.1-.9 2-2 2"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2"}],["path",{d:"m3 7 3 3 3-3"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2"}],["path",{d:"M14 14c1.1 0 2 .9 2 2v4c0 1.1-.9 2-2 2"}],["path",{d:"M20 14c1.1 0 2 .9 2 2v4c0 1.1-.9 2-2 2"}]];return r.$$set=o=>{l(1,e=j(j({},e),O(o))),"$$scope"in o&&l(3,n=o.$$scope)},e=O(e),[s,e,t,n]}class An extends G{constructor(e){super(),J(this,e,Vn,Ln,Z,{})}}function Hn(r){let e;const l=r[2].default,t=ee(l,r,r[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||($(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Rn(r){let e,l;const t=[{name:"wand-2"},r[1],{iconNode:r[0]}];let n={$$slots:{default:[Hn]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){I(e,s,o),l=!0},p(s,[o]){const i=o&3?re(t,[t[0],o&2&&ae(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){l||($(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Fn(r,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z"}],["path",{d:"m14 7 3 3"}],["path",{d:"M5 6v4"}],["path",{d:"M19 14v4"}],["path",{d:"M10 2v2"}],["path",{d:"M7 8H3"}],["path",{d:"M21 16h-4"}],["path",{d:"M11 3H9"}]];return r.$$set=o=>{l(1,e=j(j({},e),O(o))),"$$scope"in o&&l(3,n=o.$$scope)},e=O(e),[s,e,t,n]}class jn extends G{constructor(e){super(),J(this,e,Fn,Rn,Z,{})}}function Kn(r){let e;const l=r[2].default,t=ee(l,r,r[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&te(t,l,n,n[3],e?le(l,n[3],s,null):ne(n[3]),null)},i(n){e||($(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Un(r){let e,l;const t=[{name:"x"},r[1],{iconNode:r[0]}];let n={$$slots:{default:[Kn]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ie({props:n}),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){I(e,s,o),l=!0},p(s,[o]){const i=o&3?re(t,[t[0],o&2&&ae(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(i.$$scope={dirty:o,ctx:s}),e.$set(i)},i(s){l||($(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function On(r,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];return r.$$set=o=>{l(1,e=j(j({},e),O(o))),"$$scope"in o&&l(3,n=o.$$scope)},e=O(e),[s,e,t,n]}class zn extends G{constructor(e){super(),J(this,e,On,Un,Z,{})}}const Bn=""+new URL("../assets/favicon.OuiISzV3.ico",import.meta.url).href;function qn(r){let e,l;return e=new An({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function xe(r){let e,l,t,n;return e=new y({props:{tooltipContent:"Validate association (Enter)",selected:!1,$$slots:{default:[Wn]},$$scope:{ctx:r}}}),e.$on("click",r[2]),t=new y({props:{tooltipContent:"Abort association (Escape)",selected:!1,$$slots:{default:[yn]},$$scope:{ctx:r}}}),t.$on("click",r[3]),{c(){S(e.$$.fragment),l=H(),S(t.$$.fragment)},l(s){T(e.$$.fragment,s),l=A(s),T(t.$$.fragment,s)},m(s,o){I(e,s,o),V(s,l,o),I(t,s,o),n=!0},p(s,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:s}),e.$set(i);const a={};o&256&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||($(e.$$.fragment,s),$(t.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),n=!1},d(s){s&&v(l),k(e,s),k(t,s)}}}function Wn(r){let e,l;return e=new zt({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function yn(r){let e,l;return e=new zn({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Zn(r){var f,u;let e,l,t,n,s,o,i;l=new y({props:{tooltipContent:vt.name,selected:((f=r[1])==null?void 0:f.type)===U.Fusion,$$slots:{default:[qn]},$$scope:{ctx:r}}}),l.$on("click",r[6]);let a=((u=r[1])==null?void 0:u.type)===U.Fusion&&xe(r);return{c(){e=F("div"),S(l.$$.fragment),t=H(),a&&a.c(),this.h()},l(c){e=R(c,"DIV",{class:!0});var d=K(e);T(l.$$.fragment,d),t=A(d),a&&a.l(d),d.forEach(v),this.h()},h(){var c;E(e,"class",n=ce("flex items-center gap-4",{"bg-slate-200 rounded-sm":((c=r[1])==null?void 0:c.type)===U.Fusion}))},m(c,d){V(c,e,d),I(l,e,null),C(e,t),a&&a.m(e,null),s=!0,o||(i=Fe(window,"keydown",r[4]),o=!0)},p(c,[d]){var g,m,p;const h={};d&2&&(h.selected=((g=c[1])==null?void 0:g.type)===U.Fusion),d&256&&(h.$$scope={dirty:d,ctx:c}),l.$set(h),((m=c[1])==null?void 0:m.type)===U.Fusion?a?(a.p(c,d),d&2&&$(a,1)):(a=xe(c),a.c(),$(a,1),a.m(e,null)):a&&(Y(),_(a,1,1,()=>{a=null}),x()),(!s||d&2&&n!==(n=ce("flex items-center gap-4",{"bg-slate-200 rounded-sm":((p=c[1])==null?void 0:p.type)===U.Fusion})))&&E(e,"class",n)},i(c){s||($(l.$$.fragment,c),$(a),s=!0)},o(c){_(l.$$.fragment,c),_(a),s=!1},d(c){c&&v(e),k(l),a&&a.d(),o=!1,i()}}}function Gn(r,e,l){let t,n;X(r,ge,c=>l(1,t=c)),X(r,wt,c=>l(7,n=c));let{selectTool:s}=e,{clearFusionHighlighting:o}=e;const i=()=>{let c=[];if(n.to_fuse.length>1){const[d,...h]=n.to_fuse;h.forEach(g=>{g.ui.childs&&(c=[...c,...g.ui.childs])}),qt.update(g=>g.map(m=>{if(c.includes(m)){if(m.ui.top_entities&&m.ui.top_entities.length>0&&m.data.entity_ref.id!==m.ui.top_entities[0].id)return console.error("ERROR: Sub entities currently not managed for fusion.",m),m;m.data.entity_ref={id:d.id,name:d.table_info.name},m.ui.top_entities=[d];const p={change_type:"update",object:m};Je.update(w=>Qe(w,p))}return m})),Wt.update(g=>{const m=g.filter(p=>!h.includes(p));return m.length>0&&m.map(p=>(p.id===d.id&&(p.ui.childs=p.ui.childs?[...p.ui.childs,...c]:c),p)),m}),h.forEach(g=>{const m={change_type:"delete",object:g};Je.update(p=>Qe(p,m))})}o()},a=()=>{o()};function f(c){if((t==null?void 0:t.type)!==U.Fusion)return;const d=document.activeElement;if(!(d instanceof HTMLInputElement||d instanceof HTMLTextAreaElement||(d==null?void 0:d.getAttribute("contenteditable"))==="true"))switch(c.key){case"Escape":a();break;case"Enter":i();break}}const u=()=>s(vt);return r.$$set=c=>{"selectTool"in c&&l(0,s=c.selectTool),"clearFusionHighlighting"in c&&l(5,o=c.clearFusionHighlighting)},[s,t,i,a,f,o,u]}class Jn extends G{constructor(e){super(),J(this,e,Gn,Zn,Z,{selectTool:0,clearFusionHighlighting:5})}}function et(r,e,l){const t=r.slice();return t[7]=e[l],t}function tt(r,e,l){const t=r.slice();return t[10]=e[l],t}function Qn(r){let e,l;return e=new Rt({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function nt(r){let e,l,t=pe(Re),n=[];for(let o=0;o<t.length;o+=1)n[o]=st(et(r,t,o));const s=o=>_(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=_e()},l(o){for(let i=0;i<n.length;i+=1)n[i].l(o);e=_e()},m(o,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,i);V(o,e,i),l=!0},p(o,i){if(i&28){t=pe(Re);let a;for(a=0;a<t.length;a+=1){const f=et(o,t,a);n[a]?(n[a].p(f,i),$(n[a],1)):(n[a]=st(f),n[a].c(),$(n[a],1),n[a].m(e.parentNode,e))}for(Y(),a=t.length;a<n.length;a+=1)s(a);x()}},i(o){if(!l){for(let i=0;i<t.length;i+=1)$(n[i]);l=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)_(n[i]);l=!1},d(o){o&&v(e),je(n,o)}}}function lt(r){let e,l,t;return{c(){e=F("div"),l=F("div"),this.h()},l(n){e=R(n,"DIV",{});var s=K(e);l=R(s,"DIV",{class:!0,style:!0}),K(l).forEach(v),s.forEach(v),this.h()},h(){E(l,"class","w-1 h-1 bg-primary rounded-full absolute"),E(l,"style",t=`top: ${r[10].y*100}%; left: ${r[10].x*100}%; background: ${r[3](r[10],r[7].template_id===r[2])}`)},m(n,s){V(n,e,s),C(e,l)},p(n,s){s&4&&t!==(t=`top: ${n[10].y*100}%; left: ${n[10].x*100}%; background: ${n[3](n[10],n[7].template_id===n[2])}`)&&E(l,"style",t)},d(n){n&&v(e)}}}function Xn(r){let e,l=pe(r[7].vertices),t=[];for(let n=0;n<l.length;n+=1)t[n]=lt(tt(r,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=H()},l(n){for(let s=0;s<t.length;s+=1)t[s].l(n);e=A(n)},m(n,s){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(n,s);V(n,e,s)},p(n,s){if(s&12){l=pe(n[7].vertices);let o;for(o=0;o<l.length;o+=1){const i=tt(n,l,o);t[o]?t[o].p(i,s):(t[o]=lt(i),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&v(e),je(t,n)}}}function st(r){let e,l;function t(){return r[6](r[7])}return e=new y({props:{tooltipContent:r[7].template_id,selected:r[2]===r[7].template_id,$$slots:{default:[Xn]},$$scope:{ctx:r}}}),e.$on("click",t),{c(){S(e.$$.fragment)},l(n){T(e.$$.fragment,n)},m(n,s){I(e,n,s),l=!0},p(n,s){r=n;const o={};s&4&&(o.selected=r[2]===r[7].template_id),s&8196&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(n){l||($(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function Yn(r){var i;let e,l,t,n,s;l=new y({props:{tooltipContent:kt.name,$$slots:{default:[Qn]},$$scope:{ctx:r}}}),l.$on("click",r[5]);let o=((i=r[1])==null?void 0:i.type)===U.Keypoint&&nt(r);return{c(){e=F("div"),S(l.$$.fragment),t=H(),o&&o.c(),this.h()},l(a){e=R(a,"DIV",{class:!0});var f=K(e);T(l.$$.fragment,f),t=A(f),o&&o.l(f),f.forEach(v),this.h()},h(){var a;E(e,"class",n=ce("flex items-center gap-4",{"bg-slate-200 rounded-sm":((a=r[1])==null?void 0:a.type)===U.Keypoint}))},m(a,f){V(a,e,f),I(l,e,null),C(e,t),o&&o.m(e,null),s=!0},p(a,[f]){var c,d;const u={};f&8192&&(u.$$scope={dirty:f,ctx:a}),l.$set(u),((c=a[1])==null?void 0:c.type)===U.Keypoint?o?(o.p(a,f),f&2&&$(o,1)):(o=nt(a),o.c(),$(o,1),o.m(e,null)):o&&(Y(),_(o,1,1,()=>{o=null}),x()),(!s||f&2&&n!==(n=ce("flex items-center gap-4",{"bg-slate-200 rounded-sm":((d=a[1])==null?void 0:d.type)===U.Keypoint})))&&E(e,"class",n)},i(a){s||($(l.$$.fragment,a),$(o),s=!0)},o(a){_(l.$$.fragment,a),_(o),s=!1},d(a){a&&v(e),k(l),o&&o.d()}}}function xn(r,e,l){let t,n;X(r,ge,u=>l(1,t=u)),X(r,Se,u=>l(2,n=u));let{selectTool:s}=e;const o=(u,c)=>{var d;if((d=u.features)!=null&&d.color)return u.features.color;if(c)return"white"},i=u=>{Se.set(u),It.set({status:"none"})};ge.subscribe(u=>{(u==null?void 0:u.type)!==U.Keypoint?Se.set(null):Se.set(Re[0].template_id)});const a=()=>s(kt),f=u=>i(u.template_id);return r.$$set=u=>{"selectTool"in u&&l(0,s=u.selectTool)},[s,t,n,o,i,a,f]}class el extends G{constructor(e){super(),J(this,e,xn,Yn,Z,{selectTool:0})}}function tl(r){let e,l;return e=new Dn({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function nl(r){let e,l;return e=new ht({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ll(r){let e,l;return e=new Ft({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ot(r){let e,l;return e=new Jn({props:{selectTool:r[7],clearFusionHighlighting:r[6]}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},p:me,i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function sl(r){let e,l;return e=new jn({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function rt(r){var c,d,h;let e,l,t,n,s,o,i,a,f,u;return e=new y({props:{tooltipContent:r[2].name,selected:((c=r[1])==null?void 0:c.type)===U.PointSelection&&!!r[1].label,$$slots:{default:[ol]},$$scope:{ctx:r}}}),e.$on("click",r[14]),t=new y({props:{tooltipContent:r[3].name,selected:((d=r[1])==null?void 0:d.type)===U.PointSelection&&!r[1].label,$$slots:{default:[rl]},$$scope:{ctx:r}}}),t.$on("click",r[15]),s=new y({props:{tooltipContent:r[4].name,selected:((h=r[1])==null?void 0:h.type)===U.Rectangle&&r[1].isSmart,$$slots:{default:[al]},$$scope:{ctx:r}}}),s.$on("click",r[16]),f=new y({props:{tooltipContent:"Smart segmentation model settings",$$slots:{default:[il]},$$scope:{ctx:r}}}),f.$on("click",r[17]),{c(){S(e.$$.fragment),l=H(),S(t.$$.fragment),n=H(),S(s.$$.fragment),o=H(),i=F("div"),a=H(),S(f.$$.fragment),this.h()},l(g){T(e.$$.fragment,g),l=A(g),T(t.$$.fragment,g),n=A(g),T(s.$$.fragment,g),o=A(g),i=R(g,"DIV",{class:!0}),K(i).forEach(v),a=A(g),T(f.$$.fragment,g),this.h()},h(){E(i,"class","w-1 -m-3.5 h-full bg-primary-light")},m(g,m){I(e,g,m),V(g,l,m),I(t,g,m),V(g,n,m),I(s,g,m),V(g,o,m),V(g,i,m),V(g,a,m),I(f,g,m),u=!0},p(g,m){var z,P,M;const p={};m&4&&(p.tooltipContent=g[2].name),m&2&&(p.selected=((z=g[1])==null?void 0:z.type)===U.PointSelection&&!!g[1].label),m&2097152&&(p.$$scope={dirty:m,ctx:g}),e.$set(p);const w={};m&8&&(w.tooltipContent=g[3].name),m&2&&(w.selected=((P=g[1])==null?void 0:P.type)===U.PointSelection&&!g[1].label),m&2097152&&(w.$$scope={dirty:m,ctx:g}),t.$set(w);const b={};m&16&&(b.tooltipContent=g[4].name),m&2&&(b.selected=((M=g[1])==null?void 0:M.type)===U.Rectangle&&g[1].isSmart),m&2097152&&(b.$$scope={dirty:m,ctx:g}),s.$set(b);const N={};m&2097152&&(N.$$scope={dirty:m,ctx:g}),f.$set(N)},i(g){u||($(e.$$.fragment,g),$(t.$$.fragment,g),$(s.$$.fragment,g),$(f.$$.fragment,g),u=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(s.$$.fragment,g),_(f.$$.fragment,g),u=!1},d(g){g&&(v(l),v(n),v(o),v(i),v(a)),k(e,g),k(t,g),k(s,g),k(f,g)}}}function ol(r){let e,l;return e=new Cn({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function rl(r){let e,l;return e=new kn({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function al(r){let e,l;return e=new ht({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function il(r){let e,l;return e=new Kt({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function fl(r){var N,z,P;let e,l,t,n,s,o,i,a,f,u,c,d,h,g,m,p;t=new y({props:{tooltipContent:Ne.name,selected:((N=r[1])==null?void 0:N.type)===U.Pan,$$slots:{default:[tl]},$$scope:{ctx:r}}}),t.$on("click",r[11]),s=new y({props:{tooltipContent:Tt.name,selected:((z=r[1])==null?void 0:z.type)===U.Rectangle&&!r[1].isSmart,$$slots:{default:[nl]},$$scope:{ctx:r}}}),s.$on("click",r[12]),i=new y({props:{tooltipContent:St.name,selected:((P=r[1])==null?void 0:P.type)===U.Polygon,$$slots:{default:[ll]},$$scope:{ctx:r}}}),i.$on("click",r[13]),f=new el({props:{selectTool:r[7]}});let w=r[0]&&ot(r);h=new y({props:{tooltipContent:"Use a smart segmentation model",$$slots:{default:[sl]},$$scope:{ctx:r}}}),h.$on("click",r[8]);let b=r[5]&&rt(r);return{c(){e=F("div"),l=F("div"),S(t.$$.fragment),n=H(),S(s.$$.fragment),o=H(),S(i.$$.fragment),a=H(),S(f.$$.fragment),u=H(),w&&w.c(),c=H(),d=F("div"),S(h.$$.fragment),g=H(),b&&b.c(),this.h()},l(M){e=R(M,"DIV",{class:!0});var L=K(e);l=R(L,"DIV",{class:!0});var D=K(l);T(t.$$.fragment,D),n=A(D),T(s.$$.fragment,D),o=A(D),T(i.$$.fragment,D),a=A(D),T(f.$$.fragment,D),u=A(D),w&&w.l(D),D.forEach(v),c=A(L),d=R(L,"DIV",{class:!0});var B=K(d);T(h.$$.fragment,B),g=A(B),b&&b.l(B),B.forEach(v),L.forEach(v),this.h()},h(){E(l,"class","flex items-center gap-4"),E(d,"class",m=ce("flex items-center gap-4",{"bg-slate-200 rounded-sm":r[5]})),E(e,"class","flex gap-4 z-10")},m(M,L){V(M,e,L),C(e,l),I(t,l,null),C(l,n),I(s,l,null),C(l,o),I(i,l,null),C(l,a),I(f,l,null),C(l,u),w&&w.m(l,null),C(e,c),C(e,d),I(h,d,null),C(d,g),b&&b.m(d,null),p=!0},p(M,[L]){var $e,he,be;const D={};L&2&&(D.selected=(($e=M[1])==null?void 0:$e.type)===U.Pan),L&2097152&&(D.$$scope={dirty:L,ctx:M}),t.$set(D);const B={};L&2&&(B.selected=((he=M[1])==null?void 0:he.type)===U.Rectangle&&!M[1].isSmart),L&2097152&&(B.$$scope={dirty:L,ctx:M}),s.$set(B);const q={};L&2&&(q.selected=((be=M[1])==null?void 0:be.type)===U.Polygon),L&2097152&&(q.$$scope={dirty:L,ctx:M}),i.$set(q),M[0]?w?(w.p(M,L),L&1&&$(w,1)):(w=ot(M),w.c(),$(w,1),w.m(l,null)):w&&(Y(),_(w,1,1,()=>{w=null}),x());const fe={};L&2097152&&(fe.$$scope={dirty:L,ctx:M}),h.$set(fe),M[5]?b?(b.p(M,L),L&32&&$(b,1)):(b=rt(M),b.c(),$(b,1),b.m(d,null)):b&&(Y(),_(b,1,1,()=>{b=null}),x()),(!p||L&32&&m!==(m=ce("flex items-center gap-4",{"bg-slate-200 rounded-sm":M[5]})))&&E(d,"class",m)},i(M){p||($(t.$$.fragment,M),$(s.$$.fragment,M),$(i.$$.fragment,M),$(f.$$.fragment,M),$(w),$(h.$$.fragment,M),$(b),p=!0)},o(M){_(t.$$.fragment,M),_(s.$$.fragment,M),_(i.$$.fragment,M),_(f.$$.fragment,M),_(w),_(h.$$.fragment,M),_(b),p=!1},d(M){M&&v(e),k(t),k(s),k(i),k(f),w&&w.d(),k(h),b&&b.d()}}}function cl(r,e,l){let t,n,s,o,i;X(r,ge,P=>l(1,n=P)),X(r,Ut,P=>l(18,s=P)),X(r,Lt,P=>l(19,o=P)),X(r,Xe,P=>l(20,i=P));let{isVideo:a=!1}=e,f=null;const u=()=>{jt(),wt.set({to_fuse:[],forbids:[]})},c=P=>{P!==n&&(u(),ge.set(P))},d=()=>{t?c(Ne):(c(we),(o&&(i.selectedModelName===""||i.selectedTableName==="")||!o&&s.filter(P=>P.selected).length>0)&&h())},h=()=>{Xe.update(P=>({...P,currentModalOpen:"selectModel"}))};yt.subscribe(P=>{P&&(l(2,we.postProcessor=P,we),l(3,De.postProcessor=P,De),l(4,Ee.postProcessor=P,Ee))}),_t(()=>{n===void 0&&ge.set(Ne),u()});const g=()=>c(Ne),m=()=>c(Tt),p=()=>c(St),w=()=>c(we),b=()=>c(De),N=()=>c(Ee),z=()=>h();return r.$$set=P=>{"isVideo"in P&&l(0,a=P.isVideo)},r.$$.update=()=>{r.$$.dirty&2&&l(5,t=n&&n.isSmart),r.$$.dirty&1026&&((!(f!=null&&f.isSmart)||!(n!=null&&n.isSmart))&&It.set({status:"none"}),l(10,f=n))},[a,n,we,De,Ee,t,u,c,d,h,f,g,m,p,w,b,N,z]}class ul extends G{constructor(e){super(),J(this,e,cl,fl,Z,{isVideo:0})}}function at(r){let e,l,t,n;const s=[$l,ml],o=[];function i(a,f){return a[1]?0:1}return e=i(r),l=o[e]=s[e](r),{c(){l.c(),t=_e()},l(a){l.l(a),t=_e()},m(a,f){o[e].m(a,f),V(a,t,f),n=!0},p(a,f){let u=e;e=i(a),e===u?o[e].p(a,f):(Y(),_(o[u],1,1,()=>{o[u]=null}),x(),l=o[e],l?l.p(a,f):(l=o[e]=s[e](a),l.c()),$(l,1),l.m(t.parentNode,t))},i(a){n||($(l),n=!0)},o(a){_(l),n=!1},d(a){a&&v(t),o[e].d(a)}}}function ml(r){let e,l,t,n,s,o,i,a,f,u,c,d,h=r[6]()+"",g,m,p,w;return l=new y({props:{tooltipContent:"Back to Home",$$slots:{default:[dl]},$$scope:{ctx:r}}}),l.$on("click",r[9]),n=new y({props:{tooltipContent:"Back to dataset",$$slots:{default:[gl]},$$scope:{ctx:r}}}),n.$on("click",function(){pt(r[3])&&r[3].apply(this,arguments)}),a=new y({props:{tooltipContent:"Previous item (shift + left arrow)",$$slots:{default:[_l]},$$scope:{ctx:r}}}),a.$on("click",r[10]),u=new y({props:{tooltipContent:"Next item (shift + right arrow)",$$slots:{default:[pl]},$$scope:{ctx:r}}}),u.$on("click",r[11]),p=new ul({props:{isVideo:r[7].workspace==ye.VIDEO}}),{c(){e=F("div"),S(l.$$.fragment),t=H(),S(n.$$.fragment),s=H(),o=oe(r[0]),i=H(),S(a.$$.fragment),f=H(),S(u.$$.fragment),c=H(),d=F("span"),g=oe(h),m=H(),S(p.$$.fragment),this.h()},l(b){e=R(b,"DIV",{class:!0});var N=K(e);T(l.$$.fragment,N),t=A(N),T(n.$$.fragment,N),s=A(N),o=se(N,r[0]),i=A(N),T(a.$$.fragment,N),f=A(N),T(u.$$.fragment,N),c=A(N),d=R(N,"SPAN",{});var z=K(d);g=se(z,h),z.forEach(v),N.forEach(v),m=A(b),T(p.$$.fragment,b),this.h()},h(){E(e,"class","flex items-center gap-4")},m(b,N){V(b,e,N),I(l,e,null),C(e,t),I(n,e,null),C(e,s),C(e,o),C(e,i),I(a,e,null),C(e,f),I(u,e,null),C(e,c),C(e,d),C(d,g),V(b,m,N),I(p,b,N),w=!0},p(b,N){r=b;const z={};N&4096&&(z.$$scope={dirty:N,ctx:r}),l.$set(z);const P={};N&4096&&(P.$$scope={dirty:N,ctx:r}),n.$set(P),(!w||N&1)&&ue(o,r[0]);const M={};N&4096&&(M.$$scope={dirty:N,ctx:r}),a.$set(M);const L={};N&4096&&(L.$$scope={dirty:N,ctx:r}),u.$set(L),(!w||N&64)&&h!==(h=r[6]()+"")&&ue(g,h);const D={};N&128&&(D.isVideo=r[7].workspace==ye.VIDEO),p.$set(D)},i(b){w||($(l.$$.fragment,b),$(n.$$.fragment,b),$(a.$$.fragment,b),$(u.$$.fragment,b),$(p.$$.fragment,b),w=!0)},o(b){_(l.$$.fragment,b),_(n.$$.fragment,b),_(a.$$.fragment,b),_(u.$$.fragment,b),_(p.$$.fragment,b),w=!1},d(b){b&&(v(e),v(m)),k(l),k(n),k(a),k(u),k(p,b)}}}function $l(r){let e,l;return e=new Zt({props:{class:"animate-spin"}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},p:me,i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function dl(r){let e,l;return e=new Dt({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function gl(r){let e,l;return e=new nn({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function _l(r){let e,l;return e=new rn({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function pl(r){let e,l;return e=new un({}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function hl(r){let e;return{c(){e=oe("Save")},l(l){e=se(l,"Save")},m(l,t){V(l,e,t)},d(l){l&&v(e)}}}function bl(r){let e,l,t,n,s,o=r[0]&&at(r);return l=new bt({props:{$$slots:{default:[hl]},$$scope:{ctx:r}}}),l.$on("click",function(){pt(r[4])&&r[4].apply(this,arguments)}),{c(){o&&o.c(),e=H(),S(l.$$.fragment)},l(i){o&&o.l(i),e=A(i),T(l.$$.fragment,i)},m(i,a){o&&o.m(i,a),V(i,e,a),I(l,i,a),t=!0,n||(s=Fe(window,"keyup",r[8]),n=!0)},p(i,[a]){r=i,r[0]?o?(o.p(r,a),a&1&&$(o,1)):(o=at(r),o.c(),$(o,1),o.m(e.parentNode,e)):o&&(Y(),_(o,1,1,()=>{o=null}),x());const f={};a&4096&&(f.$$scope={dirty:a,ctx:r}),l.$set(f)},i(i){t||($(o),$(l.$$.fragment,i),t=!0)},o(i){_(o),_(l.$$.fragment,i),t=!1},d(i){i&&v(e),o&&o.d(i),k(l,i),n=!1,s()}}}function vl(r,e,l){let t;X(r,ke,m=>l(7,t=m));let{currentItemId:n}=e,{isLoading:s}=e,{goToNeighborItem:o}=e,{handleReturnToPreviousPage:i}=e,{handleSave:a}=e,{navigateTo:f}=e,{getDatasetItemDisplayCount:u}=e;const c=async m=>{var w;const p=document.activeElement;if(p instanceof HTMLInputElement||p instanceof HTMLTextAreaElement||(p==null?void 0:p.getAttribute("contenteditable"))==="true"||((w=m.target)==null?void 0:w.tagName)==="INPUT"){m.preventDefault(),m.stopPropagation();return}return m.shiftKey&&m.key==="ArrowLeft"?await o("previous"):m.shiftKey&&m.key==="ArrowRight"&&await o("next"),m.key},d=()=>f("/"),h=()=>o("previous"),g=()=>o("next");return r.$$set=m=>{"currentItemId"in m&&l(0,n=m.currentItemId),"isLoading"in m&&l(1,s=m.isLoading),"goToNeighborItem"in m&&l(2,o=m.goToNeighborItem),"handleReturnToPreviousPage"in m&&l(3,i=m.handleReturnToPreviousPage),"handleSave"in m&&l(4,a=m.handleSave),"navigateTo"in m&&l(5,f=m.navigateTo),"getDatasetItemDisplayCount"in m&&l(6,u=m.getDatasetItemDisplayCount)},[n,s,o,i,a,f,u,t,c,d,h,g]}class wl extends G{constructor(e){super(),J(this,e,vl,bl,Z,{currentItemId:0,isLoading:1,goToNeighborItem:2,handleReturnToPreviousPage:3,handleSave:4,navigateTo:5,getDatasetItemDisplayCount:6})}}const kl=(r,e,l)=>{const t=r.findIndex(n=>n===l);if(t!==-1){const n=e==="previous"?t-1:t+1;return n===-1?r[r.length-1]:n===r.length?r[0]:r[n]}},Il=(r,e)=>{const l=r.findIndex(t=>t===e);return Math.floor(l/Vt)+1},it=[{name:"Dashboard",Icon:Dt},{name:"Dataset",Icon:gn}];function ft(r,e,l){const t=r.slice();return t[21]=e[l].name,t[22]=e[l].Icon,t}function Tl(r){let e,l,t,n=r[4]&&ct(r),s=pe(it),o=[];for(let a=0;a<s.length;a+=1)o[a]=ut(ft(r,s,a));const i=a=>_(o[a],1,1,()=>{o[a]=null});return{c(){n&&n.c(),e=H(),l=F("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){n&&n.l(a),e=A(a),l=R(a,"DIV",{class:!0});var f=K(l);for(let u=0;u<o.length;u+=1)o[u].l(f);f.forEach(v),this.h()},h(){E(l,"class","flex gap-4")},m(a,f){n&&n.m(a,f),V(a,e,f),V(a,l,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(l,null);t=!0},p(a,f){if(a[4]?n?(n.p(a,f),f&16&&$(n,1)):(n=ct(a),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(Y(),_(n,1,1,()=>{n=null}),x()),f&8209){s=pe(it);let u;for(u=0;u<s.length;u+=1){const c=ft(a,s,u);o[u]?(o[u].p(c,f),$(o[u],1)):(o[u]=ut(c),o[u].c(),$(o[u],1),o[u].m(l,null))}for(Y(),u=s.length;u<o.length;u+=1)i(u);x()}},i(a){if(!t){$(n);for(let f=0;f<s.length;f+=1)$(o[f]);t=!0}},o(a){_(n),o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)_(o[f]);t=!1},d(a){a&&(v(e),v(l)),n&&n.d(a),je(o,a)}}}function Sl(r){let e,l;return e=new wl({props:{currentItemId:r[1],isLoading:r[2],handleSave:r[9],goToNeighborItem:r[8],handleReturnToPreviousPage:r[12],navigateTo:r[13],getDatasetItemDisplayCount:r[7]}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},p(t,n){const s={};n&2&&(s.currentItemId=t[1]),n&4&&(s.isLoading=t[2]),e.$set(s)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ct(r){let e,l,t,n,s,o=r[4].name+"",i,a;return n=new y({props:{tooltipContent:"Back to Home",$$slots:{default:[Dl]},$$scope:{ctx:r}}}),n.$on("click",r[16]),{c(){e=F("div"),l=F("div"),t=F("div"),S(n.$$.fragment),s=H(),i=oe(o),this.h()},l(f){e=R(f,"DIV",{class:!0});var u=K(e);l=R(u,"DIV",{class:!0});var c=K(l);t=R(c,"DIV",{class:!0});var d=K(t);T(n.$$.fragment,d),d.forEach(v),s=A(c),i=se(c,o),c.forEach(v),u.forEach(v),this.h()},h(){E(t,"class","h-10 w-10"),E(l,"class","flex gap-4 items-center font-light"),E(e,"class","h-10 flex items-center font-semibold text-2xl")},m(f,u){V(f,e,u),C(e,l),C(l,t),I(n,t,null),C(l,s),C(l,i),a=!0},p(f,u){const c={};u&33554432&&(c.$$scope={dirty:u,ctx:f}),n.$set(c),(!a||u&16)&&o!==(o=f[4].name+"")&&ue(i,o)},i(f){a||($(n.$$.fragment,f),a=!0)},o(f){_(n.$$.fragment,f),a=!1},d(f){f&&v(e),k(n)}}}function Dl(r){let e,l;return{c(){e=F("img"),this.h()},l(t){e=R(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Nt(e.src,l=Bt)||E(e,"src",l),E(e,"alt","Logo Pixano"),E(e,"class","w-8 h-8 mx-2")},m(t,n){V(t,e,n)},p:me,d(t){t&&v(e)}}}function El(r){let e,l,t,n,s;return e=new r[22]({props:{strokeWidth:1}}),{c(){S(e.$$.fragment),l=H(),t=oe(r[21]),n=H()},l(o){T(e.$$.fragment,o),l=A(o),t=se(o,r[21]),n=A(o)},m(o,i){I(e,o,i),V(o,l,i),V(o,t,i),V(o,n,i),s=!0},p:me,i(o){s||($(e.$$.fragment,o),s=!0)},o(o){_(e.$$.fragment,o),s=!1},d(o){o&&(v(l),v(t),v(n)),k(e,o)}}}function ut(r){var n;let e,l;function t(){return r[17](r[21])}return e=new bt({props:{isSelected:(n=r[0])==null?void 0:n.includes(`/${r[21]}`.toLowerCase()),$$slots:{default:[El]},$$scope:{ctx:r}}}),e.$on("click",t),{c(){S(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){I(e,s,o),l=!0},p(s,o){var a;r=s;const i={};o&1&&(i.isSelected=(a=r[0])==null?void 0:a.includes(`/${r[21]}`.toLowerCase())),o&33554432&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(s){l||($(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function mt(r){let e,l;return e=new Ot({props:{message:"You have unsaved changes",confirm:"Save and continue",alternativeAction:"Continue without saving"}}),e.$on("confirm",r[10]),e.$on("alternative",r[11]),e.$on("cancel",r[18]),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},p:me,i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Nl(r){let e,l,t,n,s,o,i,a;const f=[Sl,Tl],u=[];function c(h,g){return h[5].route.id===h[6]?0:1}l=c(r),t=u[l]=f[l](r);let d=r[3]!=="none"&&mt(r);return{c(){e=F("header"),t.c(),n=H(),d&&d.c(),s=_e(),this.h()},l(h){e=R(h,"HEADER",{class:!0});var g=K(e);t.l(g),g.forEach(v),n=A(h),d&&d.l(h),s=_e(),this.h()},h(){E(e,"class","w-full fixed z-40 font-Montserrat h-20 p-5 flex justify-between items-center shrink-0 bg-white border-b border-slate-200 shadow-sm text-slate-800")},m(h,g){V(h,e,g),u[l].m(e,null),V(h,n,g),d&&d.m(h,g),V(h,s,g),o=!0,i||(a=Et(r[14].call(null,e)),i=!0)},p(h,[g]){let m=l;l=c(h),l===m?u[l].p(h,g):(Y(),_(u[m],1,1,()=>{u[m]=null}),x(),t=u[l],t?t.p(h,g):(t=u[l]=f[l](h),t.c()),$(t,1),t.m(e,null)),h[3]!=="none"?d?(d.p(h,g),g&8&&$(d,1)):(d=mt(h),d.c(),$(d,1),d.m(s.parentNode,s)):d&&(Y(),_(d,1,1,()=>{d=null}),x())},i(h){o||($(t),$(d),o=!0)},o(h){_(t),_(d),o=!1},d(h){h&&(v(e),v(n),v(s)),u[l].d(),d&&d.d(h),i=!1,a()}}}function Ml(r,e,l){let t,n;X(r,ke,D=>l(4,t=D)),X(r,Me,D=>l(5,n=D));let{pageId:s}=e,{datasetItemsIds:o}=e,i,a,f,u="none",c="none";const d="/[dataset]/dataset/[itemId]";Pe.subscribe(D=>f=D.canSave),At.subscribe(D=>{l(2,a=D)});const h=()=>`${o.indexOf(i)+1} of ${o.length}`,g=async D=>{const B=kl(o,D,i);if(B){const q=`/${t.id}/dataset/${B}`;if(f)return c=B,l(3,u=q);l(1,i=B),await Le(q)}},m=()=>{Pe.update(D=>({...D,shouldSave:!0}))},p=async()=>{m(),await w()},w=async()=>{c!=="none"&&(l(1,i=c),c="none"),await Le(u),l(3,u="none"),Pe.set({canSave:!1,shouldSave:!1})},b=async()=>{i?(Ae.update(D=>(D.currentPage=Il(o,i),D)),await N(`/${t.id}/dataset`)):await N("/")},N=async D=>{if(f)return l(3,u=D);await Le(D)};function z(D){function B(q){f&&q.preventDefault()}return window.addEventListener("beforeunload",B),{destroy(){window.removeEventListener("beforeunload",B)}}}const P=()=>N("/"),M=D=>N(`/${t.id}/${D.toLocaleLowerCase()}`),L=()=>l(3,u="none");return r.$$set=D=>{"pageId"in D&&l(0,s=D.pageId),"datasetItemsIds"in D&&l(15,o=D.datasetItemsIds)},Me.subscribe(D=>{l(1,i=D.params.itemId)}),[s,i,a,u,t,n,d,h,g,m,p,w,b,N,z,o,P,M,L]}class Cl extends G{constructor(e){super(),J(this,e,Ml,Nl,Z,{pageId:0,datasetItemsIds:15})}}const Pl=""+new URL("../assets/pixano_white.BVKPSmmP.png",import.meta.url).href;function $t(r){var be,Ke;let e,l,t=((be=r[0])==null?void 0:be.length)+"",n,s,o,i,a=((Ke=r[0])==null?void 0:Ke.length)>1?"s":"",f,u,c,d,h=r[0].reduce(dt,0)+"",g,m,p,w,b=r[0].reduce(gt,0)>1?"s":"",N,z,P,M,L,D,B,q,fe,$e,he;return{c(){e=F("div"),l=F("span"),n=oe(t),s=H(),o=F("span"),i=oe("dataset"),f=oe(a),u=H(),c=F("div"),d=F("span"),g=oe(h),m=H(),p=F("span"),w=oe("item"),N=oe(b),z=H(),P=F("div"),M=F("div"),L=F("div"),D=F("input"),B=H(),q=We("svg"),fe=We("path"),this.h()},l(W){e=R(W,"DIV",{class:!0});var Q=K(e);l=R(Q,"SPAN",{class:!0});var ve=K(l);n=se(ve,t),ve.forEach(v),s=A(Q),o=R(Q,"SPAN",{class:!0});var de=K(o);i=se(de,"dataset"),f=se(de,a),de.forEach(v),Q.forEach(v),u=A(W),c=R(W,"DIV",{class:!0});var Ie=K(c);d=R(Ie,"SPAN",{class:!0});var Ue=K(d);g=se(Ue,h),Ue.forEach(v),m=A(Ie),p=R(Ie,"SPAN",{class:!0});var Ce=K(p);w=se(Ce,"item"),N=se(Ce,b),Ce.forEach(v),Ie.forEach(v),z=A(W),P=R(W,"DIV",{class:!0});var Oe=K(P);M=R(Oe,"DIV",{class:!0});var ze=K(M);L=R(ze,"DIV",{class:!0});var Te=K(L);D=R(Te,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),B=A(Te),q=qe(Te,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,class:!0});var Be=K(q);fe=qe(Be,"path",{d:!0,fill:!0}),K(fe).forEach(v),Be.forEach(v),Te.forEach(v),ze.forEach(v),Oe.forEach(v),this.h()},h(){E(l,"class","mr-2 text-4xl font-medium"),E(o,"class","text-xl font-medium"),E(e,"class","my-4 mr-8 p-4 pr-8 border rounded-lg border-primary-foreground"),E(d,"class","mr-2 text-4xl font-medium"),E(p,"class","text-xl font-medium"),E(c,"class","my-4 mr-8 p-4 pr-8 border rounded-lg border-primary-foreground"),E(D,"id","search-input"),E(D,"type","text"),E(D,"placeholder","Search datasets"),E(D,"class","h-10 pl-10 pr-4 rounded border border-primary-foreground bg-primary-foreground text-white placeholder-white font-medium focus:outline-none"),E(fe,"d",Gt),E(fe,"fill","white"),E(q,"xmlns","http://www.w3.org/2000/svg"),E(q,"height","48"),E(q,"viewBox","0 -960 960 960"),E(q,"width","48"),E(q,"class","absolute left-3 h-5 w-5 pointer-events-none"),E(L,"class","h-20 relative flex items-center"),E(M,"class","flex items-center space-x-2"),E(P,"class","grow self-end flex flex-row justify-end items-end")},m(W,Q){V(W,e,Q),C(e,l),C(l,n),C(e,s),C(e,o),C(o,i),C(o,f),V(W,u,Q),V(W,c,Q),C(c,d),C(d,g),C(c,m),C(c,p),C(p,w),C(p,N),V(W,z,Q),V(W,P,Q),C(P,M),C(M,L),C(L,D),C(L,B),C(L,q),C(q,fe),$e||(he=Fe(D,"input",r[1]),$e=!0)},p(W,Q){var ve,de;Q&1&&t!==(t=((ve=W[0])==null?void 0:ve.length)+"")&&ue(n,t),Q&1&&a!==(a=((de=W[0])==null?void 0:de.length)>1?"s":"")&&ue(f,a),Q&1&&h!==(h=W[0].reduce(dt,0)+"")&&ue(g,h),Q&1&&b!==(b=W[0].reduce(gt,0)>1?"s":"")&&ue(N,b)},d(W){W&&(v(e),v(u),v(c),v(z),v(P)),$e=!1,he()}}}function Ll(r){let e,l,t=`<img src="${Pl}" alt="Logo Pixano" class="w-7 h-7"/> <span class="text-2xl font-semibold text-slate-50 uppercase">Pixano</span>`,n,s,o=r[0]&&$t(r);return{c(){e=F("header"),l=F("div"),l.innerHTML=t,n=H(),s=F("div"),o&&o.c(),this.h()},l(i){e=R(i,"HEADER",{class:!0});var a=K(e);l=R(a,"DIV",{class:!0,"data-svelte-h":!0}),Mt(l)!=="svelte-1gjs2pg"&&(l.innerHTML=t),n=A(a),s=R(a,"DIV",{class:!0});var f=K(s);o&&o.l(f),f.forEach(v),a.forEach(v),this.h()},h(){E(l,"class","flex gap-4 items-center"),E(s,"class","flex pt-4 h-36 w-full items-center flex-wrap text-slate-50"),E(e,"class","p-4 w-full h-fit pt-8 px-20 xl:px-60 flex flex-col justify-evenly bg-primary font-Montserrat z-10")},m(i,a){V(i,e,a),C(e,l),C(e,n),C(e,s),o&&o.m(s,null)},p(i,[a]){i[0]?o?o.p(i,a):(o=$t(i),o.c(),o.m(s,null)):o&&(o.d(1),o=null)},i:me,o:me,d(i){i&&v(e),o&&o.d()}}}const dt=(r,e)=>r+e.num_items,gt=(r,e)=>r+e.num_items;function Vl(r,e,l){let{datasets:t}=e;const n=s=>{const o=s.currentTarget;He.update((i=[])=>i.map(a=>({...a,isFiltered:!a.name.toLocaleLowerCase().includes(o.value.toLocaleLowerCase())})))};return r.$$set=s=>{"datasets"in s&&l(0,t=s.datasets)},[t,n]}class Al extends G{constructor(e){super(),J(this,e,Vl,Ll,Z,{datasets:0})}}function Hl(r){let e,l;return e=new Cl({props:{pageId:r[2].route.id,datasetItemsIds:r[1]}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},p(t,n){const s={};n&4&&(s.pageId=t[2].route.id),n&2&&(s.datasetItemsIds=t[1]),e.$set(s)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Rl(r){let e,l;return e=new Al({props:{datasets:r[0]}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,n){I(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.datasets=t[0]),e.$set(s)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Fl(r){let e,l,t,n,s,o,i,a,f,u;const c=[Rl,Hl],d=[];function h(p,w){return p[2].route.id===Ve?0:1}s=h(r),o=d[s]=c[s](r);const g=r[6].default,m=ee(g,r,r[5],null);return{c(){e=F("link"),l=F("meta"),t=H(),n=F("div"),o.c(),i=H(),a=F("main"),m&&m.c(),this.h()},l(p){const w=Ct("svelte-8x3pw",document.head);e=R(w,"LINK",{rel:!0,type:!0,href:!0}),l=R(w,"META",{name:!0,content:!0}),w.forEach(v),t=A(p),n=R(p,"DIV",{class:!0});var b=K(n);o.l(b),i=A(b),a=R(b,"MAIN",{class:!0});var N=K(a);m&&m.l(N),N.forEach(v),b.forEach(v),this.h()},h(){E(e,"rel","icon"),E(e,"type","image/svg"),E(e,"href",Bn),document.title="Pixano",E(l,"name","description"),E(l,"content","Pixano app"),E(a,"class",f=ce("bg-slate-50 flex flex-col h-screen",r[2].route.id!==Ve&&"pt-20")),E(n,"class","app")},m(p,w){C(document.head,e),C(document.head,l),V(p,t,w),V(p,n,w),d[s].m(n,null),C(n,i),C(n,a),m&&m.m(a,null),u=!0},p(p,[w]){let b=s;s=h(p),s===b?d[s].p(p,w):(Y(),_(d[b],1,1,()=>{d[b]=null}),x(),o=d[s],o?o.p(p,w):(o=d[s]=c[s](p),o.c()),$(o,1),o.m(n,i)),m&&m.p&&(!u||w&32)&&te(m,g,p,p[5],u?le(g,p[5],w,null):ne(p[5]),null),(!u||w&4&&f!==(f=ce("bg-slate-50 flex flex-col h-screen",p[2].route.id!==Ve&&"pt-20")))&&E(a,"class",f)},i(p){u||($(o),$(m,p),u=!0)},o(p){_(o),_(m,p),u=!1},d(p){p&&(v(t),v(n)),v(e),v(l),d[s].d(),m&&m.d(p)}}}const Ve="/";function jl(r,e,l){let t,n,s;X(r,He,c=>l(0,t=c)),X(r,ke,c=>l(4,n=c)),X(r,Me,c=>l(2,s=c));let{$$slots:o={},$$scope:i}=e,a,f;_t(()=>{Yt().then(c=>Ze.set(c)).catch(()=>Ze.set([])),Xt().then(c=>{He.set(c)}).catch(c=>{console.error(c)})}),Ae.subscribe(async c=>{c.where!=null&&(l(1,f=await Ye(a,c.where)),Ge.set(f.length))});const u=async c=>{c!==void 0&&(l(1,f=await Ye(c)),Ge.set(f.length))};return r.$$set=c=>{"$$scope"in c&&l(5,i=c.$$scope)},r.$$.update=()=>{r.$$.dirty&25&&Me.subscribe(c=>{if(l(3,a=c.params.dataset),a&&n==null){const d=t==null?void 0:t.find(h=>h.id===a);d&&ke.set(d)}}),r.$$.dirty&8&&u(a)},ke.subscribe(c=>{c&&Ae.set(Ht)}),[t,f,s,a,n,i,o]}class Xl extends G{constructor(e){super(),J(this,e,jl,Fl,Z,{})}}export{Xl as component,Ql as universal};
