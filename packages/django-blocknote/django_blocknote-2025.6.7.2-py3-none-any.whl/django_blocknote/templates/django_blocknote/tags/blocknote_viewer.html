<!-- django_blocknote/templates/django_blocknote/tags/blocknote_viewer.html -->
{% if has_content %}
    <div id="django-blocknote-wrapper"
         class="{{ css_class }}"
         style="border: 1px solid #e5e7eb;
                border-radius: 8px;
                padding: 16px;
                background: #ffffff;
                min-height: 100px">
        <!-- Hidden textarea (required for widget structure) -->
        <textarea name="{{ container_id }}"
                  id="{{ container_id }}"
                  style="display: none"
                  data-readonly="true">{{ content_json|safe }}
       </textarea>
        <!-- Editor container that matches the scanner expectations -->
        <div class="blocknote-loading"
             id="{{ container_id }}_editor"
             data-editor-id="{{ container_id }}"
             data-readonly="true"
             data-blocknote-config="{}"
             data-blocknote-content="{{ content_json|escape }}">
            <div style="display: flex;
                        align-items: center;
                        justify-content: center;
                        min-height: 60px">
                <div style="text-align: center;">
                    <div style="margin-bottom: 8px; font-size: 14px;">📖 Loading content...</div>
                    <div style="font-size: 12px; color: #6b7280;">Rendering rich text content</div>
                </div>
            </div>
        </div>
    </div>
{% else %}
    <div class="{{ css_class }}"
         style="text-align: center;
                color: #9ca3af;
                font-style: italic;
                padding: 40px 20px;
                background: #f9fafb;
                border: 1px dashed #d1d5db;
                border-radius: 8px">
        <div style="font-size: 2em; margin-bottom: 10px;">📝</div>
        <div>No content to display</div>
    </div>
{% endif %}
<!-- Configuration scripts -->
<script type="application/json" id="{{ container_id }}_content">{{ content_json|safe }}</script>
<script type="application/json" id="{{ container_id }}_editor_config">{{ editor_config|safe }}</script>
<script type="application/json" id="{{ container_id }}_image_upload_config">{{ image_upload_config|safe }}</script>
<script type="application/json" id="{{ container_id }}_image_removal_config">{{ image_removal_config|safe }}</script>
<script type="application/json" id="{{ container_id }}_slash_menu_config">{{ slash_menu_config }}</script>
