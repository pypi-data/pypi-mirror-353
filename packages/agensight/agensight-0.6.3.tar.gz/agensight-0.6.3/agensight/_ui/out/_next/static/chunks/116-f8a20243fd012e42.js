"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[116],{5057:(e,t,a)=>{a.d(t,{J:()=>i});var s=a(5155);a(2115);var n=a(968),r=a(9434);function i(e){let{className:t,...a}=e;return(0,s.jsx)(n.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},7313:(e,t,a)=>{a.d(t,{Xi:()=>o,av:()=>c,j7:()=>l,tU:()=>i});var s=a(5155);a(2115);var n=a(64),r=a(9434);function i(e){let{className:t,...a}=e;return(0,s.jsx)(n.bL,{"data-slot":"tabs",className:(0,r.cn)("flex flex-col gap-2",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)(n.B8,{"data-slot":"tabs-list",className:(0,r.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)(n.l9,{"data-slot":"tabs-trigger",className:(0,r.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 cursor-pointer disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)(n.UC,{"data-slot":"tabs-content",className:(0,r.cn)("flex-1 outline-none",t),...a})}},7652:(e,t,a)=>{a.d(t,{Dq:()=>l,Np:()=>o,_K:()=>i,_k:()=>c,j:()=>d,um:()=>n,zi:()=>r});let s="http://0.0.0.0:5001/api";async function n(e){for(let t=1;t<=3;t++)try{let t=await fetch("".concat(s,"/traces/").concat(e,"/spans"));if(!t.ok){let e=await t.text();throw console.error("Error fetching trace: ".concat(t.status," ").concat(t.statusText),e),Error("Error fetching trace: ".concat(t.statusText))}return await t.json()}catch(a){if(console.error("Failed to fetch trace with ID ".concat(e," (attempt ").concat(t,"/").concat(3,"):"),a),3===t)throw a;await new Promise(e=>setTimeout(e,500*Math.pow(2,t-1)))}}async function r(e){for(let t=1;t<=3;t++)try{let t=await fetch("".concat(s,"/span/").concat(e,"/details"));if(!t.ok){let e=await t.text();throw console.error("Error fetching span details: ".concat(t.status," ").concat(t.statusText),e),Error("Error fetching span details: ".concat(t.statusText))}return await t.json()}catch(a){if(console.error("Failed to fetch span details with ID ".concat(e," (attempt ").concat(t,"/").concat(3,"):"),a),3===t)throw a;await new Promise(e=>setTimeout(e,500*Math.pow(2,t-1)))}throw Error("Failed to fetch span details")}async function i(){try{let e=await fetch("".concat(s,"/traces"));if(!e.ok)throw Error("Error fetching traces");return await e.json()}catch(e){throw console.log("Failed to fetch all traces:",e),e}}async function l(){try{let e=await fetch("".concat(s,"/sessions"));if(!e.ok)throw Error("Error fetching sessions: ".concat(e.statusText));return await e.json()}catch(e){throw console.error("Failed to fetch sessions:",e),e}}async function o(e){try{let t=await fetch("".concat(s,"/sessions/").concat(e,"/traces"));if(!t.ok)throw Error("Error fetching traces: ".concat(t.statusText));return await t.json()}catch(e){throw console.error("Failed to fetch traces:",e),e}}async function c(e){try{let t=await fetch("".concat(s,"/traces/").concat(e,"/spans"));if(!t.ok)throw Error("Error fetching spans: ".concat(t.statusText));return await t.json()}catch(e){throw console.error("Failed to fetch spans:",e),e}}async function d(e){try{let t=await fetch("".concat(s,"/span/").concat(e,"/details"));if(!t.ok)throw Error("Error fetching spans: ".concat(t.statusText));return await t.json()}catch(e){throw console.error("Failed to fetch spans:",e),e}}},9409:(e,t,a)=>{a.d(t,{bq:()=>u,eb:()=>x,gC:()=>g,l6:()=>c,yv:()=>d});var s=a(5155);a(2115);var n=a(1992),r=a(6474),i=a(5196),l=a(7863),o=a(9434);function c(e){let{...t}=e;return(0,s.jsx)(n.bL,{"data-slot":"select",...t})}function d(e){let{...t}=e;return(0,s.jsx)(n.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:a="default",children:i,...l}=e;return(0,s.jsxs)(n.l9,{"data-slot":"select-trigger","data-size":a,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[i,(0,s.jsx)(n.In,{asChild:!0,children:(0,s.jsx)(r.A,{className:"size-4 opacity-50"})})]})}function g(e){let{className:t,children:a,position:r="popper",...i}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsxs)(n.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...i,children:[(0,s.jsx)(h,{}),(0,s.jsx)(n.LM,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(m,{})]})})}function x(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(n.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(i.A,{className:"size-4"})})}),(0,s.jsx)(n.p4,{children:a})]})}function h(e){let{className:t,...a}=e;return(0,s.jsx)(n.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(l.A,{className:"size-4"})})}function m(e){let{className:t,...a}=e;return(0,s.jsx)(n.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(r.A,{className:"size-4"})})}},9545:(e,t,a)=>{a.d(t,{D:()=>y});var s=a(5155),n=a(2115),r=a(5143),i=a(402),l=a(6268),o=a(8266),c=a(4392),d=a(2957),u=a(9318),g=a(7029),x=a(5695),h=a(9434),m=a(1032),f=a(5594);f.z.object({id:f.z.number(),ended_at:f.z.any(),name:f.z.string(),session_id:f.z.string(),started_at:f.z.any(),trace_input:f.z.string(),trace_output:f.z.string(),metadata:f.z.any(),total_tokens:f.z.number(),duration:f.z.any()});var p=a(285),b=a(5057),w=a(9409),v=a(7313);let j=[{accessorKey:"id",header:"Id",cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"w-full text-base overflow-hidden text-ellipsis",children:(0,s.jsx)("div",{className:"truncate max-w-[150px]",title:t.original.id.toString(),children:t.original.id})})},size:180},{accessorKey:"created_at",header:"Created At",cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"w-full text-base overflow-hidden text-ellipsis",children:(0,s.jsx)("div",{className:"truncate",children:new Date(1e3*t.original.started_at).toLocaleString()})})},size:200},{accessorKey:"name",header:"Name",cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"w-full text-base overflow-hidden text-ellipsis",children:(0,s.jsx)("div",{className:"truncate",children:t.original.name})})},size:200},{accessorKey:"latency",header:"Latency",cell:e=>{let{row:t}=e,a=Number(t.original.ended_at)-Number(t.original.started_at);return(0,s.jsx)("div",{className:"w-full text-base overflow-hidden text-ellipsis",children:(0,s.jsxs)("div",{className:"truncate",children:[a.toFixed(2),"s"]})})},size:120},{accessorKey:"tokens",header:"Total Tokens",cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"w-full text-base overflow-hidden text-ellipsis",children:(0,s.jsx)("div",{className:"truncate",children:t.original.total_tokens})})},size:120},{accessorKey:"metadata",header:"Metadata",cell:e=>{let{row:t}=e;try{let e=JSON.parse(t.original.metadata),a=["status","priority","user_id"],n=Object.keys(e).filter(e=>a.includes(e)).slice(0,3);if(0===n.length)return(0,s.jsx)("div",{className:"w-full text-sm text-muted-foreground overflow-hidden text-ellipsis px-2",children:"No metadata"});return(0,s.jsx)("div",{className:"w-full text-sm overflow-hidden px-2",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:n.map(t=>(0,s.jsxs)("div",{className:"text-xs bg-muted px-2 py-1 rounded",children:[t,": ",String(e[t])]},t))})})}catch(e){return(0,s.jsx)("div",{className:"w-full text-sm text-muted-foreground overflow-hidden text-ellipsis px-2",children:"Invalid metadata"})}},size:220}];function N(e){let{row:t,onRowClick:a}=e,{transform:n,transition:r,setNodeRef:c,isDragging:d}=(0,i.gl)({id:t.original.id}),u=Number(t.original.ended_at)-Number(t.original.started_at);return(0,s.jsx)("tr",{"data-state":t.getIsSelected()&&"selected","data-dragging":d,ref:c,className:(0,h.cn)("relative z-0 data-[dragging=true]:z-10 data-[dragging=true]:opacity-80","hover:bg-primary/5 even:bg-muted/30 transition-colors cursor-pointer",d&&"shadow-lg scale-[1.01] ring-2 ring-primary rounded-xl"),style:{transform:o.Ks.Transform.toString(n),transition:r},onClick:()=>{var e;a(t.original.id,t.original.name,u.toFixed(2).toString(),null==(e=t.original.total_tokens)?void 0:e.toString())},tabIndex:0,children:t.getVisibleCells().map((e,t)=>(0,s.jsx)("td",{className:(0,h.cn)("px-4 py-3 align-middle whitespace-nowrap overflow-hidden text-base border-b focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",0===t&&"sticky left-0 z-10 bg-background"),style:{width:150!==e.column.getSize()?"".concat(e.column.getSize(),"px"):void 0},children:(0,l.Kv)(e.column.columnDef.cell,e.getContext())},e.id))})}function y(e){var t;let{data:a}=e,[o,f]=(0,n.useState)(()=>a),{table:y}=function(e){let{data:t,columns:a}=e,[s,r]=(0,n.useState)({}),[i,o]=(0,n.useState)({}),[c,d]=(0,n.useState)([]),[u,g]=(0,n.useState)([]),[x,h]=(0,n.useState)({pageIndex:0,pageSize:10}),f=(0,n.useMemo)(()=>(null==t?void 0:t.map(e=>{let{id:t}=e;return t}))||[],[t]);return{table:(0,l.N4)({data:t,columns:a,state:{sorting:u,columnVisibility:i,rowSelection:s,columnFilters:c,pagination:x},getRowId:e=>e.id.toString(),enableRowSelection:!0,onRowSelectionChange:r,onSortingChange:g,onColumnFiltersChange:d,onColumnVisibilityChange:o,onPaginationChange:h,getCoreRowModel:(0,m.HT)(),getFilteredRowModel:(0,m.hM)(),getPaginationRowModel:(0,m.kW)(),getSortedRowModel:(0,m.h5)(),getFacetedRowModel:(0,m.kQ)(),getFacetedUniqueValues:(0,m.oS)()}),dataIds:f,rowSelection:s,columnVisibility:i,columnFilters:c,sorting:u,pagination:x}}({data:o,columns:j});n.useEffect(()=>{y.setPageSize(10)},[y]),n.useId(),(0,r.FR)((0,r.MS)(r.cA,{}),(0,r.MS)(r.IG,{}),(0,r.MS)(r.uN,{}));let z=(0,x.useRouter)(),S=(e,t,a,s)=>{sessionStorage.setItem("tracesTableScrollPosition",window.scrollY.toString()),sessionStorage.setItem("tracesTableState",JSON.stringify({pagination:y.getState().pagination,sorting:y.getState().sorting,columnFilters:y.getState().columnFilters})),z.push("/trace?id=".concat(e,"&name=").concat(t,"&latency=").concat(a,"&total_tokens=").concat(s),{scroll:!1})};return n.useEffect(()=>{let e=sessionStorage.getItem("tracesTableState");if(e)try{let{pagination:t,sorting:a,columnFilters:s}=JSON.parse(e);t&&y.setPagination(t),a&&y.setSorting(a),s&&y.setColumnFilters(s)}catch(e){console.error("Error restoring table state:",e)}let t=sessionStorage.getItem("tracesTableScrollPosition");t&&window.scrollTo(0,parseInt(t))},[y]),(0,s.jsx)(v.tU,{defaultValue:"outline",className:"w-full h-full flex flex-col",children:(0,s.jsxs)(v.av,{value:"outline",className:"relative flex flex-col h-full",children:[(0,s.jsx)("div",{className:"flex flex-col w-full h-full",children:(0,s.jsx)("div",{className:"w-full flex-1 overflow-hidden flex flex-col",children:(0,s.jsx)("div",{className:"w-full flex-1 overflow-auto",children:(0,s.jsx)("div",{className:"inline-block min-w-full",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"sticky top-0 z-10 bg-muted border-b",children:(0,s.jsx)("table",{className:"min-w-full table-fixed border-separate border-spacing-0",children:(0,s.jsx)("thead",{children:y.getHeaderGroups().map(e=>(0,s.jsx)("tr",{children:e.headers.map((e,t)=>(0,s.jsx)("th",{scope:"col",className:(0,h.cn)("text-base font-semibold px-4 py-3 text-left whitespace-nowrap border-b bg-muted/60",0===t&&"sticky left-0 z-20 bg-muted"),style:{width:150!==e.getSize()?"".concat(e.getSize(),"px"):void 0},tabIndex:0,children:e.isPlaceholder?null:(0,l.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))})})}),(0,s.jsx)("table",{className:"min-w-full table-fixed border-separate border-spacing-0",children:(0,s.jsx)("tbody",{className:"bg-background",children:(null==(t=y.getRowModel().rows)?void 0:t.length)?(0,s.jsx)(i.gB,{items:o.map(e=>e.id),strategy:i._G,children:y.getRowModel().rows.map(e=>(0,s.jsx)(N,{row:e,onRowClick:S},e.id))}):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:y.getAllColumns().length,className:"h-24 text-center border-b text-muted-foreground",children:(0,s.jsx)("span",{className:"inline-flex items-center gap-2",children:"No results found."})})})})})]})})})})}),(0,s.jsx)("div",{className:"bg-background py-2 px-4 flex-shrink-0 sticky bottom-0 z-10 shadow-[0_-2px_10px_rgba(0,0,0,0.1)] dark:shadow-[0_-2px_10px_rgba(0,0,0,0.25)]",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-8 ml-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(b.J,{htmlFor:"rows-per-page",className:"text-base font-medium",children:"Rows per page"}),(0,s.jsxs)(w.l6,{value:"".concat(y.getState().pagination.pageSize),onValueChange:e=>{y.setPageSize(Number(e))},children:[(0,s.jsx)(w.bq,{size:"sm",className:"w-20 text-base",id:"rows-per-page",children:(0,s.jsx)(w.yv,{placeholder:y.getState().pagination.pageSize})}),(0,s.jsx)(w.gC,{side:"top",children:[10,20,30,40,50].map(e=>(0,s.jsx)(w.eb,{value:"".concat(e),className:"text-base",children:e},e))})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center text-base font-medium",children:["Page ",y.getState().pagination.pageIndex+1," of"," ",y.getPageCount()]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(p.$,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>y.setPageIndex(0),disabled:!y.getCanPreviousPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,s.jsx)(c.A,{className:"h-4 w-4"})]}),(0,s.jsxs)(p.$,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>y.previousPage(),disabled:!y.getCanPreviousPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,s.jsx)(d.A,{className:"h-4 w-4"})]}),(0,s.jsxs)(p.$,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>y.nextPage(),disabled:!y.getCanNextPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,s.jsx)(u.A,{className:"h-4 w-4"})]}),(0,s.jsxs)(p.$,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>y.setPageIndex(y.getPageCount()-1),disabled:!y.getCanNextPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,s.jsx)(g.A,{className:"h-4 w-4"})]})]})]})})})]})})}}}]);