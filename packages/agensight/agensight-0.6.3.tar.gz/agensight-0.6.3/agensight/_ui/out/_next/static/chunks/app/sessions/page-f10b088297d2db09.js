(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[898],{285:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var a=s(5155);s(2115);var l=s(9708),n=s(2085),r=s(9434);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all cursor-pointer disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:s,size:n,asChild:o=!1,...c}=e,d=o?l.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,r.cn)(i({variant:s,size:n,className:t})),...c})}},3610:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var a=s(5155),l=s(7652),n=s(2960),r=s(2115),i=s(6268),o=s(1032);function c(e){let{columns:t,data:s,onRowClick:l,className:n="",page:r,pageSize:c,onPaginationChange:d}=e,x=Array.isArray(s)?s:[],h="number"==typeof r&&"number"==typeof c?x.slice(r*c,(r+1)*c):x,u=(0,i.N4)({data:h,columns:t,getCoreRowModel:(0,o.HT)()});return(0,a.jsx)("div",{className:"overflow-x-auto ".concat(n),children:(0,a.jsxs)("table",{className:"min-w-full bg-background border border-muted dark:border-gray-700 rounded-lg",children:[(0,a.jsx)("thead",{children:u.getHeaderGroups().map(e=>(0,a.jsx)("tr",{className:"bg-muted dark:bg-muted/60",children:e.headers.map(e=>(0,a.jsx)("th",{className:"px-4 py-2 text-left text-gray-700 dark:text-gray-200",children:e.isPlaceholder?null:(0,i.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)("tbody",{children:u.getRowModel().rows.length?u.getRowModel().rows.map(e=>(0,a.jsx)("tr",{className:"border-t border-muted dark:border-gray-700 hover:bg-primary/5 even:bg-muted/30 cursor-pointer",onClick:()=>null==l?void 0:l(e.original),children:e.getVisibleCells().map(e=>(0,a.jsx)("td",{className:"px-4 py-2 text-gray-900 dark:text-gray-100",children:(0,i.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:u.getAllLeafColumns().length,className:"px-4 py-6 text-center text-gray-400 dark:text-gray-500",children:"No data found."})})})]})})}var d=s(5695),x=s(6102),h=s(7187),u=s(8382),m=s(7313),p=s(8856),f=s(9946);let g=(0,f.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),v=(0,f.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var b=s(4186);let j=(0,f.A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),y=(0,f.A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),N=(0,f.A)("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),w=(0,f.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),k=(0,f.A)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var C=s(6474);let _=(0,f.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),M=e=>{let{traces:t,selectedTraceId:s,selectedSpanId:l,onSelectTrace:n,onSelectSpan:i}=e,[o,c]=(0,r.useState)({}),d=(0,r.useRef)(null),[h,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[f,g]=(0,r.useState)({scrollLeft:0,clientWidth:0,scrollWidth:1});(0,r.useEffect)(()=>{let e=()=>{let e=d.current;if(!e)return;let{scrollLeft:t,scrollWidth:s,clientWidth:a}=e;g({scrollLeft:t,scrollWidth:s,clientWidth:a});let l=s>a+2;u(l),p(l)};e();let t=d.current;return t&&t.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{t&&t.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]);let v=(0,r.useMemo)(()=>[...t].sort((e,t)=>(e.started_at||Math.min(...e.spans.length?e.spans.map(e=>e.start_time):[0]))-(t.started_at||Math.min(...t.spans.length?t.spans.map(e=>e.start_time):[0]))),[t]),b=(0,r.useMemo)(()=>v.flatMap(e=>e.spans),[v]);if((0,r.useEffect)(()=>{t.length>0&&c(t.reduce((e,t)=>(e[t.id]=!0,e),{}))},[t]),0===b.length)return(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-zinc-400",children:"No timeline data available"});let j=Math.min(...b.map(e=>e.start_time)),y=Math.max(...b.map(e=>e.end_time)),N=y-j||1,w=e=>new Date(1e3*e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),k=e=>{if(e<1)return"".concat(Math.round(1e3*e),"ms");if(e<60)return"".concat(e.toFixed(2),"s");let t=Math.floor(e/60),s=Math.round(e%60);return"".concat(t,"m ").concat(s,"s")},M=e=>{switch(null==e?void 0:e.toLowerCase()){case"agent":return"#3b82f6";case"llm":return"#38bdf8";case"tool":return"#facc15";case"task":case"operation":return"#4ade80";case"error":return"#ef4444";case"session":return"#ffffff";default:return"#a78bfa"}},S=e=>{switch(null==e?void 0:e.toLowerCase()){case"agent":return"rgba(59, 130, 246, 0.2)";case"llm":return"rgba(56, 189, 248, 0.2)";case"tool":return"rgba(250, 204, 21, 0.2)";case"task":case"operation":return"rgba(74, 222, 128, 0.2)";case"error":return"rgba(239, 68, 68, 0.2)";case"session":return"rgba(255, 255, 255, 0.2)";default:return"rgba(167, 139, 250, 0.2)"}},L=e=>{c(t=>({...t,[e]:!t[e]}))};return(0,a.jsxs)("div",{className:"w-full h-full flex flex-col bg-slate-950 text-white overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex gap-4 px-4 py-2 border-b border-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:M("agent")}}),(0,a.jsx)("span",{className:"text-xs",children:"Agent"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:M("llm")}}),(0,a.jsx)("span",{className:"text-xs",children:"Llm"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:M("tool")}}),(0,a.jsx)("span",{className:"text-xs",children:"Tool"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:M("task")}}),(0,a.jsx)("span",{className:"text-xs",children:"Task"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:M("session")}}),(0,a.jsx)("span",{className:"text-xs",children:"Session"})]})]}),(0,a.jsxs)("div",{className:"px-4 py-2",children:[(0,a.jsx)("div",{className:"flex items-center mb-1",children:(0,a.jsxs)("span",{className:"text-xs font-medium",children:["session: ",k(N)]})}),(0,a.jsxs)("div",{className:"relative h-8 w-full rounded border border-slate-700 bg-slate-900 mb-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 rounded",style:{backgroundColor:S("session"),borderLeft:"2px solid ".concat(M("session"))}}),f.scrollWidth>f.clientWidth&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"pointer-events-none absolute left-0 top-0 h-full w-6 z-20",style:{background:"linear-gradient(to right, rgba(16,23,42,0.18) 60%, transparent 100%)"}}),(0,a.jsx)("div",{className:"pointer-events-none absolute right-0 top-0 h-full w-6 z-20",style:{background:"linear-gradient(to left, rgba(16,23,42,0.18) 60%, transparent 100%)"}}),(0,a.jsxs)("div",{className:"absolute top-0 bottom-0 border border-white/60 rounded-[8px] z-30 shadow-xl flex items-center justify-between px-1 transition-all duration-200 backdrop-blur-sm",style:{left:"".concat(f.scrollLeft/f.scrollWidth*100,"%"),width:"".concat(f.clientWidth/f.scrollWidth*100,"%"),minWidth:28,background:"rgba(255,255,255,0.22)",borderColor:"rgba(255,255,255,0.38)",pointerEvents:"none",userSelect:"none"},children:[(0,a.jsx)("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",className:"opacity-50",children:(0,a.jsx)("path",{d:"M7 2L3 7L7 12",stroke:"#38bdf8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,a.jsx)("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",className:"opacity-50",children:(0,a.jsx)("path",{d:"M3 2L7 7L3 12",stroke:"#38bdf8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})]}),(0,a.jsx)("div",{className:"gantt-chart-scroll w-full overflow-x-auto relative",ref:d,children:(0,a.jsxs)("div",{className:"gantt-chart-content min-w-full",style:{minWidth:"1100px",position:"relative"},children:[m&&(0,a.jsx)("div",{className:"pointer-events-none absolute top-0 right-0 h-full w-10 z-20",style:{background:"linear-gradient(to left, rgba(16,23,42,0.35) 55%, transparent 100%)"}}),(0,a.jsxs)("div",{className:"relative h-full min-h-[500px]",children:[(()=>{let e=[],t=y-j;for(let s=0;s<=5;s++){let l=s/5,n=j+t*l;e.push((0,a.jsx)("div",{className:"absolute top-0 bottom-0 border-l border-slate-700 border-dashed",style:{left:"".concat(100*l,"%")},children:(0,a.jsx)("div",{className:"text-xs text-slate-500 absolute -top-6 -translate-x-1/2",children:w(n)})},s))}return e})(),(0,a.jsx)("div",{className:"relative z-10",children:v.map((e,t)=>{var r;if(!(null==(r=e.spans)?void 0:r.length))return null;let c=Math.min(...e.spans.map(e=>e.start_time)),d=Math.max(...e.spans.map(e=>e.end_time)),h=o[e.id]||!1,u=e.id===s,m=(c-j)/N*100,p=(d-c)/N*100,f=e.name||"Trace ".concat(t+1);return(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2 cursor-pointer ".concat(u?"text-white":"text-slate-300"),onClick:()=>n(e.id),onDoubleClick:()=>L(e.id),children:[(0,a.jsx)("button",{className:"mr-2 text-slate-400 hover:text-white",onClick:t=>{t.stopPropagation(),L(e.id)},children:h?(0,a.jsx)(C.A,{className:"h-4 w-4"}):(0,a.jsx)(_,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"text-xs font-medium",children:f})]}),(0,a.jsxs)("div",{className:"relative w-full mb-2",style:{height:h?"calc(40px + ".concat(28*Math.max(e.spans.length,1),"px)"):"40px"},children:[(0,a.jsx)("div",{className:"absolute h-8 rounded gantt-span-box ".concat(u?"ring-1 ring-white":""),style:{left:"".concat(m,"%"),width:"".concat(Math.max(p,.5),"%"),minWidth:"100px",backgroundColor:S("agent"),borderLeft:"2px solid ".concat(M("agent")),top:0},onClick:()=>n(e.id),onDoubleClick:()=>L(e.id),children:p>5&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center px-2 cursor-pointer",children:(0,a.jsxs)("span",{className:"text-xs text-white truncate",children:[f,": ",k(e.spans.length>0?e.spans[e.spans.length-1].end_time-e.spans[0].start_time:0)]})})}),h&&(0,a.jsx)("div",{className:"flex flex-col gap-1 mb-2",style:{position:"absolute",left:"".concat(m,"%"),width:"".concat(Math.max(p,.5),"%"),minWidth:"100px",top:"40px"},children:e.spans.map(t=>{let s=Math.min(...e.spans.map(e=>e.start_time)),n=Math.max(...e.spans.map(e=>e.end_time))-s||1,r=(t.start_time-s)/n*100,o=(t.end_time-t.start_time)/n*100,c=t.span_id===l;return(0,a.jsx)(x.Bc,{delayDuration:0,children:(0,a.jsxs)(x.m_,{children:[(0,a.jsx)(x.k$,{asChild:!0,children:(0,a.jsx)("div",{className:"relative h-6 rounded cursor-pointer gantt-span-box ".concat(c?"ring-1 ring-white":""),style:{marginLeft:"".concat(r,"%"),width:"".concat(Math.max(o,.5),"%"),minWidth:"36px",backgroundColor:S(t.type),borderLeft:"2px solid ".concat(M(t.type))},onClick:()=>i(t.span_id,e.id),children:(0,a.jsx)("div",{className:"flex items-center h-full px-2",children:(0,a.jsx)("span",{className:"text-xs text-white truncate",children:t.name})})})}),(0,a.jsxs)(x.ZI,{side:"right",align:"center",className:"bg-slate-900 text-white border border-slate-700 shadow-lg",children:[(0,a.jsx)("div",{className:"font-medium",children:t.name}),(0,a.jsxs)("div",{className:"text-slate-300",children:["Type: ",t.type||"Unknown"]}),(0,a.jsxs)("div",{className:"text-slate-300",children:["Duration: ",k(t.end_time-t.start_time)]})]})]})},t.span_id)})})]})]},e.id)})})]})]})}),(0,a.jsxs)("div",{className:"px-4 py-2 border-t border-slate-800 flex justify-between text-xs text-slate-400",children:[(0,a.jsx)("span",{children:w(j)}),(0,a.jsx)("span",{children:k(N)}),(0,a.jsx)("span",{children:w(y)})]})]})};var S=s(9434),L=(0,s(6467).A)("outline","brand-openai","IconBrandOpenai",[["path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35",key:"svg-0"}],["path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946",key:"svg-1"}],["path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348",key:"svg-2"}],["path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45",key:"svg-3"}],["path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946",key:"svg-4"}],["path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42",key:"svg-5"}]]),A=s(285);function E(e){let{icon:t,label:s,value:l}=e;return(0,a.jsxs)("div",{className:"flex items-center px-4 py-3",children:[(0,a.jsx)("span",{className:"text-slate-400 mr-2",children:t}),(0,a.jsx)("span",{className:"mr-2",children:s}),(0,a.jsx)("span",{children:l})]})}let I=function(e){let{session:t,sheetOpen:s,setSheetOpen:i}=e,[o,c]=(0,r.useState)(null),[x,h]=(0,r.useState)(null),[f,C]=(0,r.useState)("session-details"),_=(0,d.useRouter)(),{data:I,isLoading:T,error:z}=(0,n.I)({queryKey:["session-traces",null==t?void 0:t.id],queryFn:()=>(null==t?void 0:t.id)?(0,l.Np)(t.id):[],enabled:!!(null==t?void 0:t.id)&&s}),{data:D,isLoading:q}=(0,n.I)({queryKey:["session-traces-with-spans",null==I?void 0:I.map(e=>e.id)],enabled:!!I&&I.length>0,queryFn:async()=>I?await Promise.all(I.map(async e=>{try{let t=await (0,l.um)(e.id);return{...e,spans:t.spans||t.agents||[]}}catch(t){return{...e,spans:[]}}})):[]}),F=null;if(D&&Array.isArray(D)&&D.length>0){let e=D.flatMap(e=>Array.isArray(e.spans)?e.spans:[]);if(e.length>0){let t=Math.min(...e.map(e=>e.start_time)),s=Math.max(...e.map(e=>e.end_time))-t;F=s;let a=Math.floor(s/3600),l=Math.floor(s%3600/60);[a>0?String(a).padStart(2,"0"):null,String(l).padStart(2,"0"),String(s%60).padStart(2,"0")].filter(Boolean).join(":")}}let K=(e,s)=>{var a,l,n;sessionStorage.setItem("lastSessionId",null!=(a=null==t?void 0:t.id)?a:""),sessionStorage.setItem("sessionSheetActiveTab","session-conversation"),sessionStorage.setItem("sessionSheetSelectedTraceId",e),sessionStorage.setItem("fromSessionConversation","true");let r=(null==s?void 0:s.name)||"",i=null!=(l=null==s?void 0:s.latency)?l:"",o=null!=(n=null==s?void 0:s.total_tokens)?n:"";_.push("/trace?id=".concat(encodeURIComponent(e),"&name=").concat(encodeURIComponent(r),"&latency=").concat(encodeURIComponent(i),"&total_tokens=").concat(encodeURIComponent(o),"&redirect_from_session=true"))},W=I&&I.length>0?I[0].id:null,R=o||W,{data:U,isLoading:O}=(0,n.I)({queryKey:["trace-by-id",R],queryFn:()=>R?(0,l.um)(R):null,enabled:!!R&&s}),{data:P,isLoading:B,error:H}=(0,n.I)({queryKey:["all-trace-details",null==I?void 0:I.map(e=>e.id)],enabled:!!I&&I.length>0&&s,queryFn:async()=>I?await Promise.all(I.map(async e=>{try{return await (0,l.um)(e.id)}catch(t){return{id:e.id,trace_input:"N/A",trace_output:"N/A"}}})):[]}),{data:$,isLoading:V}=(0,n.I)({queryKey:["span-details",x],queryFn:()=>x?(0,l.j)(x):null,enabled:!!x}),Z=$||null;return(0,r.useEffect)(()=>{I&&I.length>0&&!o&&c(I[0].id)},[I,o]),(0,a.jsxs)(u.cj,{open:s,onOpenChange:i,children:[(0,a.jsx)(u.CG,{asChild:!0,children:(0,a.jsx)("button",{style:{display:"none"},children:"Hidden trigger"})}),(0,a.jsxs)(u.h,{showCloseIcon:!1,className:"w-full min-w-[80%] p-0 overflow-y-auto",side:"right",children:[(0,a.jsx)(u.Fm,{className:"sr-only",children:(0,a.jsx)(u.qp,{children:"Session Details"})}),(0,a.jsxs)("div",{className:"flex flex-col h-full bg-slate-950 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center p-4 border-b border-slate-800",children:[(0,a.jsx)("button",{className:"mr-2 text-slate-400 hover:text-white",onClick:()=>i(!1),children:(0,a.jsx)(g,{className:"h-5 w-5"})}),(0,a.jsx)("div",{className:"flex w-full justify-between items-center",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-base font-medium",children:"Session ID:"}),(0,a.jsx)("span",{className:"ml-2 font-mono text-sm",children:(null==t?void 0:t.id)||"-"}),(0,a.jsx)(A.$,{variant:"ghost",className:"ml-2 text-slate-400 hover:text-white",onClick:()=>{(null==t?void 0:t.id)&&navigator.clipboard.writeText(t.id)},children:(0,a.jsx)(v,{className:"h-4 w-4"})})]})})]}),(0,a.jsxs)("div",{className:"flex border-b border-slate-800 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center px-4 py-3 border-r border-slate-800",children:[(0,a.jsx)("span",{className:"text-slate-400 mr-2",children:(0,a.jsx)(L,{size:16})}),(0,a.jsx)("span",{children:(null==U?void 0:U.model)||"N/A"})]}),(0,a.jsx)(E,{icon:(0,a.jsx)(b.A,{className:"h-4 w-4"}),label:"Duration:",value:null!==F?" ".concat(F.toFixed(2),"s"):""}),(0,a.jsx)(E,{icon:(0,a.jsx)(j,{className:"h-4 w-4"}),label:"Total Cost:",value:"$0.0000000"}),(0,a.jsx)(E,{icon:(0,a.jsx)(y,{className:"h-4 w-4"}),label:"LLM Calls:",value:"N/A"}),(0,a.jsx)(E,{icon:(0,a.jsx)(N,{className:"h-4 w-4"}),label:"Tool Calls:",value:"N/A"}),(0,a.jsx)(E,{icon:(0,a.jsx)(w,{className:"h-4 w-4"}),label:"Errors:",value:"N/A"}),(0,a.jsx)(E,{icon:(0,a.jsx)(k,{className:"h-4 w-4"}),label:"Total Tokens:",value:"N/A"})]}),(0,a.jsx)("div",{className:"border-b border-slate-800 pt-4",children:(0,a.jsxs)(m.tU,{value:f,onValueChange:C,className:"w-full gap-0",children:[(0,a.jsxs)(m.j7,{className:"bg-transparent h-12 p-0",children:[(0,a.jsx)(m.Xi,{value:"session-details",className:(0,S.cn)("rounded-none h-full data-[state=active]:bg-transparent data-[state=active]:shadow-none","border-b-2 border-transparent data-[state=active]:border-white px-4"),children:"Session Details"}),(0,a.jsx)(m.Xi,{value:"session-conversation",className:(0,S.cn)("rounded-none h-full data-[state=active]:bg-transparent data-[state=active]:shadow-none","border-b-2 border-transparent data-[state=active]:border-white px-4"),children:"Session Conversation"})]}),(0,a.jsx)(m.av,{value:"session-details",className:"flex-1 p-0 m-0",children:(0,a.jsxs)("div",{className:"flex h-full",children:[(0,a.jsx)("div",{className:"w-1/2 p-4 border-r border-slate-800 overflow-y-auto",children:x?(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Span Details"}),V?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.E,{className:"h-4 w-full bg-slate-800"}),(0,a.jsx)(p.E,{className:"h-4 w-3/4 bg-slate-800"})]}):Z?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Span ID"}),(0,a.jsx)("div",{className:"font-mono text-sm",children:x})]}),(null==Z?void 0:Z.completions)&&Z.completions.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Completion"}),(0,a.jsx)("div",{className:"bg-slate-900 rounded p-2 text-xs font-mono whitespace-pre-line break-words max-h-64 overflow-y-auto",children:Z.completions[0].content})]}),Z.input&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Input"}),(0,a.jsx)("div",{className:"bg-slate-900 rounded p-2 text-xs font-mono whitespace-pre-line break-words max-h-64 overflow-y-auto",children:"object"==typeof Z.input?JSON.stringify(Z.input,null,2):Z.input})]})]}):(0,a.jsx)("div",{className:"text-slate-400",children:"No span details available"})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Trace Details"}),O?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.E,{className:"h-4 w-full bg-slate-800"}),(0,a.jsx)(p.E,{className:"h-4 w-3/4 bg-slate-800"})]}):U?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Trace Id"}),(0,a.jsx)("div",{className:"font-mono text-sm",children:R})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Trace Input"}),(0,a.jsx)("div",{className:"bg-slate-900 rounded p-2 text-xs font-mono whitespace-pre-line break-words max-h-64 overflow-y-auto",children:U.trace_input||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Trace Output"}),(0,a.jsx)("div",{className:"bg-slate-900 rounded p-2 text-xs font-mono whitespace-pre-line break-words max-h-64 overflow-y-auto",children:U.trace_output||"N/A"})]})]}):(0,a.jsx)("div",{className:"text-slate-400",children:"No trace selected"})]})}),(0,a.jsx)("div",{className:"w-1/2 flex flex-col",children:(0,a.jsx)("div",{className:"bg-slate-900 rounded-lg flex-1 w-full flex flex-col overflow-hidden",children:T||q?(0,a.jsx)(p.E,{className:"h-full w-full rounded-lg bg-slate-800"}):D&&D.length>0?(0,a.jsx)("div",{className:"max-h-[500px] overflow-y-auto",children:(0,a.jsx)(M,{traces:D,selectedTraceId:o,selectedSpanId:x,onSelectTrace:e=>{c(e),h(null)},onSelectSpan:(e,t)=>{c(t),h(e)}})}):(0,a.jsx)("div",{className:"text-slate-400",children:"No timeline data available"})})})]})}),(0,a.jsx)(m.av,{value:"session-conversation",className:"flex-1 p-0 m-0",children:(0,a.jsx)("div",{className:"bg-slate-900 h-full w-full flex flex-col p-0",children:T||B?(0,a.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:(0,a.jsx)(p.E,{className:"h-6 w-1/2 bg-slate-800"})}):P&&I&&P.length>0?(0,a.jsx)("div",{className:"flex-1 min-h-0",children:(0,a.jsx)("div",{className:"flex flex-col gap-6 h-full overflow-y-auto p-4",children:P.map((e,t)=>{var s;let l=(null==(s=I[t])?void 0:s.id)||e.id;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"flex items-center mb-1",children:(0,a.jsxs)("button",{className:"text-xs text-slate-500 hover:text-slate-300 font-mono underline underline-offset-2 cursor-pointer transition-colors",title:"Click to log full trace details",onClick:()=>K(l,e),children:["Trace ID: ",l]})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)("div",{className:"bg-slate-800 px-4 py-2 rounded-lg max-w-2xl text-sm font-mono text-left shadow-sm border border-slate-700",children:[(0,a.jsx)("span",{className:"block text-slate-400 text-xs mb-1",children:"Input"}),(0,a.jsx)("span",{className:"whitespace-pre-line break-words",children:e.trace_input||"N/A"})]})}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{className:"bg-slate-700 px-4 py-2 rounded-lg max-w-2xl text-sm font-mono text-left shadow-sm border border-slate-600",children:[(0,a.jsx)("span",{className:"block text-slate-400 text-xs mb-1 flex justify-start w-full",children:"Output"}),(0,a.jsx)("span",{className:"whitespace-pre-line break-words",children:e.trace_output||"N/A"})]})}),(0,a.jsx)("div",{className:"flex justify-center mt-2"}),t!==P.length-1&&(0,a.jsx)("div",{className:"border-t border-dashed border-slate-800 my-2"})]},l)})})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:(0,a.jsx)("span",{className:"text-slate-400",children:"No traces available for this session."})})})})]})})]})]})]})};function T(){let{data:e,isLoading:t,error:s,refetch:i}=(0,n.I)({queryKey:["config-sessions"],queryFn:l.Dq});(0,d.useRouter)();let[o,u]=r.useState(0),[m,p]=(null==e||e.length,(0,r.useState)(null)),[f,g]=(0,r.useState)(!1),v=(0,r.useMemo)(()=>[{accessorKey:"session_name",header:"Session Name",cell:e=>{let{getValue:t}=e;return t()||(0,a.jsx)("span",{className:"italic text-gray-400",children:"-"})}},{accessorKey:"id",header:"Session ID",cell:e=>{let{getValue:t}=e;return(0,a.jsx)("span",{className:"font-mono text-xs",children:t()})}},{accessorKey:"started_at",header:"Started At",cell:e=>{let{getValue:t}=e,s=t();return s?new Date(1e3*Number(s)).toLocaleString():"-"}},{accessorKey:"user_id",header:"User ID",cell:e=>{let{getValue:t}=e;return t()||(0,a.jsx)("span",{className:"italic text-gray-400",children:"-"})}}],[]);return t?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("span",{className:"text-lg text-muted-foreground",children:"Loading sessions..."})}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Sessions"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[{label:"Total Cost",value:"-",tooltip:"Total cost incurred for this period (placeholder)."},{label:"Tokens Generated",value:"-",tooltip:"Total number of tokens generated (placeholder)."},{label:"Fail Rate",value:"-",tooltip:"Percentage of failed events (placeholder)."},{label:"Total Events",value:"-",tooltip:"Total number of events in this period (placeholder)."}].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-muted rounded-lg px-4 py-3",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e.label}),(0,a.jsx)(x.Bc,{children:(0,a.jsxs)(x.m_,{children:[(0,a.jsx)(x.k$,{asChild:!0,children:(0,a.jsx)("span",{className:"ml-1 cursor-help",children:(0,a.jsx)(h.A,{size:16,className:"text-muted-foreground"})})}),(0,a.jsx)(x.ZI,{children:e.tooltip})]})}),(0,a.jsx)("span",{className:"ml-auto font-mono text-base",children:e.value})]},e.label))}),(0,a.jsx)(c,{columns:v,data:e||[],onRowClick:e=>{p(e),g(!0)}}),(0,a.jsx)(I,{session:m,sheetOpen:f,setSheetOpen:g})]})}},4186:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6102:(e,t,s)=>{"use strict";s.d(t,{Bc:()=>r,ZI:()=>c,k$:()=>o,m_:()=>i});var a=s(5155);s(2115);var l=s(9613),n=s(9434);function r(e){let{delayDuration:t=0,...s}=e;return(0,a.jsx)(l.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function i(e){let{...t}=e;return(0,a.jsx)(r,{children:(0,a.jsx)(l.bL,{"data-slot":"tooltip",...t})})}function o(e){let{...t}=e;return(0,a.jsx)(l.l9,{"data-slot":"tooltip-trigger",...t})}function c(e){let{className:t,sideOffset:s=0,children:r,...i}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{"data-slot":"tooltip-content",sideOffset:s,className:(0,n.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...i,children:[r,(0,a.jsx)(l.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},6920:(e,t,s)=>{Promise.resolve().then(s.bind(s,3610))},7187:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var a=(0,s(6467).A)("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]])},7313:(e,t,s)=>{"use strict";s.d(t,{Xi:()=>o,av:()=>c,j7:()=>i,tU:()=>r});var a=s(5155);s(2115);var l=s(64),n=s(9434);function r(e){let{className:t,...s}=e;return(0,a.jsx)(l.bL,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)(l.B8,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)(l.l9,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 cursor-pointer disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)(l.UC,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",t),...s})}},7652:(e,t,s)=>{"use strict";s.d(t,{Dq:()=>i,Np:()=>o,_K:()=>r,_k:()=>c,j:()=>d,um:()=>l,zi:()=>n});let a="http://0.0.0.0:5001/api";async function l(e){for(let t=1;t<=3;t++)try{let t=await fetch("".concat(a,"/traces/").concat(e,"/spans"));if(!t.ok){let e=await t.text();throw console.error("Error fetching trace: ".concat(t.status," ").concat(t.statusText),e),Error("Error fetching trace: ".concat(t.statusText))}return await t.json()}catch(s){if(console.error("Failed to fetch trace with ID ".concat(e," (attempt ").concat(t,"/").concat(3,"):"),s),3===t)throw s;await new Promise(e=>setTimeout(e,500*Math.pow(2,t-1)))}}async function n(e){for(let t=1;t<=3;t++)try{let t=await fetch("".concat(a,"/span/").concat(e,"/details"));if(!t.ok){let e=await t.text();throw console.error("Error fetching span details: ".concat(t.status," ").concat(t.statusText),e),Error("Error fetching span details: ".concat(t.statusText))}return await t.json()}catch(s){if(console.error("Failed to fetch span details with ID ".concat(e," (attempt ").concat(t,"/").concat(3,"):"),s),3===t)throw s;await new Promise(e=>setTimeout(e,500*Math.pow(2,t-1)))}throw Error("Failed to fetch span details")}async function r(){try{let e=await fetch("".concat(a,"/traces"));if(!e.ok)throw Error("Error fetching traces");return await e.json()}catch(e){throw console.log("Failed to fetch all traces:",e),e}}async function i(){try{let e=await fetch("".concat(a,"/sessions"));if(!e.ok)throw Error("Error fetching sessions: ".concat(e.statusText));return await e.json()}catch(e){throw console.error("Failed to fetch sessions:",e),e}}async function o(e){try{let t=await fetch("".concat(a,"/sessions/").concat(e,"/traces"));if(!t.ok)throw Error("Error fetching traces: ".concat(t.statusText));return await t.json()}catch(e){throw console.error("Failed to fetch traces:",e),e}}async function c(e){try{let t=await fetch("".concat(a,"/traces/").concat(e,"/spans"));if(!t.ok)throw Error("Error fetching spans: ".concat(t.statusText));return await t.json()}catch(e){throw console.error("Failed to fetch spans:",e),e}}async function d(e){try{let t=await fetch("".concat(a,"/span/").concat(e,"/details"));if(!t.ok)throw Error("Error fetching spans: ".concat(t.statusText));return await t.json()}catch(e){throw console.error("Failed to fetch spans:",e),e}}},8382:(e,t,s)=>{"use strict";s.d(t,{CG:()=>o,Fm:()=>h,Qs:()=>m,cj:()=>i,h:()=>x,qp:()=>u});var a=s(5155);s(2115);var l=s(5452),n=s(4416),r=s(9434);function i(e){let{...t}=e;return(0,a.jsx)(l.bL,{"data-slot":"sheet",...t})}function o(e){let{...t}=e;return(0,a.jsx)(l.l9,{"data-slot":"sheet-trigger",...t})}function c(e){let{...t}=e;return(0,a.jsx)(l.ZL,{"data-slot":"sheet-portal",...t})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(l.hJ,{"data-slot":"sheet-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function x(e){let{className:t,children:s,side:i="right",showCloseIcon:o=!0,...x}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)(l.UC,{"data-slot":"sheet-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===i&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===i&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===i&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===i&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...x,children:[s,o&&(0,a.jsxs)(l.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,a.jsx)(n.A,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function h(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"sheet-header",className:(0,r.cn)("flex flex-col gap-1.5 p-4",t),...s})}function u(e){let{className:t,...s}=e;return(0,a.jsx)(l.hE,{"data-slot":"sheet-title",className:(0,r.cn)("text-foreground font-semibold",t),...s})}function m(e){let{className:t,...s}=e;return(0,a.jsx)(l.VY,{"data-slot":"sheet-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...s})}},8856:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var a=s(5155),l=s(9434);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"skeleton",className:(0,l.cn)("bg-accent animate-pulse rounded-md",t),...s})}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(2596),l=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[126,423,525,960,328,908,441,684,358],()=>t(6920)),_N_E=e.O()}]);