# SPDX-FileCopyrightText: © 2025 scy
#
# SPDX-License-Identifier: MIT

[project]
name = "felloff"
version = "0.1.0"
description = "A library and command-line utility to deal with YAML front matter."
readme = "README.md"
requires-python = ">=3.10,<4"
authors = [
	{name = "scy"},
]
maintainers = [
	{name = "scy"},
]
classifiers = [
	"Development Status :: 4 - Beta",
	"Environment :: Console",
	"License :: OSI Approved :: MIT License",
	"Operating System :: POSIX",
	"Programming Language :: Python :: 3 :: Only",
	"Programming Language :: Python :: 3.10",
	"Programming Language :: Python :: 3.11",
	"Programming Language :: Python :: 3.12",
	"Programming Language :: Python :: 3.13",
	"Topic :: File Formats",
	"Topic :: Text Processing :: Markup :: Markdown",
	"Topic :: Utilities",
]
dependencies = [
    "ruamel-yaml~=0.18",
]

[project.urls]
source = "https://codeberg.org/scy/felloff"
documentation = "https://codeberg.org/scy/felloff"
issues = "https://codeberg.org/scy/felloff/issues"

[project.scripts]
felloff = "felloff.cli:run"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.uv]
package = true
dev-dependencies = [
    "mypy>=1.15.0",
    "pytest~=8.4",
    "reuse>=5.0.2",
    "ruff>=0.11.8",
]

[tool.mypy]
packages = "felloff"

[tool.ruff]
line-length = 79
indent-width = 4

[tool.ruff.format]
quote-style = "double"
indent-style = "space"

[tool.ruff.lint]
preview = true
select = [
	"ANN",     # flake8-annotations
	"ARG",     # flake8-unused-arguments
	"ASYNC",   # flake8-async
	"B",       # flake8-bugbear
	"C4",      # flake8-comprehensions
	"C90",     # mccabe complexity
	"DTZ",     # flake8-datetimez (naive datetimes)
	"E",       # pycodestyle errors
	"ERA",     # eradicate (commented-out code)
	"EXE",     # flake8-executable (shebang lines)
	"F",       # pyflakes
	"FA",      # flake8-future-annotations
	"FURB",    # refurb
	"I",       # isort
	"INP",     # flake8-no-pep420 (implicit namespace package)
	"ISC",     # flake8-implicit-str-concat
	"LOG",     # flake8-logging
	"N",       # pep8-naming
	"PL",      # pylint
	"PT",      # flake8-pytest-style
	"PTH",     # flake8-use-pathlib
	"Q",       # flake8-quotes
	"RET",     # flake8-return
	"RSE",     # flake8-raise
	"RUF",     # Ruff-specific rules
	"S",       # flake8-bandit (security)
	"SIM",     # flake8-simplify
	"SLF",     # flake8-self (private member access)
	"SLOT",    # flake8-slots
	"TCH",     # flake8-type-checking
	"TRY",     # tryceratops
	"T20",     # flake8-print
	"UP",      # pyupgrade
	"W",       # pycodestyle warnings
]
ignore = [
	"ISC001",   # conflict w/ formatter, see https://github.com/astral-sh/ruff/issues/8272
	"PLC0415",  # forbids dynamic imports
	"RUF200",   # requires a name for projects
	"TRY003",   # complains about simple ValueError messages
]
allowed-confusables = [  # exceptions to RUF002, characters in docstrings
	" ",  # non-breaking space
]

[tool.ruff.lint.flake8-annotations]
mypy-init-return = true  # no return annotation required for __init__

[tool.ruff.lint.per-file-ignores]
"tests/*" = [
	"ANN001",  # missing function argument annotation
	"ANN201",  # missing return type annotation
	"ARG001",  # unused function argument (e.g. require-only fixtures)
	"INP001",  # implicit namespace package
	"S101",    # use of assert
]

[tool.ruff.lint.isort]
# Two blank lines after the imports.
lines-after-imports = 2
