[build-system]
build-backend = "poetry.core.masonry.api"
requires = ["poetry-core>=2.0.0,<3.0.0"]

[project]
authors = [
  {name = "Agentforce Team", email = "agentforce@salesforce.com"}
]
classifiers = [
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3.11",
  "License :: OSI Approved :: Apache Software License",
  "Operating System :: OS Independent",
  "Development Status :: 4 - Beta",
  "Intended Audience :: Developers",
  "Topic :: Software Development :: Libraries :: Python Modules"
]
dependencies = [
  "requests (>=2.25.0)",
  "simple-salesforce (>=1.12.0)",
  "jsonschema (>=4.0.0)",
  "aiohttp (>=3.8.0)",
  "python-dotenv (>=0.20.0)",
  "click (>=8.0.0)",
  "tqdm (>=4.60.0)",
  "pydantic-ai (>=0.1.3)",
  "openai (>=1.75.0)"
]
description = "Python SDK for creating, managing, and deploying AI agents in Salesforce"
include = [
  {path = "agent_sdk/core/templates/**/*", format = "sdist"},
  "LICENSE"
]
license = "Apache-2.0"
name = "agentforce-sdk"
readme = "README.md"
repository = "https://github.com/salesforce/agent-sdk"
requires-python = ">=3.11,<4.0"
version = "0.2.0"  # replace with actual version or use dynamic plugins

[tool.poetry]
packages = [{include = "agent_sdk"}]

[tool.poetry.group.dev.dependencies]
black = ">=22.0.0"
flake8 = ">=5.0.0"
isort = ">=5.10.0"
mypy = ">=0.950"
pre-commit = "*"
pytest = ">=7.0.0"
pytest-cov = ">=4.0.0"
pytest-dependency = ">=0.5.1"
pytest-html = "*"
pytest-xdist = "*"

[tool.poetry.group.test.dependencies]
tabulate = ">=0.9.0"

[tool.poetry.scripts]
agentforce-server = "agent_sdk.server:main"

[tool.pytest.ini_options]
addopts = "--verbose --cov=agent_sdk --cov-report=term --cov-report=html -k 'not integration'"
markers = [
  "integration: tests that interact with external systems",
  "slow: tests that take a long time to run"
]
python_classes = ["Test*"]
python_files = ["test_*.py"]
python_functions = ["test_*"]
testpaths = ["tests/unit/", "tests/integration/"]

[tool.ruff]
fix = true
line-length = 120
target-version = 'py310'
lint.ignore = [
  # do not assign a lambda expression, use a def
  'E731',
  # controversial
  'B006',
  'B007',
  'B008',
  # setattr is used to side-step mypy
  'B009',
  # getattr is used to side-step mypy
  'B010',
  # false positives
  'B019',
  # Too many arguments to function call
  'PLR0913',
  # Too many returns
  'PLR0911',
  # Too many branches
  'PLR0912',
  # Too many statements
  'PLR0915',
  # Redefined loop name
  'PLW2901',
  # Self
  'PYI019',
  # Docstrings should not be included in stubs
  'PYI021',
  # Use typing_extensions.TypeAlias for type aliases
  'PYI026',
  # while int | float can be shortened to float, the former is more explicit
  'PYI041',  # not yet implemented
  # Magic number
  'PLR2004',
  # debatable
  'PYI034'
]
lint.select = [
  'F',
  'E',
  'W',
  'YTT',
  'B',
  'Q',
  'T10',
  'INT',
  'PLC',
  'PLE',
  'PLR',
  'PLW',
  'PIE',
  'PYI',
  'TID',
  'ISC',
  'TCH',
  'C4',
  'RUF',
  'S102'
]
