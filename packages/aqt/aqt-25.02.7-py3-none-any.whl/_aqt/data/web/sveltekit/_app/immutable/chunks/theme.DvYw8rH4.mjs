import{h as C,a3 as H,a4 as ne,e as te,d as ie,T as le,a5 as J,a6 as se,a7 as z,a8 as M,C as y,a9 as R,y as K,z as Q,A as fe,q as ue,aa as B,ab as S,k as U,ac as L,ad as ve,ae as oe,af as ce,ag as de,ah as W,O as _e,ai as he,aj as pe,ak as Ee,u as me,o as X,al as ge,am as Te}from"./runtime.NF8NW0fQ.mjs";import{r as Ae}from"./runtime-require.ClQzQQRm.mjs";import{r as be,g as Ie}from"./index.BmKPAsrv.mjs";function De(r,e){return e}function xe(r,e,a,f){for(var s=[],u=e.length,v=0;v<u;v++)ve(e[v].e,s,!0);var E=u>0&&s.length===0&&a!==null;if(E){var d=a.parentNode;oe(d),d.append(a),f.clear(),x(r,e[0].prev,e[u-1].next)}ce(s,()=>{for(var T=0;T<u;T++){var c=e[T];E||(f.delete(c.k),x(r,c.prev,c.next)),de(c.e,!E)}})}function He(r,e,a,f,s,u=null){var v=r,E={flags:e,items:new Map,first:null},d=(e&W)!==0;if(d){var T=r;v=C?H(_e(T)):T.appendChild(ne())}C&&te();var c=null,A=!1;ie(()=>{var b=a(),n=le(b)?b:b==null?[]:J(b),i=n.length;if(A&&i===0)return;A=i===0;let o=!1;if(C){var m=v.data===se;m!==(i===0)&&(v=z(),H(v),M(!1),o=!0)}if(C){for(var _=null,h,p=0;p<i;p++){if(y.nodeType===8&&y.data===he){v=y,o=!0,M(!1);break}var g=n[p],t=f(g,p);h=Z(y,E,_,null,g,t,p,s,e),E.items.set(t,h),_=h}i>0&&H(z())}if(!C){var l=pe;Ce(n,E,v,s,e,(l.f&R)!==0,f)}u!==null&&(i===0?c?K(c):c=Q(()=>u(v)):c!==null&&fe(c,()=>{c=null})),o&&M(!0),a()}),C&&(v=y)}function Ce(r,e,a,f,s,u,v,E){var P,q,F,V;var d=(s&Ee)!==0,T=(s&(S|L))!==0,c=r.length,A=e.items,b=e.first,n=b,i,o=null,m,_=[],h=[],p,g,t,l;if(d)for(l=0;l<c;l+=1)p=r[l],g=v(p,l),t=A.get(g),t!==void 0&&((P=t.a)==null||P.measure(),(m!=null?m:m=new Set).add(t));for(l=0;l<c;l+=1){if(p=r[l],g=v(p,l),t=A.get(g),t===void 0){var ae=n?n.e.nodes_start:a;o=Z(ae,e,o,o===null?e.first:o.next,p,g,l,f,s),A.set(g,o),_=[],h=[],n=o.next;continue}if(T&&we(t,p,l,s),t.e.f&R&&(K(t.e),d&&((q=t.a)==null||q.unfix(),(m!=null?m:m=new Set).delete(t))),t!==n){if(i!==void 0&&i.has(t)){if(_.length<h.length){var N=h[0],I;o=N.prev;var O=_[0],k=_[_.length-1];for(I=0;I<_.length;I+=1)G(_[I],N,a);for(I=0;I<h.length;I+=1)i.delete(h[I]);x(e,O.prev,k.next),x(e,o,O),x(e,k,N),n=N,o=k,l-=1,_=[],h=[]}else i.delete(t),G(t,n,a),x(e,t.prev,t.next),x(e,t,o===null?e.first:o.next),x(e,o,t),o=t;continue}for(_=[],h=[];n!==null&&n.k!==g;)(u||!(n.e.f&R))&&(i!=null?i:i=new Set).add(n),h.push(n),n=n.next;if(n===null)continue;t=n}_.push(t),o=t,n=t.next}if(n!==null||i!==void 0){for(var w=i===void 0?[]:J(i);n!==null;)(u||!(n.e.f&R))&&w.push(n),n=n.next;var D=w.length;if(D>0){var re=s&W&&c===0?a:null;if(d){for(l=0;l<D;l+=1)(F=w[l].a)==null||F.measure();for(l=0;l<D;l+=1)(V=w[l].a)==null||V.fix()}xe(e,w,re,A)}}d&&ue(()=>{var Y;if(m!==void 0)for(t of m)(Y=t.a)==null||Y.apply()}),B.first=e.first&&e.first.e,B.last=o&&o.e}function we(r,e,a,f){f&S&&U(r.v,e),f&L?U(r.i,a):r.i=a}function Z(r,e,a,f,s,u,v,E,d,T){var c=(d&S)!==0,A=(d&ge)===0,b=c?A?me(s):X(s):s,n=d&L?X(v):v,i={i:n,v:b,k:u,a:null,e:null,prev:a,next:f};try{return i.e=Q(()=>E(r,b,n),C),i.e.prev=a&&a.e,i.e.next=f&&f.e,a===null?e.first=i:(a.next=i,a.e.next=i.e),f!==null&&(f.prev=i,f.e.prev=i.e),i}finally{}}function G(r,e,a){for(var f=r.next?r.next.e.nodes_start:a,s=e?e.e.nodes_start:a,u=r.e.nodes_start;u!==f;){var v=Te(u);s.before(u),u=v}}function x(r,e,a){e===null?r.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Me(r,e,a,f){var u;var s=(u=r.__styles)!=null?u:r.__styles={};s[e]!==a&&(s[e]=a,a==null?r.style.removeProperty(e):r.style.setProperty(e,a,""))}function $(){return{isDark:document.documentElement.classList.contains("night-mode")}}let j=null;const ee=be($(),r=>{j=r});Ie(ee);const ye=new MutationObserver((r,e)=>{j($())});ye.observe(document.documentElement,{attributeFilter:["class"]});Ae("anki/theme",{pageTheme:ee});export{He as e,De as i,ee as p,Me as s};
