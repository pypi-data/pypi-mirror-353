var gn=Object.defineProperty;var vn=(s,t,a)=>t in s?gn(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var $e=(s,t,a)=>vn(s,typeof t!="symbol"?t+"":t,a);import{L as $n,M as hn,N as mn,O as pn,P as yn,s as yt,Q as Cn,S as ft,T as st,U as tt,V as pr,W as At,X as Pr,Y as Qt,Z as qr,_ as ir,$ as wn,a0 as _n,a1 as kn,a2 as Pn,a3 as bn,a4 as xn,a5 as Sn,a6 as On,a7 as Rn,a8 as Dn}from"../chunks/DMM0C4aT.mjs";import{e as Tn,f as In,b as An}from"../chunks/B7lhBwmR.mjs";import{s as f,b9 as ys,g as r,L as Cs,K as w,aN as Pt,x as En,ba as Ln,p as Ce,e as et,f as ne,c as v,d as we,aq as Mn,b2 as Rr,b3 as Nn,i as K,h as G,V as g,r as A,b as D,n as ee,l as te,a as Ve,m as b,T as je,t as Y,b5 as Et,al as de,Z as Fn,bb as Vn}from"../chunks/DvQPdglG.mjs";import{w as Me,g as Le,d as Hn,r as ws,a as Bn}from"../chunks/CAXUivPC.mjs";import{c as ar}from"../chunks/CK6JXRUV.mjs";import{b as Dr,i as Ur,S as zn}from"../chunks/BSjyH741.mjs";import"../chunks/Bg9kRutz.mjs";import{i as ke}from"../chunks/DTpo0kgr.mjs";import{b as Lt}from"../chunks/Bc5MJCE7.mjs";import{p as N,i as De,s as _s}from"../chunks/jy7gnWqU.mjs";import{q as Wn,s as V,r as ks,e as be,c as Ps,o as Tr,p as Gn}from"../chunks/DWmaQdPb.mjs";import{e4 as bs,u as Je,e5 as br,av as gt,e6 as jn,e7 as qn,t as pt,c9 as Ir,e8 as Un,T as ze,e9 as xs,ea as Qn,eb as Qr,ec as Yn,ed as Yr,ee as Kn,ef as Xn,eg as Zn,eh as Jn,ei as ea,ej as ta,ek as ra,el as sa,em as na,en as aa,eo as oa,ep as ia,eq as la,er as ua,b8 as lt,es as ca,et as Kr,eu as da,ev as fa,ew as ga,ex as va,ey as Xr,ez as $a,eA as ha,eB as ma,eC as pa,eD as ya,eE as Ca,eF as wa,eG as _a,eH as ka,eI as Pa,eJ as Ss,eK as ba,eL as xa,eM as Sa,eN as Oa,eO as Ra,eP as Da,eQ as Ta,eR as Ia,eS as Aa,eT as Ea,eU as La,eV as Ma,eW as Na,eX as Fa,eY as Va,eZ as Ha,e_ as Ba,e$ as za,f0 as Wa,f1 as Ga,f2 as ja,f3 as qa,f4 as Ua,f5 as Qa,f6 as Ya,f7 as Ka,f8 as Xa,f9 as Za,fa as Ja,fb as eo,fc as to,fd as ro,fe as so,ff as no,fg as ao,fh as oo,fi as io,fj as Zr,fk as lo,fl as uo,fm as co,fn as fo,fo as go,fp as vo,fq as $o,fr as Jr,fs as ho,ft as mo,fu as po,fv as yo,fw as Os,fx as Rs,fy as Ds,fz as Co,fA as wo,fB as _o,fC as ko,fD as Po,fE as bo,fF as xo,fG as So,fH as Oo,fI as or,fJ as es,fK as ts,fL as Ts,fM as Ro,fN as Is,fO as Do,fP as As,fQ as To,fR as Io,fS as rs,fT as Ao,fU as Eo,fV as Lo,fW as Mo,fX as No,fY as Fo,fZ as Vo,f_ as Ho,f$ as Bo,g0 as Es,g1 as zo,g2 as ss,g3 as Wo,co as Go,cm as jo,cH as Ls,g4 as qo,cY as Uo,cp as Qo,g5 as Yo,g6 as Ko,g7 as Xo,g8 as Zo,g9 as Jo,ga as ei,gb as ti,gc as ri,gd as si,ge as ni,gf as Ms,gg as ai,gh as oi,gi as Ar,gj as Ns,gk as ii,gl as li,gm as ui,gn as Fs,go as Vs,gp as Hs,gq as ci,gr as di,gs as fi,gt as gi,gu as vi,gv as $i,dB as hi,gw as mi,q as Kt,gx as pi,gy as yi,gz as Ci,gA as wi,gB as _i,gC as ki,gD as Pi,gE as bi,gF as xi,gG as Bs,gH as Si,gI as Oi,gJ as Ri,gK as Di,gL as Ti,gM as Ii,gN as Ai,gO as zs,gP as Ei,gQ as Li,gR as Mi,gS as Ni,gT as Fi,gU as Vi,gV as Hi,gW as Bi,U as zi,gX as Wi,gY as Gi,gZ as ji,g_ as qi,g$ as Ui,h0 as Qi,h1 as Yi,h2 as Ki,h3 as Ws,h4 as ns,h5 as Xi,h6 as Zi,h7 as Ji,h8 as el,h9 as tl,ha as rl,hb as sl,hc as nl,hd as al,he as ol,hf as il,hg as as,hh as ll,hi as ul,hj as cl,hk as dl,hl as fl,hm as gl,hn as vl,ho as os,hp as $l,hq as hl,hr as ml}from"../chunks/B29WhkuB.mjs";import{b as Ge}from"../chunks/CVnLI7kJ.mjs";import{s as Ie,a as ve,m as bt,b as ut,d as Z,e as pl}from"../chunks/B2Ge_TJA.mjs";import{C as yl}from"../chunks/C_ns7zFF.mjs";import{e as Xt,i as ur,s as Cl,R as Ne,p as wl}from"../chunks/BoMKTN9B.mjs";import{c as xr}from"../chunks/BF32I2AG.mjs";import{T as rt}from"../chunks/BCDsRdTm.mjs";import{H as ye,b as Ke,a as ct,M as _l}from"../chunks/CxusYGyO.mjs";import{d as Zt,M as Gs,S as kl,l as Pl,t as bl,u as xl,v as Sl,a as Ol,W as Rl,P as Dl,D as Yt}from"../chunks/D7gotxwE.mjs";import{a as Tl}from"../chunks/CcaWrs5J.mjs";import{C as St,R as Jt,a as J,S as We,E as it}from"../chunks/CC306eSV.mjs";import{c as er,b as yr}from"../chunks/Hy6HsZIe.mjs";import{a as lr,_ as Il,I as is,c as js,$ as Al}from"../chunks/-4N59vJs.mjs";import{C as Ct}from"../chunks/C8bduUXO.mjs";import{j as El,S as Ll,g as Ml,p as Nl}from"../chunks/DuyxbZ4v.mjs";import{W as Fe}from"../chunks/_syGKfoN.mjs";import{m as qs}from"../chunks/Dbye-yJ_.mjs";import{L as Fl,S as Vl}from"../chunks/CGCBlke2.mjs";import{I as Hl}from"../chunks/CH8qQ4aj.mjs";import{r as Bl}from"../chunks/C9lScYz4.mjs";import{r as Sr}from"../chunks/DkOWPoAo.mjs";import{k as zl}from"../chunks/CGNlSiuz.mjs";import{ac as Er,y as ls,z as us,A as cs,C as Wl,B as Gl,D as jl,E as ql,H as ds,F as Ul,G as fs,b as Ql,I as Yl,M as Kl,K as Xl,J as Zl,N as Jl,L as eu}from"../chunks/B2Dbducp.mjs";import{I as tu,i as ru,c as su,C as nu,T as au}from"../chunks/Cm_MaWwh.mjs";import{t as Cr,b as nt,c as ou,u as iu,e as lu}from"../chunks/DZkEIX_Y.mjs";import{t as uu}from"../chunks/BVT0v6FD.mjs";import{S as gs,a as cu}from"../chunks/DB8w6JNV.mjs";function du(s){f(s,s.v+1)}function fu(s){let t=0,a=En(0),e;return()=>{ys()&&(r(a),Cs(()=>(t===0&&(e=w(()=>s(()=>du(a)))),t+=1,()=>{Pt().then(()=>{t-=1,t===0&&(e==null||e(),e=void 0)})})))}}function gu(s,t){let a=s();const e=Me(a,n=>{let o=a!==s();const c=Ln(()=>{Cs(()=>{const l=s();o&&n(l)})});return o=!0,c});return t?{set:t,update:n=>t(n(s())),subscribe:e.subscribe}:{subscribe:e.subscribe}}function vu(s){let t;const a=fu(n=>{let o=!1;const c=s.subscribe(l=>{t=l,o&&n()});return o=!0,c});function e(){return ys()?(a(),t):Le(s)}return"set"in s?{get current(){return e()},set current(n){s.set(n)}}:{get current(){return e()}}}const $u=Object.freeze(Object.defineProperty({__proto__:null,derived:Hn,fromStore:vu,get:Le,readable:ws,readonly:Bn,toStore:gu,writable:Me},Symbol.toStringTag,{value:"Module"}));function hu(s,t,...a){return mu(s,ru,t,a)}function mu(s,t,a,e){return function n(o,c){if(c>=e.length)return a(o);const l=new tu,u=e[c++];let h=-1;for(const p of o){const $=u(p,++h,o),m=l.get($);m?m.push(p):l.set($,[p])}for(const[p,$]of l)l.set(p,n($,c));return t(l)}(s,0)}const pu=su("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function yu(s,t){for(var a=-1,e=s==null?0:s.length,n=Array(e);++a<e;)n[a]=t(s[a],a,s);return n}var vs=gs?gs.prototype:void 0,$s=vs?vs.toString:void 0;function Us(s){if(typeof s=="string")return s;if(Zt(s))return yu(s,Us)+"";if(Er(s))return $s?$s.call(s):"";var t=s+"";return t=="0"&&1/s==-1/0?"-0":t}function Cu(s){return s}var wu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_u=/^\w*$/;function Lr(s,t){if(Zt(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||Er(s)?!0:_u.test(s)||!wu.test(s)||t!=null&&s in Object(t)}var ku="Expected a function";function Mr(s,t){if(typeof s!="function"||t!=null&&typeof t!="function")throw new TypeError(ku);var a=function(){var e=arguments,n=t?t.apply(this,e):e[0],o=a.cache;if(o.has(n))return o.get(n);var c=s.apply(this,e);return a.cache=o.set(n,c)||o,c};return a.cache=new(Mr.Cache||Gs),a}Mr.Cache=Gs;var Pu=500;function bu(s){var t=Mr(s,function(e){return a.size===Pu&&a.clear(),e}),a=t.cache;return t}var xu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Su=/\\(\\)?/g,Ou=bu(function(s){var t=[];return s.charCodeAt(0)===46&&t.push(""),s.replace(xu,function(a,e,n,o){t.push(n?o.replace(Su,"$1"):e||a)}),t});function Ru(s){return s==null?"":Us(s)}function Qs(s,t){return Zt(s)?s:Lr(s,t)?[s]:Ou(Ru(s))}function cr(s){if(typeof s=="string"||Er(s))return s;var t=s+"";return t=="0"&&1/s==-1/0?"-0":t}function Ys(s,t){t=Qs(t,s);for(var a=0,e=t.length;s!=null&&a<e;)s=s[cr(t[a++])];return a&&a==e?s:void 0}function Du(s,t,a){var e=s==null?void 0:Ys(s,t);return e===void 0?a:e}var Tu=1,Iu=2;function Au(s,t,a,e){var n=a.length,o=n;if(s==null)return!o;for(s=Object(s);n--;){var c=a[n];if(c[2]?c[1]!==s[c[0]]:!(c[0]in s))return!1}for(;++n<o;){c=a[n];var l=c[0],u=s[l],h=c[1];if(c[2]){if(u===void 0&&!(l in s))return!1}else{var p=new kl,$;if(!($===void 0?Dr(h,u,Tu|Iu,e,p):$))return!1}}return!0}function Ks(s){return s===s&&!cu(s)}function Eu(s){for(var t=Pl(s),a=t.length;a--;){var e=t[a],n=s[e];t[a]=[e,n,Ks(n)]}return t}function Xs(s,t){return function(a){return a==null?!1:a[s]===t&&(t!==void 0||s in Object(a))}}function Lu(s){var t=Eu(s);return t.length==1&&t[0][2]?Xs(t[0][0],t[0][1]):function(a){return a===s||Au(a,s,t)}}function Mu(s,t){return s!=null&&t in Object(s)}function Nu(s,t,a){t=Qs(t,s);for(var e=-1,n=t.length,o=!1;++e<n;){var c=cr(t[e]);if(!(o=s!=null&&a(s,c)))break;s=s[c]}return o||++e!=n?o:(n=s==null?0:s.length,!!n&&bl(n)&&xl(c,n)&&(Zt(s)||Sl(s)))}function Fu(s,t){return s!=null&&Nu(s,t,Mu)}var Vu=1,Hu=2;function Bu(s,t){return Lr(s)&&Ks(t)?Xs(cr(s),t):function(a){var e=Du(a,s);return e===void 0&&e===t?Fu(a,s):Dr(t,e,Vu|Hu)}}function zu(s){return function(t){return t==null?void 0:t[s]}}function Wu(s){return function(t){return Ys(t,s)}}function Gu(s){return Lr(s)?zu(cr(s)):Wu(s)}function ju(s){return typeof s=="function"?s:s==null?Cu:typeof s=="object"?Zt(s)?Bu(s[0],s[1]):Lu(s):Gu(s)}function qu(s,t,a){a=typeof a=="function"?a:void 0;var e=a?a(s,t):void 0;return e===void 0?Dr(s,t,void 0,a):!!e}function Uu(s,t){for(var a,e=-1,n=s.length;++e<n;){var o=t(s[e]);o!==void 0&&(a=a===void 0?o:a+o)}return a}function Qu(s,t){return s&&s.length?Uu(s,ju(t)):0}function Or(){let s;return[new Promise(a=>s=a),s]}class Yu{constructor(t,a){$e(this,"currentConfig");$e(this,"currentAuxData");$e(this,"configList");$e(this,"cardStateCustomizer");$e(this,"currentDeck");$e(this,"deckLimits");$e(this,"defaults");$e(this,"addonComponents");$e(this,"newCardsIgnoreReviewLimit");$e(this,"applyAllParentLimits");$e(this,"fsrs");$e(this,"fsrsReschedule",Me(!1));$e(this,"fsrsHealthCheck");$e(this,"daysSinceLastOptimization");$e(this,"currentPresetName");$e(this,"originalConfigsPromise");$e(this,"originalConfigsResolve");$e(this,"targetDeckId");$e(this,"configs");$e(this,"selectedIdx");$e(this,"configListSetter");$e(this,"modifiedConfigs",new Set);$e(this,"removedConfigs",[]);$e(this,"schemaModified");$e(this,"_presetAssignmentsChanged",!1);$e(this,"loadedPresets",new Set);var e,n;this.targetDeckId=t,this.currentDeck=a.currentDeck,this.defaults=a.defaults.config,this.configs=a.allConfig.map(o=>({config:o.config,useCount:o.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(o=>o.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=Me(a.cardStateCustomizer),this.deckLimits=Me((n=(e=a.currentDeck)==null?void 0:e.limits)!=null?n:Xu()),this.newCardsIgnoreReviewLimit=Me(a.newCardsIgnoreReviewLimit),this.applyAllParentLimits=Me(a.applyAllParentLimits),this.fsrs=Me(a.fsrs),this.fsrsHealthCheck=Me(a.fsrsHealthCheck),this.daysSinceLastOptimization=Me(a.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=Me(this.getCurrentConfig()),this.currentAuxData=Me(this.getCurrentAuxData()),this.currentPresetName=Me(this.configs[this.selectedIdx].config.name),this.configList=ws(this.getConfigList(),o=>{this.configListSetter=o}),this.schemaModified=a.schemaModified,this.addonComponents=Me([]),Le(this.configList),this.currentConfig.subscribe(o=>this.onCurrentConfigChanged(o)),this.currentAuxData.subscribe(o=>this.onCurrentAuxDataChanged(o)),this.loadedPresets.add(this.configs[this.selectedIdx].config.id),[this.originalConfigsPromise,this.originalConfigsResolve]=Or()}async markCurrentPresetAsLoaded(){const t=this.configs[this.selectedIdx].config.id,a=this.loadedPresets;if(t&&!a.has(t)){a.add(t);const e=await this.originalConfigsPromise,n=e.configs.findIndex(o=>o.id===t);n!==-1&&(e.configs[n]=ar(this.configs[this.selectedIdx].config))}}setCurrentIndex(t){this.selectedIdx=t,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList(),Pt().then(()=>this.markCurrentPresetAsLoaded())}getCurrentName(){return this.configs[this.selectedIdx].config.name}getCurrentNameForSearch(){return this.getCurrentName().replace(/([\\"])/g,"\\$1")}setCurrentName(t){if(this.configs[this.selectedIdx].config.name===t)return;const a=this.ensureNewNameUnique(t),e=this.configs[this.selectedIdx].config;e.name=a,e.id&&this.modifiedConfigs.add(e.id),this.sortConfigs(),this.updateConfigList()}addConfig(t){this.addConfigFrom(t,this.defaults)}cloneConfig(t){this.addConfigFrom(t,this.configs[this.selectedIdx].config.config)}addConfigFrom(t,a){const e=this.ensureNewNameUnique(t),o={config:new $n({id:0n,name:e,config:new hn(ar(a))}),useCount:0};this.configs.push(o),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const t=this.configs[this.selectedIdx].config.id;if(t===1n)throw Error("can't remove default config");t!==0n&&(this.removedConfigs.push(t),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1);const a=Math.max(0,this.selectedIdx-1);this.setCurrentIndex(a)}dataForSaving(t){const e=[...this.configs.map(n=>n.config).filter((n,o)=>o!==this.selectedIdx&&(n.id===0n||this.modifiedConfigs.has(n.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:e,mode:t,cardStateCustomizer:Le(this.cardStateCustomizer),limits:Le(this.deckLimits),newCardsIgnoreReviewLimit:Le(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Le(this.applyAllParentLimits),fsrs:Le(this.fsrs),fsrsReschedule:Le(this.fsrsReschedule),fsrsHealthCheck:Le(this.fsrsHealthCheck)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(t){await mn(this.dataForSaving(t))}onCurrentConfigChanged(t){const a=this.configs[this.selectedIdx].config;Ur(t,a.config)||(a.config=t,a.id&&this.modifiedConfigs.add(a.id))}onCurrentAuxDataChanged(t){const a=this.getCurrentAuxData();Ur(a,t)||this.currentConfig.update(e=>{const n=new TextEncoder().encode(JSON.stringify(t));return e.other=n,e})}ensureNewNameUnique(t){return this.configs.findIndex(e=>e.config.name===t)!==-1?t+(new Date().getTime()/1e3).toFixed(0):t}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var t;(t=this.configListSetter)==null||t.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return ar(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const t=this.configs[this.selectedIdx].config.config;return Ku(t.other)}sortConfigs(){const t=this.configs[this.selectedIdx].config.name;this.configs.sort((a,e)=>Tn(a.config.name,e.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(a=>a.config.name==t)}getConfigList(){return this.configs.map((a,e)=>{const n=a.useCount+(e===this.selectedIdx?1:0);return{name:a.config.name,current:e===this.selectedIdx,idx:e,useCount:n}})}getAllConfigs(){return ar({configs:this.configs.map(t=>t.config),cardStateCustomizer:Le(this.cardStateCustomizer),limits:Le(this.deckLimits),newCardsIgnoreReviewLimit:Le(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Le(this.applyAllParentLimits),fsrs:Le(this.fsrs),fsrsReschedule:Le(this.fsrsReschedule),currentConfig:Le(this.currentConfig)})}async isModified(){const t=await this.originalConfigsPromise,a=this.getAllConfigs();return!qu(t,a,(e,n)=>{if(typeof e=="number"&&typeof n=="number")return Math.fround(e)===Math.fround(n)})}resolveOriginalConfigs(){this.originalConfigsResolve(this.getAllConfigs())}}function Ku(s){if(!s.length)return{};let t;try{t=JSON.parse(new TextDecoder().decode(s))}catch{return console.log("invalid json in deck config"),{}}return t.constructor!==Object?(console.log("invalid object in deck config"),{}):t}function Xu(){return new pn({})}class mt{constructor(t,a,e,n,o){$e(this,"title");$e(this,"value");$e(this,"setter");$e(this,"disabledValue");$e(this,"startValue");$e(this,"initialValue");this.title=t,this.value=this.initialValue=a,this.setter=e,this.disabledValue=n,this.startValue=o}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(t){var a,e;this.value=(e=(a=this.value)!=null?a:this.startValue)!=null?e:t,this.setter(this.value)}setValue(t){this.value=t,this.setter(t)}}async function Nr(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await Pt()}function wr(s){return s.fsrsParams6?s.fsrsParams6:s.fsrsParams5?s.fsrsParams5:s.fsrsParams4}const Zu=async({params:s})=>{const t=Number(s.deckId),a=BigInt(t),e=await yn({did:a});return{state:new Yu(BigInt(a),e)}},zf=Object.freeze(Object.defineProperty({__proto__:null,load:Zu},Symbol.toStringTag,{value:"Module"}));bs("svelte",Wn);bs("svelte/store",$u);function Ju(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(c,"$components",a),n=()=>ve(l,"$auxData",a);let o=N(t,"state",8);const c=o().addonComponents,l=o().currentAuxData;ke();var u=et(),h=ne(u);{var p=$=>{rt($,{title:"Add-ons",children:(m,T)=>{var y=et(),d=ne(y);Xt(d,1,e,ur,(k,P)=>{var R=et(),x=ne(R);xr(x,()=>r(P).component,(E,q)=>{q(E,_s(()=>r(P),{get data(){return bt(),n()},set data(z){ut(l,z)},$$legacy:!0}))}),v(k,R)}),v(m,y)},$$slots:{default:!0}})};De(h,$=>{e().length&&$(p)})}v(s,u),we()}function _r(s,t){let a,e;if(t instanceof Element){if(a=t,e=Array.prototype.indexOf.call(s,a),e<0)return null}else if(typeof t=="string"){const n=s.namedItem(t);if(!n||(a=n,e=Array.prototype.indexOf.call(s,a),e<0))return null}else if(t<0){e=s.length+t;const n=s.item(e);if(!n)return null;a=n}else{e=t;const n=s.item(e);if(!n)return null;a=n}return[a,e]}class ec{constructor(t){$e(this,"parent");this.parent=t}insertElement(t,a){const e=_r(this.parent.children,a);if(!e)return-1;const[n,o]=e;return this.parent.insertBefore(t,n[0]),o}appendElement(t,a){var l;const e=_r(this.parent.children,a);if(!e)return-1;const[n,o]=e,c=(l=n.nextElementSibling)!=null?l:null;return this.parent.insertBefore(t,c),o+1}updateElement(t,a){const e=_r(this.parent.children,a);return e?(t(...e),!0):!1}}function tc(s){return new ec(s)}function rc(s){return s.nodeType===Node.ELEMENT_NODE}function sc(s){function t(e){Mn(s,e)}return[{get(){return Rr(s)},available(){return Nn(s)}},t]}function nc(s,t,a,e){const n=Me([]);n.subscribe(t);function o(y,d){n.update(k=>(k.splice(y,0,d),k))}const[c,l]=Or(),u=c.then(tc),h=Me([]);async function p(y,d){const[k,P]=Or(),R=await u,x=s();function E(S){return!y.id||S.id===y.id}async function q(S,M){for(const O of S)for(const C of O.addedNodes){if(!rc(C)||!E(C))continue;const H=d(C,R);return H>=0&&o(H,x),P(void 0),M.disconnect()}}new MutationObserver(q).observe(R.parent,{childList:!0});const F={component:y,hostProps:x};return h.update(S=>(S.push(F),S)),await k,{destroy(){h.update(S=>(Tl(S,F),S))}}}async function $(y,d){return(await u).updateElement((P,R)=>{n.update(x=>(x[R]=y(x[R]),x))},d)}const m=e({addComponent:p,updateProps:$});function T(){const y=s();return n.update(d=>(d.push(y),d)),y}return a({getProps:T}),{dynamicSlotted:h,resolveSlotContainer:l,slotsInterface:m}}function ac(){return{detach:Me(!1)}}function oc({addComponent:s,updateProps:t}){function a(l,u=0){return s(l,(h,p)=>p.insertElement(h,u))}function e(l,u=-1){return s(l,(h,p)=>p.appendElement(h,u))}function n(l){return t(u=>(u.detach.set(!1),u),l)}function o(l){return t(u=>(u.detach.set(!0),u),l)}function c(l){return t(u=>(u.detach.update(h=>!h),u),l)}return{insert:a,append:e,show:n,hide:o,toggle:c}}const ic=Symbol("dynamicSlotting"),[hs,lc]=sc(ic);var uc=K('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function at(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(m,"$dynamicSlotted",a);function n(P){return P}let o=N(t,"slotHost",8),c=N(t,"createProps",8,ac),l=N(t,"updatePropsList",8,n),u=N(t,"setSlotHostContext",8,lc),h=N(t,"createInterface",8,oc);const{slotsInterface:p,resolveSlotContainer:$,dynamicSlotted:m}=nc(c(),l(),u(),h());let T=N(t,"api",8);Object.assign(T(),p),ke();var y=uc(),d=G(y);yt(d,t,"default",{});var k=g(d,2);Xt(k,1,e,({component:P,hostProps:R})=>P.id,(P,R)=>{let x=()=>r(R).component,E=()=>r(R).hostProps;var q=et(),z=ne(q);xr(z,o,(F,S)=>{S(F,{get id(){return x().id},get hostProps(){return E()},children:(M,O)=>{var C=et(),i=ne(C);xr(i,()=>x().component,(H,L)=>{L(H,_s(()=>x().props))}),v(M,C)},$$slots:{default:!0}})}),v(P,q)}),A(y),Ol(y,P=>$==null?void 0:$(P)),v(s,y),we()}var cc=K('<div class="item svelte-u5rx4p"><!></div>');function Q(s,t){var p;Ce(t,!1);const a=Ie(),e=()=>ve(c,"$detach",a);let n=N(t,"id",8,void 0),o=N(t,"hostProps",8,void 0);hs.available()||console.log("Item: should always have a slotHostContext");const{detach:c}=(p=o())!=null?p:hs.get().getProps();ke();var l=cc(),u=G(l);{var h=$=>{var m=et(),T=ne(m);yt(T,t,"default",{}),v($,m)};De(u,$=>{e()||$(h)})}A(l),D(()=>Je(l,"id",n())),v(s,l),we()}var dc=K(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function xt(s,t){Ce(t,!1);let a=N(t,"title",8);ke(),ee();var e=dc(),n=ne(e),o=g(n);D(()=>Je(o,"title",br()));var c=G(o);lr(c,{icon:Il}),A(o),D(()=>{var l;return V(n,`${(l=a())!=null?l:""} `)}),v(s,e),we()}var fc=K('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),gc=K('<div class="m-2"><!></div>');function vc(s,t){let a=N(t,"value",12),e=N(t,"title",8);var n=gc(),o=G(n);St(o,{children:(c,l)=>{var u=fc(),h=G(u),p=G(h);xt(p,{get title(){return e()}}),A(h);var $=g(h,2),m=G($);ks(m),A($),A(u),er(m,a),v(c,u)},$$slots:{default:!0,revert:(c,l)=>{Jt(c,{slot:"revert",defaultValue:"",get value(){return a()},set value(u){a(u)},$$legacy:!0})}}}),A(n),v(s,n)}var $c=K('<span class="invisible svelte-xwrhci"> </span>'),hc=K('<span class="suffix svelte-xwrhci"></span>'),mc=K('<div class="spinner decrement svelte-xwrhci" tabindex="-1" role="button"><!></div> <div class="spinner increment svelte-xwrhci" tabindex="-1" role="button"><!></div>',1),pc=K('<div class="spin-box svelte-xwrhci"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-xwrhci"> <!> <!></div>');function Zs(s,t){Ce(t,!1);const a=b();let e=N(t,"value",12),n=N(t,"step",8,1),o=N(t,"min",8,1),c=N(t,"max",8,9999),l=N(t,"percentage",8,!1),u=b(),h=N(t,"focused",12,!1),p=b();function $(_){Number.isNaN(_)||e(Math.min(c(),Math.max(o(),_))),Pt().then(()=>{Et(u,r(u).value=r(T)),x(r(T))})}function m(_){if(Math.floor(_)===_)return 0;const B=_.toString().split(".")[1].length||0,W=l()?B-2:B;return Math.max(0,W)}let T=b();function y(){$(parseFloat(this.value)/r(p))}function d(_){h()&&($(e()+(_.deltaY<0?n():-n())),_.preventDefault())}function k(_){$(e()+_),r(z)&&setTimeout(()=>k(_),F)}const P=[1500,1250,1e3,750,500,250];async function R(_){f(z,!0),F=128,f(S,setTimeout(_,250));for(const B of P)F=await new Promise(W=>setTimeout(()=>W(r(z)?F/2:128),B))}function x(_){f(q,Un({pct:_}).replaceAll("%","-%-").split("-"))}function E(){x(r(u).value)}let q=b(),z=b(!1),F,S=b();te(()=>je(l()),()=>{f(p,l()?100:1)}),te(()=>(je(e()),r(p),je(n())),()=>{f(T,(e()*r(p)).toFixed(m(n())))}),te(()=>r(T),()=>{x(r(T))}),te(()=>(je(l()),r(q)),()=>{f(a,l()&&!r(q)[0]?"2.2ch":void 0)}),Ve(),ke();var M=pc(),O=G(M);gt(O),Lt(O,_=>f(u,_),()=>r(u));var C=g(O,2);{var i=_=>{var B=hc();Xt(B,5,()=>r(q),ur,(W,re)=>{var X=et(),U=ne(X);{var ue=ce=>{var xe=Y("%");v(ce,xe)},_e=ce=>{var xe=$c(),Se=G(xe,!0);A(xe),D(()=>V(Se,r(re))),v(ce,xe)};De(U,ce=>{r(re)=="%"?ce(ue):ce(_e,!1)})}v(W,X)}),A(B),v(_,B)};De(C,_=>{l()&&_(i)})}var H=g(C,2);{var L=_=>{var B=mc(),W=ne(B);D(()=>Je(W,"title",jn()));var re=G(W);is(re,{children:(ue,_e)=>{lr(ue,{icon:js})},$$slots:{default:!0}}),A(W);var X=g(W,2);D(()=>Je(X,"title",qn()));var U=G(X);is(U,{children:(ue,_e)=>{lr(ue,{icon:Al})},$$slots:{default:!0}}),A(X),D(()=>{pt(W,"active",e()>o()),pt(X,"active",e()<c())}),be("click",W,()=>{r(u).focus(),e()>o()&&k(-n())}),be("mousedown",W,()=>R(()=>{e()>o()&&k(-n())})),be("mouseup",W,()=>{clearTimeout(r(S)),f(z,!1)}),be("click",X,()=>{r(u).focus(),e()<c()&&k(n())}),be("mousedown",X,()=>R(()=>{e()<c()&&k(n())})),be("mouseup",X,()=>{clearTimeout(r(S)),f(z,!1)}),v(_,B)};De(H,_=>{El()&&_(L)})}A(M),D(()=>{Je(O,"min",o()*r(p)),Je(O,"max",c()*r(p)),Je(O,"step",n()*r(p)),Ir(O,r(T)),Cl(O,"padding-left",r(a))}),be("blur",O,y),be("change",O,y),be("input",O,E),be("focusin",O,()=>h(!0)),be("focusout",O,()=>h(!1)),be("wheel",M,d),v(s,M),we()}var yc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Cc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function ot(s,t){let a=N(t,"value",12),e=N(t,"defaultValue",8),n=N(t,"min",8,0),o=N(t,"max",8,9999),c=N(t,"step",8,.01),l=N(t,"percentage",8,!1),u=N(t,"focused",12,!1);var h=Cc(),p=ne(h);ze(p,()=>({"--cols":13})),Ne(p.lastChild,{children:($,m)=>{var T=yc(),y=ne(T);ze(y,()=>({"--col-size":7})),Ct(y.lastChild,{breakpoint:"xs",children:(k,P)=>{var R=et(),x=ne(R);yt(x,t,"default",{}),v(k,R)},$$slots:{default:!0}}),A(y);var d=g(y,2);ze(d,()=>({"--col-size":6})),Ct(d.lastChild,{breakpoint:"xs",children:(k,P)=>{St(k,{children:(R,x)=>{Zs(R,{get min(){return n()},get max(){return o()},get step(){return c()},get percentage(){return l()},get value(){return a()},set value(E){a(E)},get focused(){return u()},set focused(E){u(E)},$$legacy:!0})},$$slots:{default:!0,revert:(R,x)=>{Jt(R,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(E){a(E)},$$legacy:!0})}}})},$$slots:{default:!0}}),A(d),v($,T)},$$slots:{default:!0}}),A(p),v(s,h)}var wc=K("<!> <!>",1),_c=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),kc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Xe(s,t){let a=N(t,"value",12),e=N(t,"defaultValue",8),n=N(t,"min",8,0),o=N(t,"max",8,9999);var c=kc(),l=ne(c);ze(l,()=>({"--cols":13})),Ne(l.lastChild,{children:(u,h)=>{var p=_c(),$=ne(p);ze($,()=>({"--col-size":7})),Ct($.lastChild,{breakpoint:"xs",children:(T,y)=>{var d=et(),k=ne(d);yt(k,t,"default",{}),v(T,d)},$$slots:{default:!0}}),A($);var m=g($,2);ze(m,()=>({"--col-size":6})),Ct(m.lastChild,{breakpoint:"xs",children:(T,y)=>{Ne(T,{class:"flex-grow-1",children:(d,k)=>{var P=wc(),R=ne(P);yt(R,t,"tabs",{});var x=g(R,2);St(x,{children:(E,q)=>{Zs(E,{get min(){return n()},get max(){return o()},get value(){return a()},set value(z){a(z)},$$legacy:!0})},$$slots:{default:!0,revert:(E,q)=>{Jt(E,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(z){a(z)},$$legacy:!0})}}}),v(d,P)},$$slots:{default:!0}})},$$slots:{default:!0}}),A(m),v(u,p)},$$slots:{default:!0}}),A(l),v(s,c)}var Pc=K('<input type="date" class="svelte-67zife">'),bc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),xc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Sc=K("<div><!></div>");function Oc(s,t){Ce(t,!1);let a=N(t,"date",12);te(()=>je(a()),()=>{a(a()?a():"1970-01-01")}),Ve();var e=Sc(),n=G(e);St(n,{children:(o,c)=>{var l=xc(),u=ne(l);ze(u,()=>({"--cols":13})),Ne(u.lastChild,{children:(h,p)=>{var $=bc(),m=ne($);ze(m,()=>({"--col-size":7})),Ct(m.lastChild,{breakpoint:"xs",children:(y,d)=>{var k=et(),P=ne(k);yt(P,t,"default",{}),v(y,k)},$$slots:{default:!0}}),A(m);var T=g(m,2);ze(T,()=>({"--col-size":6})),Ct(T.lastChild,{breakpoint:"xs",children:(y,d)=>{var k=Pc();gt(k),er(k,a),v(y,k)},$$slots:{default:!0}}),A(T),v(h,$)},$$slots:{default:!0}}),A(u),v(o,l)},$$slots:{default:!0}}),A(e),v(s,e),we()}var Rc=K("<!> <!> <!> <!> <!>",1),Dc=K("<!> <!> <!>",1),Tc=K("<!> <!> <!> <!>",1);function Ic(s,t){Ce(t,!1);const a=Ie(),e=()=>ve($,"$config",a),n=()=>ve(y,"$fsrs",a),o=()=>ve(T,"$cardStateCustomizer",a),c=b(),l=b(),u=b();let h=N(t,"state",8),p=N(t,"api",8);const $=h().currentConfig,m=h().defaults,T=h().cardStateCustomizer,y=h().fsrs,d={maximumInterval:{title:xs(),help:Qn(),url:ye.DeckOptions.maximumInterval},historicalRetention:{title:Qr(),help:Yn(),sched:Ke.FSRS},ignoreRevlogsBeforeMs:{title:Yr(),help:Kn(),sched:Ke.FSRS},startingEase:{title:Xn(),help:Zn(),url:ye.DeckOptions.startingEase,sched:Ke.SM2},easyBonus:{title:Jn(),help:ea(),url:ye.DeckOptions.easyBonus,sched:Ke.SM2},intervalModifier:{title:ta(),help:ra(),url:ye.DeckOptions.intervalModifier,sched:Ke.SM2},hardInterval:{title:sa(),help:na(),url:ye.DeckOptions.hardInterval,sched:Ke.SM2},newInterval:{title:aa(),help:oa(),url:ye.DeckOptions.newInterval,sched:Ke.SM2},customScheduling:{title:ia(),help:la(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling"}},k=Object.values(d);let P=b(null),R="";function x(i){R!=i&&(q&&i&&i!="1970-01-01"?(R=i,Cn({search:e().paramSearch||`preset:"${h().getCurrentNameForSearch()}" -is:suspended`,ignoreRevlogsBeforeDate:i}).then(H=>{f(P,H)})):f(P,null),q=!0)}let E=b(void 0),q=!0;const z=1e3;let F=b("alert-warning"),S=b(),M=b();function O(i){r(S).show(),r(M).to(i)}te(()=>e(),()=>{f(c,e().maximumReviewInterval<50?"alert-danger":"alert-warning")}),te(()=>(e(),lt),()=>{f(l,e().maximumReviewInterval<180?ua():"")}),te(()=>(r(E),e()),()=>{clearTimeout(r(E)),f(E,setTimeout(()=>{x(e().ignoreRevlogsBeforeDate)},z))}),te(()=>r(P),()=>{r(P)&&(Number(r(P).included)/Number(r(P).total)<.1?f(F,"alert-danger"):r(P).included!=r(P).total?f(F,"alert-warning"):f(F,"alert-info"))}),te(()=>(r(P),lt),()=>{f(u,r(P)?ca({included:r(P).included.toString(),totalCards:r(P).total.toString()}):"")}),Ve(),ke();var C=de(()=>Kr());rt(s,{get title(){return r(C)},children:(i,H)=>{at(i,{slotHost:Q,get api(){return p()},children:(L,_)=>{var B=Tc(),W=ne(B);Q(W,{children:(ce,xe)=>{Xe(ce,{get defaultValue(){return m.maximumReviewInterval},min:1,max:365*100,get value(){return e().maximumReviewInterval},set value(Se){Z($,w(e).maximumReviewInterval=Se,w(e))},children:(Se,le)=>{J(Se,{$$events:{click:()=>O(Object.keys(d).indexOf("maximumInterval"))},children:(fe,Oe)=>{ee();var qe=Y();D(()=>V(qe,d.maximumInterval.title)),v(fe,qe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var re=g(W,2);Q(re,{children:(ce,xe)=>{Fe(ce,{get warning(){return r(l)},get className(){return r(c)}})},$$slots:{default:!0}});var X=g(re,2);{var U=ce=>{var xe=Rc(),Se=ne(xe);Q(Se,{children:(he,Te)=>{ot(he,{get defaultValue(){return m.initialEase},min:1.31,max:5,get value(){return e().initialEase},set value(se){Z($,w(e).initialEase=se,w(e))},children:(se,He)=>{J(se,{$$events:{click:()=>O(Object.keys(d).indexOf("startingEase"))},children:(me,Ue)=>{ee();var Pe=Y();D(()=>V(Pe,d.startingEase.title)),v(me,Pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var le=g(Se,2);Q(le,{children:(he,Te)=>{ot(he,{get defaultValue(){return m.easyMultiplier},min:1,max:5,get value(){return e().easyMultiplier},set value(se){Z($,w(e).easyMultiplier=se,w(e))},children:(se,He)=>{J(se,{$$events:{click:()=>O(Object.keys(d).indexOf("easyBonus"))},children:(me,Ue)=>{ee();var Pe=Y();D(()=>V(Pe,d.easyBonus.title)),v(me,Pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var fe=g(le,2);Q(fe,{children:(he,Te)=>{ot(he,{get defaultValue(){return m.intervalMultiplier},min:.5,max:2,get value(){return e().intervalMultiplier},set value(se){Z($,w(e).intervalMultiplier=se,w(e))},children:(se,He)=>{J(se,{$$events:{click:()=>O(Object.keys(d).indexOf("intervalModifier"))},children:(me,Ue)=>{ee();var Pe=Y();D(()=>V(Pe,d.intervalModifier.title)),v(me,Pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Oe=g(fe,2);Q(Oe,{children:(he,Te)=>{ot(he,{get defaultValue(){return m.hardMultiplier},min:.5,max:1.3,get value(){return e().hardMultiplier},set value(se){Z($,w(e).hardMultiplier=se,w(e))},children:(se,He)=>{J(se,{$$events:{click:()=>O(Object.keys(d).indexOf("hardInterval"))},children:(me,Ue)=>{ee();var Pe=Y();D(()=>V(Pe,d.hardInterval.title)),v(me,Pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var qe=g(Oe,2);Q(qe,{children:(he,Te)=>{ot(he,{get defaultValue(){return m.lapseMultiplier},max:1,get value(){return e().lapseMultiplier},set value(se){Z($,w(e).lapseMultiplier=se,w(e))},children:(se,He)=>{J(se,{$$events:{click:()=>O(Object.keys(d).indexOf("newInterval"))},children:(me,Ue)=>{ee();var Pe=Y();D(()=>V(Pe,d.newInterval.title)),v(me,Pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(ce,xe)},ue=ce=>{var xe=Dc(),Se=ne(xe);ot(Se,{get defaultValue(){return m.historicalRetention},min:.5,max:1,percentage:!0,get value(){return e().historicalRetention},set value(Oe){Z($,w(e).historicalRetention=Oe,w(e))},children:(Oe,qe)=>{J(Oe,{$$events:{click:()=>O(Object.keys(d).indexOf("historicalRetention"))},children:(he,Te)=>{ee();var se=Y();D(()=>V(se,Qr())),v(he,se)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var le=g(Se,2);Q(le,{children:(Oe,qe)=>{Oc(Oe,{get date(){return e().ignoreRevlogsBeforeDate},set date(he){Z($,w(e).ignoreRevlogsBeforeDate=he,w(e))},children:(he,Te)=>{J(he,{$$events:{click:()=>O(Object.keys(d).indexOf("ignoreRevlogsBeforeMs"))},children:(se,He)=>{ee();var me=Y();D(()=>V(me,Yr())),v(se,me)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var fe=g(le,2);Q(fe,{children:(Oe,qe)=>{Fe(Oe,{get warning(){return r(u)},get className(){return r(F)}})},$$slots:{default:!0}}),v(ce,xe)};De(X,ce=>{n()?ce(ue,!1):ce(U)})}var _e=g(X,2);Q(_e,{children:(ce,xe)=>{vc(ce,{get title(){return d.customScheduling.title},get value(){return bt(),o()},set value(Se){ut(T,Se)},$$events:{click:()=>O(Object.keys(d).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0}}),v(L,B)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(i,H)=>{var L=de(()=>Kr());ct(i,{get title(){return r(L)},get url(){return ye.DeckOptions.advanced},slot:"tooltip",get fsrs(){return n()},helpSections:k,$$events:{mount:_=>{f(S,_.detail.modal),f(M,_.detail.carousel)}}})}}}),we()}var Ac=K("<!> <!>",1);function Ec(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(c,"$config",a);let n=N(t,"state",8),o=N(t,"api",8);const c=n().currentConfig,l=n().defaults,u={disableAutoplay:{title:da(),help:fa()},skipQuestionWhenReplaying:{title:ga(),help:va()}},h=Object.values(u);let p=b(),$=b();function m(y){r(p).show(),r($).to(y)}ke();var T=de(()=>Xr());rt(s,{get title(){return r(T)},children:(y,d)=>{at(y,{slotHost:Q,get api(){return o()},children:(k,P)=>{var R=Ac(),x=ne(R);Q(x,{children:(q,z)=>{We(q,{get defaultValue(){return l.disableAutoplay},get value(){return e().disableAutoplay},set value(F){Z(c,w(e).disableAutoplay=F,w(e))},children:(F,S)=>{J(F,{$$events:{click:()=>m(Object.keys(u).indexOf("disableAutoplay"))},children:(M,O)=>{ee();var C=Y();D(()=>V(C,u.disableAutoplay.title)),v(M,C)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=g(x,2);Q(E,{children:(q,z)=>{We(q,{get defaultValue(){return l.skipQuestionWhenReplayingAnswer},get value(){return e().skipQuestionWhenReplayingAnswer},set value(F){Z(c,w(e).skipQuestionWhenReplayingAnswer=F,w(e))},children:(F,S)=>{J(F,{$$events:{click:()=>m(Object.keys(u).indexOf("skipQuestionWhenReplaying"))},children:(M,O)=>{ee();var C=Y();D(()=>V(C,u.skipQuestionWhenReplaying.title)),v(M,C)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(k,R)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(y,d)=>{var k=de(()=>Xr());ct(y,{get title(){return r(k)},get url(){return ye.DeckOptions.audio},slot:"tooltip",helpSections:h,$$events:{mount:P=>{f(p,P.detail.modal),f($,P.detail.carousel)}}})}}}),we()}function Lc(){return[{label:$a(),value:ft.DECK},{label:ha(),value:ft.DECK_THEN_RANDOM_NOTES},{label:ma(),value:ft.LOWEST_POSITION},{label:pa(),value:ft.HIGHEST_POSITION},{label:ya(),value:ft.RANDOM_NOTES},{label:Ca(),value:ft.RANDOM_CARDS}]}function Mc(){return[{label:wa(),value:st.TEMPLATE},{label:_a(),value:st.NO_SORT},{label:ka(),value:st.TEMPLATE_THEN_RANDOM},{label:Pa(),value:st.RANDOM_NOTE_THEN_TEMPLATE},{label:Ss(),value:st.RANDOM_CARD}]}function Js(s){return[{label:ba(),value:tt.DAY},{label:xa(),value:tt.DAY_THEN_DECK},{label:Sa(),value:tt.DECK_THEN_DAY},{label:Oa(),value:tt.INTERVALS_ASCENDING},{label:Ra(),value:tt.INTERVALS_DESCENDING},...Bc(s),{label:Da(),value:tt.RETRIEVABILITY_ASCENDING},{label:Ta(),value:tt.RETRIEVABILITY_DESCENDING},{label:Ss(),value:tt.RANDOM},{label:Ia(),value:tt.ADDED},{label:Aa(),value:tt.REVERSE_ADDED}]}function ms(){return[{label:Ea(),value:pr.MIX_WITH_REVIEWS},{label:La(),value:pr.AFTER_REVIEWS},{label:Ma(),value:pr.BEFORE_REVIEWS}]}function Nc(){return[{label:Na(),value:At.SUSPEND},{label:Fa(),value:At.TAG_ONLY}]}function Fc(){return[{label:Va(),value:Pr.DUE},{label:Ha(),value:Pr.RANDOM}]}function Vc(){return[{label:Ba(),value:Qt.BURY_CARD},{label:za(),value:Qt.ANSWER_AGAIN},{label:Wa(),value:Qt.ANSWER_GOOD},{label:Ga(),value:Qt.ANSWER_HARD},{label:ja(),value:Qt.SHOW_REMINDER}]}function Hc(){return[{label:qa(),value:qr.SHOW_ANSWER},{label:Ua(),value:qr.SHOW_REMINDER}]}function Bc(s){const t=[{label:s?Qa():Ya(),value:tt.EASE_ASCENDING},{label:s?Ka():Xa(),value:tt.EASE_DESCENDING}];return s&&t.reverse(),t}var zc=K("<!> <!> <!> <!> <!>",1);function Wc(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(c,"$config",a);let n=N(t,"state",8),o=N(t,"api",8);const c=n().currentConfig,l=n().defaults,u={secondsToShowQuestion:{title:Za(),help:Ja()},secondsToShowAnswer:{title:eo(),help:to()},waitForAudio:{title:ro(),help:so()},questionAction:{title:no(),help:ao()},answerAction:{title:oo(),help:io()}},h=Object.values(u);let p=b(),$=b();function m(y){r(p).show(),r($).to(y)}ke();var T=de(()=>Zr());rt(s,{get title(){return r(T)},children:(y,d)=>{at(y,{slotHost:Q,get api(){return o()},children:(k,P)=>{var R=zc(),x=ne(R);Q(x,{children:(S,M)=>{ot(S,{get defaultValue(){return l.secondsToShowQuestion},step:.1,get value(){return e().secondsToShowQuestion},set value(O){Z(c,w(e).secondsToShowQuestion=O,w(e))},children:(O,C)=>{J(O,{$$events:{click:()=>m(Object.keys(u).indexOf("secondsToShowQuestion"))},children:(i,H)=>{ee();var L=Y();D(()=>V(L,u.secondsToShowQuestion.title)),v(i,L)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=g(x,2);Q(E,{children:(S,M)=>{ot(S,{get defaultValue(){return l.secondsToShowAnswer},step:.1,get value(){return e().secondsToShowAnswer},set value(O){Z(c,w(e).secondsToShowAnswer=O,w(e))},children:(O,C)=>{J(O,{$$events:{click:()=>m(Object.keys(u).indexOf("secondsToShowAnswer"))},children:(i,H)=>{ee();var L=Y();D(()=>V(L,u.secondsToShowAnswer.title)),v(i,L)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var q=g(E,2);Q(q,{children:(S,M)=>{We(S,{get defaultValue(){return l.waitForAudio},get value(){return e().waitForAudio},set value(O){Z(c,w(e).waitForAudio=O,w(e))},children:(O,C)=>{J(O,{$$events:{click:()=>m(Object.keys(u).indexOf("waitForAudio"))},children:(i,H)=>{ee();var L=Y();D(()=>V(L,u.waitForAudio.title)),v(i,L)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var z=g(q,2);Q(z,{children:(S,M)=>{var O=de(Hc);it(S,{get defaultValue(){return l.questionAction},get choices(){return r(O)},get value(){return e().questionAction},set value(C){Z(c,w(e).questionAction=C,w(e))},children:(C,i)=>{J(C,{$$events:{click:()=>m(Object.keys(u).indexOf("questionAction"))},children:(H,L)=>{ee();var _=Y();D(()=>V(_,u.questionAction.title)),v(H,_)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var F=g(z,2);Q(F,{children:(S,M)=>{var O=de(Vc);it(S,{get defaultValue(){return l.answerAction},get choices(){return r(O)},get value(){return e().answerAction},set value(C){Z(c,w(e).answerAction=C,w(e))},children:(C,i)=>{J(C,{$$events:{click:()=>m(Object.keys(u).indexOf("answerAction"))},children:(H,L)=>{ee();var _=Y();D(()=>V(_,u.answerAction.title)),v(H,_)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(k,R)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(y,d)=>{var k=de(()=>Zr());ct(y,{get title(){return r(k)},get url(){return ye.DeckOptions.autoAdvance},slot:"tooltip",helpSections:h,$$events:{mount:P=>{f(p,P.detail.modal),f($,P.detail.carousel)}}})}}}),we()}var Gc=K("<!> <!> <!>",1);function jc(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(c,"$config",a);let n=N(t,"state",8),o=N(t,"api",8);const c=n().currentConfig,l=n().defaults,u=`

`+lo(),h={buryNewSiblings:{title:uo(),help:co()+u},buryReviewSiblings:{title:fo(),help:go()+u},buryInterdayLearningSiblings:{title:vo(),help:$o()+u}},p=Object.values(h);let $=b(),m=b();function T(d){r($).show(),r(m).to(d)}ke();var y=de(()=>Jr());rt(s,{get title(){return r(y)},children:(d,k)=>{at(d,{slotHost:Q,get api(){return o()},children:(P,R)=>{var x=Gc(),E=ne(x);Q(E,{children:(F,S)=>{We(F,{get defaultValue(){return l.buryNew},get value(){return e().buryNew},set value(M){Z(c,w(e).buryNew=M,w(e))},children:(M,O)=>{J(M,{$$events:{click:()=>T(Object.keys(h).indexOf("buryNewSiblings"))},children:(C,i)=>{ee();var H=Y();D(()=>V(H,h.buryNewSiblings.title)),v(C,H)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var q=g(E,2);Q(q,{children:(F,S)=>{We(F,{get defaultValue(){return l.buryReviews},get value(){return e().buryReviews},set value(M){Z(c,w(e).buryReviews=M,w(e))},children:(M,O)=>{J(M,{$$events:{click:()=>T(Object.keys(h).indexOf("buryReviewSiblings"))},children:(C,i)=>{ee();var H=Y();D(()=>V(H,h.buryReviewSiblings.title)),v(C,H)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var z=g(q,2);Q(z,{children:(F,S)=>{We(F,{get defaultValue(){return l.buryInterdayLearning},get value(){return e().buryInterdayLearning},set value(M){Z(c,w(e).buryInterdayLearning=M,w(e))},children:(M,O)=>{J(M,{$$events:{click:()=>T(Object.keys(h).indexOf("buryInterdayLearningSiblings"))},children:(C,i)=>{ee();var H=Y();D(()=>V(H,h.buryInterdayLearningSiblings.title)),v(C,H)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(P,x)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(d,k)=>{var P=de(()=>Jr());ct(d,{get title(){return r(P)},get url(){return ye.Studying.siblingsAndBurying},slot:"tooltip",helpSections:p,$$events:{mount:R=>{f($,R.detail.modal),f(m,R.detail.carousel)}}})}}}),we()}function qc(){}var Uc=K('<hr class="dropdown-divider">');function Qc(s){var t=Uc();v(s,t)}var Yc=K('<div class="save svelte-ymxw35"> </div>'),Kc=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Xc=K("<!> <!> <!> <!> <!> <!>",1),Zc=K('<div class="d-flex"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!></div>');function Jc(s,t){Ce(t,!1);const a=window.getComputedStyle(document.body).direction=="rtl",e=Ps();let n=N(t,"state",8);async function o(){if(await Pt(),n().defaultConfigSelected()){alert(ho());return}const y=(n().removalWilLForceFullSync()?mo()+" ":"")+po({name:n().getCurrentName()});if(confirm(In(y)))try{n().removeCurrentConfig(),e("remove")}catch(d){alert(d)}}async function c(y){await Nr(),n().save(y)}const l="Control+Enter";let u=b(!1);ke();var h=Zc(),p=G(h),$=de(()=>Ml(l));ze(p,()=>({"--border-left-radius":a?"0":"var(--border-radius)","--border-right-radius":a?"var(--border-radius)":"0"})),Fl(p.lastChild,{primary:!0,get tooltip(){return r($)},$$events:{click:()=>c(ir.NORMAL)},children:(y,d)=>{var k=Yc(),P=G(k,!0);D(()=>V(P,yo())),A(k),v(y,k)},$$slots:{default:!0}}),A(p);var m=g(p,2);Ll(m,{keyCombination:l,$$events:{action:()=>c(ir.NORMAL)}});var T=g(m,2);Rl(T,{get show(){return r(u)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>f(u,!1)},$$slots:{reference:(y,d)=>{var k=Kc(),P=ne(k);ze(P,()=>({"--border-right-radius":a?"0":"var(--border-radius)","--border-left-radius":a?"var(--border-radius)":"0"})),Hl(P.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>f(u,!r(u))},children:(R,x)=>{lr(R,{icon:js})},$$slots:{default:!0}}),A(P),v(y,k)},floating:(y,d)=>{Dl(y,{slot:"floating",children:(k,P)=>{var R=Xc(),x=ne(R);Yt(x,{$$events:{click:()=>e("add")},children:(M,O)=>{ee();var C=Y();D(()=>V(C,Os())),v(M,C)},$$slots:{default:!0}});var E=g(x,2);Yt(E,{$$events:{click:()=>e("clone")},children:(M,O)=>{ee();var C=Y();D(()=>V(C,Rs())),v(M,C)},$$slots:{default:!0}});var q=g(E,2);Yt(q,{$$events:{click:()=>e("rename")},children:(M,O)=>{ee();var C=Y();D(()=>V(C,Ds())),v(M,C)},$$slots:{default:!0}});var z=g(q,2);Yt(z,{$$events:{click:o},children:(M,O)=>{ee();var C=Y();D(()=>V(C,Co())),v(M,C)},$$slots:{default:!0}});var F=g(z,2);Qc(F);var S=g(F,2);Yt(S,{$$events:{click:()=>c(ir.APPLY_TO_CHILDREN)},children:(M,O)=>{ee();var C=Y();D(()=>V(C,wo())),v(M,C)},$$slots:{default:!0}}),v(k,R)},$$slots:{default:!0}})}}}),A(h),v(s,h),we()}var ed=K('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content svelte-18qg9px"><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" class="btn-close svelte-18qg9px" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text" class="form-control svelte-18qg9px"></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function td(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(wl,"$pageTheme",a),n=b();let o=N(t,"title",8),c=N(t,"prompt",8),l=N(t,"initialValue",8,""),u=N(t,"onOk",8);const h=Math.random().toString(36).substring(2),p=Rr(qs);let $=b(),m,T=b();function y(){u()(r(T).value),m.hide(),f(n,l())}function d(){m.hide(),f(n,l())}function k(){r(T).focus(),R(!0)}function P(){R(!1)}const{set:R,remove:x}=Bl(d);Tr(()=>{r($).addEventListener("shown.bs.modal",k),r($).addEventListener("hidden.bs.modal",P),m=new _l(r($),{keyboard:!1}),p.set(h,m)}),Gn(()=>{x(),r($).removeEventListener("shown.bs.modal",k),r($).removeEventListener("hidden.bs.modal",P)}),te(()=>je(l()),()=>{f(n,l())}),Ve(),ke();var E=ed(),q=G(E),z=G(q),F=G(z),S=G(F),M=G(S,!0);A(S);var O=g(S,2);A(F);var C=g(F,2),i=G(C),H=G(i),L=G(H),_=G(L);A(L);var B=g(L,2);gt(B),Lt(B,U=>f(T,U),()=>r(T)),A(H),A(i),A(C);var W=g(C,2),re=G(W),X=g(re,2);return A(W),A(z),A(q),A(E),Lt(E,U=>f($,U),()=>r($)),D(()=>{var U;pt(z,"default-colors",e().isDark),V(M,o()),pt(O,"invert",e().isDark),V(_,`${(U=c())!=null?U:""}:`),pt(B,"nightMode",e().isDark)}),er(B,()=>r(n),U=>f(n,U)),be("submit",i,Nl(y)),be("click",re,d),be("click",X,y),v(s,E),Ge(t,"modalKey",h),we({modalKey:h})}var rd=K('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),sd=K('<!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function nd(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(l,"$configList",a),n=b(),o=b();let c=N(t,"state",8);const l=c().configList,u=Ps(),h=()=>u("presetchange");function p(C){const i=_o({decks:C.useCount});return`${C.name} (${i})`}function $(C){c().setCurrentIndex(C.detail.value),h()}function m(C){const i=C.trim();i.length&&(c().addConfig(i),h())}function T(C){const i=C.trim();i.length&&(c().cloneConfig(i),h())}function y(C){c().setCurrentName(C)}const d=Rr(qs);let k=b(),P=b(""),R=b(""),x=b(qc);function E(){f(R,Os()),f(x,m),f(P,""),d.get(r(k)).show()}function q(){f(R,Rs()),f(x,T),f(P,c().getCurrentName()),d.get(r(k)).show()}function z(){f(R,Ds()),f(x,y),f(P,c().getCurrentName()),d.get(r(k)).show()}te(()=>e(),()=>{f(n,e().findIndex(C=>C.current))}),te(()=>(e(),r(n)),()=>{f(o,p(e()[r(n)]))}),Ve(),ke();var F=sd(),S=ne(F),M=de(()=>ko());td(S,{get title(){return r(R)},get prompt(){return r(M)},get initialValue(){return r(P)},get onOk(){return r(x)},get modalKey(){return r(k)},set modalKey(C){f(k,C)},$$legacy:!0});var O=g(S,2);ze(O,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),Vl(O.lastChild,{breakpoint:"sm",children:(C,i)=>{var H=rd(),L=G(H);zn(L,{class:"flex-grow-1 mr1",get label(){return r(o)},get list(){return e()},parser:B=>({content:p(B),value:B.idx}),get value(){return r(n)},set value(B){f(n,B)},$$events:{change:$},$$legacy:!0});var _=g(L,2);Jc(_,{get state(){return c()},$$events:{add:E,clone:q,rename:z,remove:h}}),A(H),v(C,H)},$$slots:{default:!0}}),A(O),v(s,F),we()}var ad=K('<li class="svelte-11xpnuy"><button class="svelte-11xpnuy"> </button></li>'),od=K('<ul class="svelte-11xpnuy"></ul>');function ps(s,t){Ce(t,!1);let a=N(t,"tabs",8),e=N(t,"value",12),n=b(o());function o(){const h=a().slice().reverse().findIndex(p=>p.value!==null);return h===-1?0:a().length-h-1}function c(h){for(const[p,$]of a().entries())h===p?$.enable(e()):h>p?$.reset():$.disable()}const l=h=>()=>f(n,h);te(()=>r(n),()=>{c(r(n))}),te(()=>(je(a()),r(n)),()=>{var h;e((h=a()[r(n)].value)!=null?h:0)}),te(()=>(je(a()),r(n),je(e())),()=>{a()[r(n)].setValue(e())}),Ve(),ke();var u=od();Xt(u,5,a,ur,(h,p,$)=>{var m=ad(),T=G(m),y=Fn(()=>l($)),d=G(T,!0);A(T),A(m),D(()=>{pt(m,"active",r(n)===$),V(d,r(p).title)}),be("click",T,function(...k){var P;(P=r(y))==null||P.apply(this,k)}),v(h,m)}),A(u),v(s,u),we()}var id=K("<!> <!> <!> <!> <!>",1);function ld(s,t){var L,_,B,W,re,X;Ce(t,!1);const a=Ie(),e=()=>ve($,"$config",a),n=()=>ve(m,"$limits",a),o=()=>ve(y,"$newCardsIgnoreReviewLimit",a),c=()=>ve(d,"$applyAllParentLimits",a),l=b();let u=N(t,"state",8),h=N(t,"api",8);function p(){Et(E,r(E)[0]=new mt(or(),e().newPerDay,U=>Z($,w(e).newPerDay=U,w(e)),e().newPerDay,null)),Et(q,r(q)[0]=new mt(or(),e().reviewsPerDay,U=>Z($,w(e).reviewsPerDay=U,w(e)),e().reviewsPerDay,null))}const $=u().currentConfig,m=u().deckLimits,T=u().defaults,y=u().newCardsIgnoreReviewLimit,d=u().applyAllParentLimits,k=`

`+Po()+`

`+bo(),P=`

`+xo()+k,R=br()+`

`+So(),x=br()+`

`+Oo(),E=b([new mt(or(),e().newPerDay,U=>Z($,w(e).newPerDay=U,w(e)),e().newPerDay,null),new mt(es(),(L=n().new)!=null?L:null,U=>Z(m,w(n).new=U!=null?U:void 0,w(n)),null,null),new mt(ts(),n().newTodayActive&&(_=n().newToday)!=null?_:null,U=>Z(m,w(n).newToday=U!=null?U:void 0,w(n)),null,(B=n().newToday)!=null?B:null)]),q=b([new mt(or(),e().reviewsPerDay,U=>Z($,w(e).reviewsPerDay=U,w(e)),e().reviewsPerDay,null),new mt(es(),(W=n().review)!=null?W:null,U=>Z(m,w(n).review=U!=null?U:void 0,w(n)),null,null),new mt(ts(),n().reviewTodayActive&&(re=n().reviewToday)!=null?re:null,U=>Z(m,w(n).reviewToday=U!=null?U:void 0,w(n)),null,(X=n().reviewToday)!=null?X:null)]);let z=b(0),F=b(0);const S={newLimit:{title:Ts(),help:Ro()+k,url:ye.DeckOptions.newCardsday},reviewLimit:{title:Is(),help:Do()+P,url:ye.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:As(),help:R,url:ye.DeckOptions.newCardsday},applyAllParentLimits:{title:To(),help:x,url:ye.DeckOptions.newCardsday}},M=Object.values(S);let O=b(),C=b();function i(U){r(O).show(),r(C).to(U)}te(()=>(r(z),r(F),lt),()=>{f(l,Math.min(9999,r(z)*10)>r(F)?Io({cards:r(z),expected:Math.min(9999,r(z)*10)}):"")}),Ve(),ke();var H=de(()=>rs());return rt(s,{get title(){return r(H)},children:(U,ue)=>{at(U,{slotHost:Q,get api(){return h()},children:(_e,ce)=>{var xe=id(),Se=ne(xe);Q(Se,{children:(he,Te)=>{Xe(he,{get defaultValue(){return T.newPerDay},get value(){return r(z)},set value(se){f(z,se)},children:(se,He)=>{J(se,{$$events:{click:()=>i(Object.keys(S).indexOf("newLimit"))},children:(me,Ue)=>{ee();var Pe=Y();D(()=>V(Pe,S.newLimit.title)),v(me,Pe)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(se,He)=>{ps(se,{slot:"tabs",get tabs(){return r(E)},get value(){return r(z)},set value(me){f(z,me)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var le=g(Se,2);Q(le,{children:(he,Te)=>{Xe(he,{get defaultValue(){return T.reviewsPerDay},get value(){return r(F)},set value(se){f(F,se)},children:(se,He)=>{J(se,{$$events:{click:()=>i(Object.keys(S).indexOf("reviewLimit"))},children:(me,Ue)=>{ee();var Pe=Y();D(()=>V(Pe,S.reviewLimit.title)),v(me,Pe)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(se,He)=>{ps(se,{slot:"tabs",get tabs(){return r(q)},get value(){return r(F)},set value(me){f(F,me)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var fe=g(le,2);Q(fe,{children:(he,Te)=>{Fe(he,{get warning(){return r(l)}})},$$slots:{default:!0}});var Oe=g(fe,2);Q(Oe,{children:(he,Te)=>{We(he,{defaultValue:!1,get value(){return bt(),o()},set value(se){ut(y,se)},children:(se,He)=>{J(se,{$$events:{click:()=>i(Object.keys(S).indexOf("newCardsIgnoreReviewLimit"))},children:(me,Ue)=>{xt(me,{get title(){return S.newCardsIgnoreReviewLimit.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var qe=g(Oe,2);Q(qe,{children:(he,Te)=>{We(he,{defaultValue:!1,get value(){return bt(),c()},set value(se){ut(d,se)},children:(se,He)=>{J(se,{$$events:{click:()=>i(Object.keys(S).indexOf("applyAllParentLimits"))},children:(me,Ue)=>{xt(me,{get title(){return S.applyAllParentLimits.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(_e,xe)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(U,ue)=>{var _e=de(()=>rs());ct(U,{get title(){return r(_e)},get url(){return ye.DeckOptions.dailyLimits},slot:"tooltip",helpSections:M,$$events:{mount:ce=>{f(O,ce.detail.modal),f(C,ce.detail.carousel)}}})}}}),Ge(t,"onPresetChange",p),we({onPresetChange:p})}var ud=K("<!> <!> <!> <!> <!>",1);function cd(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(l,"$config",a),n=()=>ve(h,"$fsrs",a);let o=N(t,"state",8),c=N(t,"api",8);const l=o().currentConfig,u=o().defaults,h=o().fsrs,p=`

`+Ao();let $=b([]);const m={newGatherPriority:{title:Eo(),help:Lo()+p},newCardSortOrder:{title:Mo(),help:No()+p},newReviewPriority:{title:Fo(),help:Vo()+p},interdayStepPriority:{title:Ho(),help:Bo()+p},reviewSortOrder:{title:Es(),help:zo()+p}},T=Object.values(m);let y=b(),d=b();function k(R){r(y).show(),r(d).to(R)}te(()=>(e(),r($),ft),()=>{switch(e().newCardGatherPriority){case ft.RANDOM_NOTES:f($,[st.TEMPLATE_THEN_RANDOM,st.RANDOM_NOTE_THEN_TEMPLATE]);break;case ft.RANDOM_CARDS:f($,[st.TEMPLATE_THEN_RANDOM,st.RANDOM_NOTE_THEN_TEMPLATE,st.RANDOM_CARD]);break;default:f($,[]);break}r($).includes(e().newCardSortOrder)&&Z(l,w(e).newCardSortOrder=0,w(e)),e().newCardSortOrder in st||Z(l,w(e).newCardSortOrder=0,w(e))}),Ve(),ke();var P=de(()=>ss());rt(s,{get title(){return r(P)},children:(R,x)=>{at(R,{slotHost:Q,get api(){return c()},children:(E,q)=>{var z=ud(),F=ne(z);Q(F,{children:(i,H)=>{var L=de(Lc);it(i,{get defaultValue(){return u.newCardGatherPriority},get choices(){return r(L)},get value(){return e().newCardGatherPriority},set value(_){Z(l,w(e).newCardGatherPriority=_,w(e))},children:(_,B)=>{J(_,{$$events:{click:()=>k(Object.keys(m).indexOf("newGatherPriority"))},children:(W,re)=>{ee();var X=Y();D(()=>V(X,m.newGatherPriority.title)),v(W,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var S=g(F,2);Q(S,{children:(i,H)=>{var L=de(Mc);it(i,{get defaultValue(){return u.newCardSortOrder},get choices(){return r(L)},get disabledChoices(){return r($)},get value(){return e().newCardSortOrder},set value(_){Z(l,w(e).newCardSortOrder=_,w(e))},children:(_,B)=>{J(_,{$$events:{click:()=>k(Object.keys(m).indexOf("newCardSortOrder"))},children:(W,re)=>{ee();var X=Y();D(()=>V(X,m.newCardSortOrder.title)),v(W,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var M=g(S,2);Q(M,{children:(i,H)=>{var L=de(ms);it(i,{get defaultValue(){return u.newMix},get choices(){return r(L)},get value(){return e().newMix},set value(_){Z(l,w(e).newMix=_,w(e))},children:(_,B)=>{J(_,{$$events:{click:()=>k(Object.keys(m).indexOf("newReviewPriority"))},children:(W,re)=>{ee();var X=Y();D(()=>V(X,m.newReviewPriority.title)),v(W,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var O=g(M,2);Q(O,{children:(i,H)=>{var L=de(ms);it(i,{get defaultValue(){return u.interdayLearningMix},get choices(){return r(L)},get value(){return e().interdayLearningMix},set value(_){Z(l,w(e).interdayLearningMix=_,w(e))},children:(_,B)=>{J(_,{$$events:{click:()=>k(Object.keys(m).indexOf("interdayStepPriority"))},children:(W,re)=>{ee();var X=Y();D(()=>V(X,m.interdayStepPriority.title)),v(W,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var C=g(O,2);Q(C,{children:(i,H)=>{var L=de(()=>Js(n()));it(i,{get defaultValue(){return u.reviewOrder},get choices(){return r(L)},get value(){return e().reviewOrder},set value(_){Z(l,w(e).reviewOrder=_,w(e))},children:(_,B)=>{J(_,{$$events:{click:()=>k(Object.keys(m).indexOf("reviewSortOrder"))},children:(W,re)=>{ee();var X=Y();D(()=>V(X,m.reviewSortOrder.title)),v(W,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(E,z)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(R,x)=>{var E=de(()=>ss());ct(R,{get title(){return r(E)},get url(){return ye.DeckOptions.displayOrder},slot:"tooltip",helpSections:T,$$events:{mount:q=>{f(y,q.detail.modal),f(d,q.detail.carousel)}}})}}}),we()}var dd=K('<textarea class="w-100 svelte-29jwoy"></textarea>');function fd(s,t){Ce(t,!1);let a=N(t,"value",12),e=N(t,"defaults",8),n=b(),o=b();function c(){r(o)&&(Et(o,r(o).style.height="auto"),Et(o,r(o).style.height=`${r(o).scrollHeight+2}px`))}function l($){return $.map(m=>m.toFixed(4)).join(", ")}const u=[0,17,19,21];function h($){const m=$.target,T=m.value.replace(/ /g,"").split(",").filter(y=>y).map(y=>Number(y));u.includes(T.length)?a(T):(alert(Wo()),m.value=r(n))}te(()=>(je(a()),Pt),()=>{f(n,l(a())),Pt().then(c)}),Ve(),ke();var p=dd();be("resize",Vn,c),ks(p),D(()=>Je(p,"placeholder",l(e()))),Lt(p,$=>f(o,$),()=>r(o)),D(()=>Ir(p,r(n))),be("blur",p,h),v(s,p),we()}var gd=K("<!> <!>",1);function vd(s,t){let a=N(t,"value",12),e=N(t,"defaultValue",8),n=N(t,"defaults",8);var o=gd(),c=ne(o);yt(c,t,"default",{});var l=g(c,2);St(l,{children:(u,h)=>{fd(u,{get defaults(){return n()},get value(){return a()},set value(p){a(p)},$$legacy:!0})},$$slots:{default:!0,revert:(u,h)=>{Jt(u,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(p){a(p)},$$legacy:!0})}}}),v(s,o)}var $d=K('<input type="text" class="w-100 mb-1">');function hd(s,t){let a=N(t,"value",12),e=N(t,"placeholder",8);St(s,{children:(n,o)=>{var c=$d();gt(c),D(()=>Je(c,"placeholder",e())),er(c,a),v(n,c)},$$slots:{default:!0}})}var Ye=(s=>(s[s.time=0]="time",s[s.count=1]="count",s[s.memorized=2]="memorized",s))(Ye||{});function kr(s,t,a,e){const n=ls(s);if(n.selectAll(".lines").remove(),n.selectAll(".hover-columns").remove(),n.selectAll(".focus-line").remove(),n.selectAll(".legend").remove(),a.length==0)return us(n,!1),[];const o=n.transition().duration(600),c=new Date,l=a.map(i=>({...i,date:new Date(c.getTime()+i.x*24*60*60*1e3)})),u=c,h=cs(l,i=>i.date),p=uu().domain([u,h]).range([t.marginLeft,t.width-t.marginRight]);n.select(".x-ticks").call(i=>i.transition(o).call(Wl(p).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const $=i=>e==0?Cr(i,!0):i.toString(),m={1:l.map(i=>({...i,y:i.count})),0:l.map(i=>({...i,y:i.timeCost})),2:l.map(i=>({...i,y:i.memorized}))}[e],T=cs(m,i=>i.y),y=Gl().range([t.height-t.marginBottom,t.marginTop]).domain([0,T]).nice();n.select(".y-ticks").call(i=>i.transition(o).call(jl(y).ticks(t.height/50).tickSizeOuter(0).tickFormat($))).attr("direction","ltr"),n.select(".y-ticks .y-axis-title").remove(),n.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-t.marginLeft).attr("x",0-t.height/2).attr("font-size","1rem").attr("dy","1.1em").attr("fill","currentColor");const d=m.map(i=>[p(i.date),y(i.y),i.label]),k=hu(d,i=>Object.assign(i,{z:i[0][2]}),i=>i[2]),P=pu;n.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(k.entries())).join("path").attr("vector-effect","non-scaling-stroke").attr("stroke",(i,H)=>P[H%P.length]).attr("d",i=>ql()(i[1].map(H=>[H[0],H[1]]))).attr("data-group",i=>i[0]);const R=n.append("line").attr("class","focus-line").attr("y1",t.marginTop).attr("y2",t.height-t.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),x=Array.from(k.values()).reduce((i,H)=>i.length>H.length?i:H),E=t.width/x.length;n.append("g").attr("class","hover-columns").selectAll("rect").data(x).join("rect").attr("x",i=>i[0]-E/2).attr("y",t.marginTop).attr("width",E).attr("height",t.height-t.marginTop-t.marginBottom).attr("fill","transparent").on("mousemove",z).on("mouseout",()=>{R.style("opacity",0),ds()});const q={0:Cr,1:i=>Ls({reviews:Math.round(i)}),2:i=>qo({memorized:Math.round(i).toFixed(0)})}[e];function z(i,H){Ul(i,document.body);const L=p.invert(H[0]),_={};k.forEach((re,X)=>{const U=Ql(ce=>p.invert(ce[0])).left,ue=U(re,L),_e=re[ue];_e&&(_[X]=y.invert(_e[1]))}),R.attr("x1",H[0]).attr("x2",H[0]).style("opacity",1);const B=+((L.getTime()-Date.now())/(60*60*24*1e3)).toFixed();let W=`Date: ${An(L)}<br>In ${B} Days<br>`;for(const[re,X]of Object.entries(_))n.select(`path[data-group="${re}"]`).classed("hidden")||(W+=`<span style="color:${P[(parseInt(re)-1)%P.length]}"></span> #${re}: ${q(X)}<br>`);fs(W,i.pageX,i.pageY)}const F=n.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(k.keys())).join("g").attr("transform",(i,H)=>`translate(0,${H*20})`).attr("cursor","pointer").on("click",(i,H)=>O(i,H)).on("mousemove",M).on("mouseout",ds),S={1:Uo,0:({count:i})=>Cr(i),2:Qo}[e];function M(i,H){const L=m.filter(W=>W.label==H),_=e==2?L[L.length-1].memorized-L[0].memorized:Qu(L,W=>W.y),B=_/((L==null?void 0:L.length)||1);fs(`#${H}:<br/>
                ${Go()}: ${S({count:B})}<br/>
                ${jo()}: ${q(_)}`,i.pageX,i.pageY)}F.append("rect").attr("x",t.width-t.marginRight+36).attr("width",12).attr("height",12).attr("fill",(i,H)=>P[H%P.length]),F.append("text").attr("x",t.width-t.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(i=>`#${i}`);const O=(i,H)=>{const L=H,_=n.select(`path[data-group="${L}"]`),B=_.classed("hidden"),W=i.currentTarget;_.classed("hidden",!B),_.style("display",()=>B?null:"none"),ls(W).select("rect").style("opacity",B?1:.5)};return us(n,!0),[]}var md=K('<tr><td class="day svelte-47inpr"> </td><td colspan="3" class="svelte-47inpr"><input type="range" list="easy_day_steplist" class="svelte-47inpr"></td></tr>'),pd=K('<div class="easy-days-settings svelte-47inpr"><table class="svelte-47inpr"><thead><tr><th class="svelte-47inpr"></th><th class="header min-col svelte-47inpr"><span> </span></th><th class="header text-center svelte-47inpr"><span> </span></th><th class="header normal-col svelte-47inpr"><span> </span></th></tr></thead><tbody></tbody></table></div>');function en(s,t){Ce(t,!1);const a=[Yo(),Ko(),Xo(),Zo(),Jo(),ei(),ti()];let e=N(t,"values",28,()=>[0,0,0,0,0,0,0]);ke(),Q(s,{children:(n,o)=>{var c=pd(),l=G(c),u=G(l),h=G(u),p=g(G(h)),$=G(p),m=G($,!0);D(()=>V(m,ri())),A($),A(p);var T=g(p),y=G(T),d=G(y,!0);D(()=>V(d,si())),A(y),A(T);var k=g(T),P=G(k),R=G(P,!0);D(()=>V(R,ni())),A(P),A(k),A(h),A(u);var x=g(u);Xt(x,5,()=>a,ur,(E,q,z)=>{var F=md(),S=G(F),M=G(S,!0);A(S);var O=g(S),C=G(O);gt(C),Je(C,"step",.5),Je(C,"max",1),Je(C,"min",0),A(O),A(F),D(()=>V(M,r(q))),er(C,()=>e()[z],i=>e(e()[z]=i,!0)),v(E,F)}),A(x),A(l),A(c),v(n,c)},$$slots:{default:!0}}),we()}var yd=K(" <!>",1),Cd=K("<div> </div>"),wd=K('<label><input type="radio"> </label> <label><input type="radio"> </label> <label><input type="radio"> </label>',1),_d=K('<div class="radio-group svelte-18vh0ci"><!></div> <div class="svg-container svelte-18vh0ci"><svg class="svelte-18vh0ci"><!><!><!><!></svg></div> <!>',1),kd=K('<div class="modal svelte-18vh0ci" tabindex="-1"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header svelte-18vh0ci"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><!> <!> <!> <!> <!> <details><summary class="svelte-18vh0ci"> </summary> <!></details> <details><summary class="svelte-18vh0ci"> </summary> <!> <!> <!> <!> <!> <!></details> <details><summary class="svelte-18vh0ci"> </summary> <button><!></button> <!> <!></details> <button> </button> <button> </button> <button> </button> <!> <!></div></div></div></div>');function Pd(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(x,"$config",a),n=()=>ve(F,"$fsrs",a),o=()=>ve(i,"$newCardsIgnoreReviewLimit",a),c=b(),l=b(),u=b(),h=b(),p=b(),$=b(),m=[];let T=N(t,"shown",12,!1),y=N(t,"state",8),d=N(t,"simulateFsrsRequest",12),k=N(t,"computing",8),P=N(t,"openHelpModal",8),R=N(t,"onPresetChange",8);const x=y().currentConfig;let E=b(Ye.count),q=b([]),z=b(!1);const F=y().fsrs,S=eu();let M=b(null),O=0,C=b([]);const i=y().newCardsIgnoreReviewLimit;let H=b(!0),L=b(e().leechAction==At.SUSPEND),_=b(e().leechThreshold),B=b(null),W=b(!1),re=b(void 0);function X(I,oe){const ae=[];for(let ge=0;ge<I.length;ge++){let ie=0,Ae=0;for(let Ee=Math.max(0,ge-oe+1);Ee<=ge;Ee++)ie+=I[Ee],Ae++;ae.push(ie/Ae)}return ae}function U(I,oe){return I.map((ae,ge)=>ae+oe[ge])}function ue(I){return I?pi({num:I.toFixed(2)}):""}function _e(){d(d().daysToSimulate=r(c),!0),d(d().deckSize=r(l),!0),d(d().suspendAfterLapseCount=r(L)?r(_):void 0,!0),d(d().easyDaysPercentages=r($),!0)}function ce(I){return I?yi({count:I.current}):""}async function xe(){let I;_e();try{await Sr(async()=>{f(W,!0),I=await wn(d())},oe=>{oe.value.case==="computeRetention"&&f(re,oe.value.value)})}finally{f(W,!1),I&&f(B,I.optimalRetention)}}async function Se(){let I;_e();try{await Sr(async()=>{f(z,!0),I=await _n(d())},()=>{})}finally{if(f(z,!1),I){O+=1;const oe=U(I.dailyReviewCount,I.dailyNewCount),ae=I.accumulatedKnowledgeAcquisition;f(C,r(C).concat(I.dailyTimeCost.map((ge,ie)=>({x:ie,timeCost:ge,count:oe[ie],memorized:ae[ie],label:O})))),f(q,kr(r(M),S,r(C),r(E)))}}}function le(){f(C,r(C).filter(I=>I.label!==O)),O=Math.max(0,O-1),f(q,kr(r(M),S,r(C),r(E)))}te(()=>{},()=>{f(c,365)}),te(()=>{},()=>{f(l,0)}),te(()=>r(c),()=>{f(u,Math.ceil(r(c)/365))}),te(()=>(r(z),r(W)),()=>{f(h,r(z)||r(W))}),te(()=>r(re),()=>{f(p,ce(r(re)))}),te(()=>(r(M),r(C),r(H),r(u),r(E)),()=>{if(r(M)){let I=r(C);if(r(H)){const oe=r(C).reduce((ae,ge)=>(ae[ge.label]=ae[ge.label]||[],ae[ge.label].push(ge),ae),{});I=Object.values(oe).flatMap(ae=>{const ge=X(ae.map(Ee=>Ee.timeCost),r(u)),ie=X(ae.map(Ee=>Ee.count),r(u)),Ae=X(ae.map(Ee=>Ee.memorized),r(u));return ae.map((Ee,It)=>({...Ee,timeCost:ge[It],count:ie[It],memorized:Ae[It]}))})}f(q,kr(r(M),S,I,r(E)))}}),te(()=>e(),()=>{f($,[...e().easyDaysPercentages])}),Ve(),ke();var fe=kd(),Oe=G(fe),qe=G(Oe),he=G(qe),Te=G(he),se=G(Te,!0);D(()=>V(se,Ms())),A(Te);var He=g(Te,2);A(he);var me=g(he,2),Ue=G(me);Xe(Ue,{defaultValue:365,min:1,max:3650,get value(){return r(c)},set value(I){f(c,I)},children:(I,oe)=>{J(I,{$$events:{click:()=>P()("simulateFsrsReview")},children:(ae,ge)=>{ee();var ie=Y();D(()=>V(ie,ai())),v(ae,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Pe=g(Ue,2);Xe(Pe,{defaultValue:0,min:0,max:1e5,get value(){return r(l)},set value(I){f(l,I)},children:(I,oe)=>{J(I,{$$events:{click:()=>P()("simulateFsrsReview")},children:(ae,ge)=>{ee();var ie=Y();D(()=>V(ie,oi())),v(ae,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Mt=g(Pe,2);ot(Mt,{get defaultValue(){return e().desiredRetention},min:.7,max:.99,percentage:!0,get value(){return d().desiredRetention},set value(I){d(d().desiredRetention=I,!0)},children:(I,oe)=>{J(I,{$$events:{click:()=>P()("desiredRetention")},children:(ae,ge)=>{ee();var ie=Y();D(()=>V(ie,Ar())),v(ae,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Nt=g(Mt,2);Xe(Nt,{get defaultValue(){return e().newPerDay},min:0,max:9999,get value(){return d().newLimit},set value(I){d(d().newLimit=I,!0)},children:(I,oe)=>{J(I,{$$events:{click:()=>P()("simulateFsrsReview")},children:(ae,ge)=>{ee();var ie=Y();D(()=>V(ie,Ts())),v(ae,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ft=g(Nt,2);Xe(Ft,{get defaultValue(){return e().reviewsPerDay},min:0,max:9999,get value(){return d().reviewLimit},set value(I){d(d().reviewLimit=I,!0)},children:(I,oe)=>{J(I,{$$events:{click:()=>P()("simulateFsrsReview")},children:(ae,ge)=>{ee();var ie=Y();D(()=>V(ie,Is())),v(ae,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ot=g(Ft,2),Vt=G(Ot),tr=G(Vt,!0);D(()=>V(tr,Ns())),A(Vt);var vt=g(Vt,2);zl(vt,()=>r($),I=>{en(I,{get values(){return r($)},set values(oe){f($,oe)},$$legacy:!0})}),A(Ot);var Ht=g(Ot,2),Bt=G(Ht),dr=G(Bt,!0);D(()=>V(dr,ii())),A(Bt);var zt=g(Bt,2);Xe(zt,{get defaultValue(){return e().maximumReviewInterval},min:1,max:36500,get value(){return d().maxInterval},set value(I){d(d().maxInterval=I,!0)},children:(I,oe)=>{J(I,{$$events:{click:()=>P()("simulateFsrsReview")},children:(ae,ge)=>{ee();var ie=Y();D(()=>V(ie,xs())),v(ae,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Wt=g(zt,2),fr=de(()=>Js(n()));it(Wt,{get defaultValue(){return e().reviewOrder},get choices(){return r(fr)},get value(){return d().reviewOrder},set value(I){d(d().reviewOrder=I,!0)},children:(I,oe)=>{J(I,{$$events:{click:()=>P()("simulateFsrsReview")},children:(ae,ge)=>{ee();var ie=Y();D(()=>V(ie,Es())),v(ae,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var rr=g(Wt,2);We(rr,{get defaultValue(){return o()},get value(){return d().newCardsIgnoreReviewLimit},set value(I){d(d().newCardsIgnoreReviewLimit=I,!0)},children:(I,oe)=>{J(I,{$$events:{click:()=>P()("simulateFsrsReview")},children:(ae,ge)=>{var ie=de(()=>As());xt(ae,{get title(){return r(ie)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var sr=g(rr,2);We(sr,{defaultValue:!0,get value(){return r(H)},set value(I){f(H,I)},children:(I,oe)=>{J(I,{$$events:{click:()=>P()("simulateFsrsReview")},children:(ae,ge)=>{ee();var ie=Y();D(()=>V(ie,li())),v(ae,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Rt=g(sr,2),nr=de(()=>e().leechAction==At.SUSPEND);We(Rt,{get defaultValue(){return r(nr)},get value(){return r(L)},set value(I){f(L,I)},children:(I,oe)=>{J(I,{$$events:{click:()=>P()("simulateFsrsReview")},children:(ae,ge)=>{ee();var ie=Y();D(()=>V(ie,ui())),v(ae,ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Gt=g(Rt,2);{var gr=I=>{Xe(I,{get defaultValue(){return e().leechThreshold},min:1,max:9999,get value(){return r(_)},set value(oe){f(_,oe)},children:(oe,ae)=>{J(oe,{$$events:{click:()=>P()("simulateFsrsReview")},children:(ge,ie)=>{ee();var Ae=Y();D(()=>V(Ae,Fs())),v(ge,Ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};De(Gt,I=>{r(L)&&I(gr)})}A(Ht);var wt=g(Ht,2),_t=G(wt),vr=G(_t,!0);D(()=>V(vr,Vs())),A(_t);var $t=g(_t,2),j=G($t);{var pe=I=>{var oe=Y();D(()=>V(oe,Hs())),v(I,oe)},Be=I=>{var oe=Y();D(()=>V(oe,ci())),v(I,oe)};De(j,I=>{r(W)?I(pe):I(Be,!1)})}A($t);var Ze=g($t,2);{var Re=I=>{var oe=yd(),ae=ne(oe);D(()=>{var Ae;return V(ae,`${(Ae=ue(r(B)))!=null?Ae:""} `)});var ge=g(ae);{var ie=Ae=>{var Ee=de(()=>Ci());Fe(Ae,{get warning(){return r(Ee)},className:"alert-warning"})};De(ge,Ae=>{r(B)-e().desiredRetention>=.01&&Ae(ie)})}v(I,oe)};De(Ze,I=>{r(B)&&I(Re)})}var kt=g(Ze,2);{var dt=I=>{var oe=Cd(),ae=G(oe,!0);A(oe),D(()=>V(ae,r(p))),v(I,oe)};De(kt,I=>{r(W)&&I(dt)})}A(wt);var ht=g(wt,2),rn=G(ht,!0);D(()=>V(rn,di())),A(ht);var Dt=g(ht,2),sn=G(Dt,!0);D(()=>V(sn,fi())),A(Dt);var Tt=g(Dt,2),nn=G(Tt,!0);D(()=>V(nn,gi())),A(Tt);var Fr=g(Tt,2);{var an=I=>{var oe=Y();D(()=>V(oe,vi())),v(I,oe)};De(Fr,I=>{r(h)&&I(an)})}var on=g(Fr,2);Yl(on,{children:(I,oe)=>{var ae=_d(),ge=ne(ae),ie=G(ge);Kl(ie,{children:($r,tf)=>{var Br=wd(),hr=ne(Br),jt=G(hr);gt(jt);var zr,cn=g(jt);D(()=>{var Qe;return V(cn,` ${(Qe=$i())!=null?Qe:""}`)}),A(hr);var mr=g(hr,2),qt=G(mr);gt(qt);var Wr,dn=g(qt);D(()=>{var Qe;return V(dn,` ${(Qe=hi())!=null?Qe:""}`)}),A(mr);var Gr=g(mr,2),Ut=G(Gr);gt(Ut);var jr,fn=g(Ut);D(()=>{var Qe;return V(fn,` ${(Qe=mi())!=null?Qe:""}`)}),A(Gr),D(()=>{zr!==(zr=Ye.count)&&(jt.value=(jt.__value=Ye.count)==null?"":Ye.count),Wr!==(Wr=Ye.time)&&(qt.value=(qt.__value=Ye.time)==null?"":Ye.time),jr!==(jr=Ye.memorized)&&(Ut.value=(Ut.__value=Ye.memorized)==null?"":Ye.memorized)}),yr(m,[],jt,()=>(Ye.count,r(E)),Qe=>f(E,Qe)),yr(m,[],qt,()=>(Ye.time,r(E)),Qe=>f(E,Qe)),yr(m,[],Ut,()=>(Ye.memorized,r(E)),Qe=>f(E,Qe)),v($r,Br)},$$slots:{default:!0}}),A(ge);var Ae=g(ge,2),Ee=G(Ae),It=G(Ee);nu(It);var Vr=g(It);Xl(Vr);var Hr=g(Vr);Zl(Hr,{bounds:S});var ln=g(Hr);Jl(ln,{bounds:S}),A(Ee),Lt(Ee,$r=>f(M,$r),()=>r(M)),A(Ae);var un=g(Ae,2);au(un,{get tableData(){return r(q)}}),D(()=>Je(Ee,"viewBox",`0 0 ${S.width} ${S.height}`)),v(I,ae)},$$slots:{default:!0}}),A(me),A(qe),A(Oe),A(fe),D(()=>{var I,oe,ae,ge;pt(fe,"show",T()),pt(fe,"d-block",T()),Kt($t,`btn ${(I=r(W)?"btn-warning":"btn-primary")!=null?I:""} svelte-18vh0ci`),$t.disabled=!r(W)&&k(),Kt(ht,`btn ${(oe=k()?"btn-warning":"btn-primary")!=null?oe:""} svelte-18vh0ci`),ht.disabled=k(),Kt(Dt,`btn ${(ae=k()?"btn-warning":"btn-primary")!=null?ae:""} svelte-18vh0ci`),Dt.disabled=k(),Kt(Tt,`btn ${(ge=k()?"btn-warning":"btn-primary")!=null?ge:""} svelte-18vh0ci`),Tt.disabled=k()}),be("click",He,()=>T(!1)),be("click",$t,()=>xe()),be("click",ht,Se),be("click",Dt,le),be("click",Tt,()=>{Z(x,w(e).newPerDay=d().newLimit,w(e)),Z(x,w(e).reviewsPerDay=d().reviewLimit,w(e)),Z(x,w(e).maximumReviewInterval=d().maxInterval,w(e)),Z(x,w(e).desiredRetention=d().desiredRetention,w(e)),ut(i,d().newCardsIgnoreReviewLimit),Z(x,w(e).reviewOrder=d().reviewOrder,w(e)),Z(x,w(e).leechAction=r(L)?At.SUSPEND:At.TAG_ONLY,w(e)),Z(x,w(e).leechThreshold=r(_),w(e)),Z(x,w(e).easyDaysPercentages=[...r($)],w(e)),R()()}),v(s,fe),we()}var bd=K('<!> <!> <!> <div class="ms-1 me-1"><!> <!> <!> <!> <!> <button><!></button> <!> <div><!></div></div> <div class="m-1"><!> <button class="btn btn-primary svelte-neex7j"> </button></div> <div class="m-2"><button class="btn btn-primary svelte-neex7j"> </button></div> <!>',1);function xd(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(O,"$daysSinceLastOptimization",a),n=()=>ve(F,"$config",a),o=()=>ve(r(d),"$newCardsIgnoreReviewLimit",a),c=()=>ve(re,"$healthCheck",a),l=()=>ve(M,"$fsrsReschedule",a),u=b(),h=b(),p=b(),$=b(),m=b(),T=b(),y=b(),d=b(),k=b(),P=b(),R=b();let x=N(t,"state",8),E=N(t,"openHelpModal",8),q=N(t,"onPresetChange",8),z=N(t,"newlyEnabled",8,!1);const F=x().currentConfig,S=x().defaults,M=x().fsrsReschedule,O=x().daysSinceLastOptimization;let C=b(!1),i=b(!1),H=b(!1);const L=n().desiredRetention.toFixed(2);let _=b(),B=b(!1),W=b(!1);const re=x().fsrsHealthCheck;let X=b(void 0);const U=100;let ue=b("");const _e=.8,ce=.95;function xe(j){return j<_e?Ri():j>ce?Di():""}async function Se(j,pe){if(+L==r(m)){f(ue,Ti());return}const Be=new xn({w:pe,search:r($),before:+L,after:j}),Ze=await Sn(Be);f(ue,Ii({factor:Ze.factor.toFixed(2),previousDr:(+L*100).toString()}))}function le(j){return j<.7||j>.97?"alert-danger":j<_e||j>ce?"alert-warning":"alert-info"}function fe(){return BigInt(n().ignoreRevlogsBeforeDate?new Date(n().ignoreRevlogsBeforeDate).getTime():0)}async function Oe(){if(r(B)){await kn({});return}if(x().presetAssignmentsChanged()){alert(wi());return}f(B,!0),f(_,void 0);try{await Sr(async()=>{const j=wr(n()),pe=n().relearnSteps;let Be=0,Ze=0;for(let dt=0;dt<pe.length&&(Ze+=pe[dt],!(Ze>=1440));dt++)Be++;const Re=await Pn({search:n().paramSearch?n().paramSearch:r($),ignoreRevlogsBeforeMs:fe(),currentParams:j,numOfRelearningSteps:Be,healthCheck:c()}),kt=j.length&&j.every((dt,ht)=>dt.toFixed(4)===Re.params[ht].toFixed(4))||Re.params.length===0;if(Re.healthCheckPassed!==void 0)Re.healthCheckPassed?setTimeout(()=>alert(_i()),200):setTimeout(()=>alert(ki()),200);else if(kt){const dt=Re.fsrsItems?Pi():bi();setTimeout(()=>alert(dt),200)}kt||(Z(F,w(n).fsrsParams6=Re.params,w(n)),f(H,!0)),r(_)&&Et(_,r(_).current=r(_).total)},j=>{j.value.case==="computeParams"&&f(_,j.value.value)})}finally{f(B,!1)}}function qe(j){if(!j||!j.total)return"";const pe=(j.current/j.total*100).toFixed(1);return j instanceof On?`${pe}%`:Ai({pct:pe,reviews:j.reviews})}async function he(){await Nr(),x().save(ir.COMPUTE_ALL_PARAMS)}let Te=b(!1);te(()=>(e(),lt),()=>{f(u,e()>30?xi():"")}),te(()=>r(C),()=>{r(C)&&f(i,!0)}),te(()=>(je(z()),r(i),r(H)),()=>{f(h,z()||r(i)||r(H))}),te(()=>(r(B),r(W)),()=>{f(p,r(B)||r(W))}),te(()=>je(x()),()=>{f($,`preset:"${x().getCurrentNameForSearch()}" -is:suspended`)}),te(()=>n(),()=>{f(m,Number(n().desiredRetention.toFixed(2)))}),te(()=>r(m),()=>{f(T,xe(r(m)))}),te(()=>(r(X),r(h),r(m),n()),()=>{clearTimeout(r(X)),r(h)?f(X,setTimeout(()=>{Se(r(m),wr(n()))},U)):f(ue,"")}),te(()=>r(m),()=>{f(y,le(r(m)))}),te(()=>je(x()),()=>{pl(f(d,x().newCardsIgnoreReviewLimit),"$newCardsIgnoreReviewLimit",a)}),te(()=>(n(),je(x()),o()),()=>{f(k,new bn({params:wr(n()),desiredRetention:n().desiredRetention,newLimit:n().newPerDay,reviewLimit:n().reviewsPerDay,maxInterval:n().maximumReviewInterval,search:`preset:"${x().getCurrentNameForSearch()}" -is:suspended`,newCardsIgnoreReviewLimit:o(),easyDaysPercentages:n().easyDaysPercentages,reviewOrder:n().reviewOrder}))}),te(()=>r(_),()=>{f(P,qe(r(_)))}),te(()=>r(_),()=>{var j,pe;f(R,(pe=(j=r(_))==null?void 0:j.reviews)!=null?pe:void 0)}),Ve(),ke();var se=bd(),He=ne(se);ot(He,{get defaultValue(){return S.desiredRetention},min:.7,max:.99,percentage:!0,get value(){return n().desiredRetention},set value(j){Z(F,w(n).desiredRetention=j,w(n))},get focused(){return r(C)},set focused(j){f(C,j)},children:(j,pe)=>{J(j,{$$events:{click:()=>E()("desiredRetention")},children:(Be,Ze)=>{ee();var Re=Y();D(()=>V(Re,Ar())),v(Be,Re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var me=g(He,2);Fe(me,{get warning(){return r(ue)},className:"alert-info two-line"});var Ue=g(me,2);Fe(Ue,{get warning(){return r(T)},get className(){return r(y)}});var Pe=g(Ue,2),Mt=G(Pe);vd(Mt,{defaultValue:[],get defaults(){return S.fsrsParams6},get value(){return n().fsrsParams6},set value(j){Z(F,w(n).fsrsParams6=j,w(n))},children:(j,pe)=>{J(j,{$$events:{click:()=>E()("modelParams")},children:(Be,Ze)=>{ee();var Re=Y();D(()=>V(Re,Bs())),v(Be,Re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Nt=g(Mt,2);hd(Nt,{get placeholder(){return r($)},get value(){return n().paramSearch},set value(j){Z(F,w(n).paramSearch=j,w(n))},$$legacy:!0});var Ft=g(Nt,2);We(Ft,{defaultValue:!1,get value(){return bt(),l()},set value(j){ut(M,j)},children:(j,pe)=>{J(j,{$$events:{click:()=>E()("rescheduleCardsOnChange")},children:(Be,Ze)=>{var Re=de(()=>zs());xt(Be,{get title(){return r(Re)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ot=g(Ft,2);{var Vt=j=>{var pe=de(()=>Ei());Fe(j,{get warning(){return r(pe)}})};De(Ot,j=>{l()&&j(Vt)})}var tr=g(Ot,2);We(tr,{defaultValue:!1,get value(){return bt(),c()},set value(j){ut(re,j)},children:(j,pe)=>{J(j,{$$events:{click:()=>E()("deckConfigHealthCheck")},children:(Be,Ze)=>{var Re=de(()=>Li());xt(Be,{get title(){return r(Re)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var vt=g(tr,2),Ht=G(vt);{var Bt=j=>{var pe=Y();D(()=>V(pe,Hs())),v(j,pe)},dr=j=>{var pe=Y();D(()=>V(pe,Si())),v(j,pe)};De(Ht,j=>{r(B)?j(Bt):j(dr,!1)})}A(vt);var zt=g(vt,2);De(zt,j=>{});var Wt=g(zt,2),fr=G(Wt);{var rr=j=>{var pe=Y();D(()=>V(pe,r(P))),v(j,pe)},sr=j=>{var pe=et(),Be=ne(pe);{var Ze=Re=>{var kt=Y();D(()=>V(kt,Ls({reviews:r(R)}))),v(Re,kt)};De(Be,Re=>{r(R)!==void 0&&Re(Ze)},!0)}v(j,pe)};De(fr,j=>{r(B)||r(W)?j(rr):j(sr,!1)})}A(Wt),A(Pe);var Rt=g(Pe,2),nr=G(Rt);Fe(nr,{get warning(){return r(u)},className:"alert-warning"});var Gt=g(nr,2),gr=G(Gt,!0);D(()=>V(gr,Oi())),A(Gt),A(Rt);var wt=g(Rt,2),_t=G(wt),vr=G(_t,!0);D(()=>V(vr,Ms())),A(_t),A(wt);var $t=g(wt,2);Pd($t,{get state(){return x()},get simulateFsrsRequest(){return r(k)},get computing(){return r(p)},get openHelpModal(){return E()},get onPresetChange(){return q()},get shown(){return r(Te)},set shown(j){f(Te,j)},$$legacy:!0}),D(()=>{var j;Kt(vt,`btn ${(j=r(B)?"btn-warning":"btn-primary")!=null?j:""} svelte-neex7j`),vt.disabled=!r(B)&&r(p)}),be("click",vt,()=>Oe()),be("click",Gt,()=>he()),be("click",_t,()=>f(Te,!0)),v(s,se),we()}var Sd=K("<!> <!>",1);function Od(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(l,"$fsrs",a);let n=N(t,"state",8),o=N(t,"api",8),c=N(t,"onPresetChange",8);const l=n().fsrs;let u=b(!1);const h={fsrs:{title:"FSRS",help:Mi(),url:ye.DeckOptions.fsrs},desiredRetention:{title:Ar(),help:Ni(),sched:Ke.FSRS},modelParams:{title:Bs(),help:Fi()+`

`+Vi(),sched:Ke.FSRS},rescheduleCardsOnChange:{title:zs(),help:Hi(),sched:Ke.FSRS},computeOptimalRetention:{title:Vs(),help:Bi(),sched:Ke.FSRS}},p=Object.values(h);let $=b(),m=b();function T(y){r($).show(),r(m).to(y)}te(()=>e(),()=>{e()||f(u,!0)}),Ve(),ke(),rt(s,{title:"FSRS",children:(y,d)=>{at(y,{slotHost:Q,get api(){return o()},children:(k,P)=>{var R=Sd(),x=ne(R);Q(x,{children:(z,F)=>{We(z,{defaultValue:!1,get value(){return bt(),e()},set value(S){ut(l,S)},children:(S,M)=>{J(S,{$$events:{click:()=>T(Object.keys(h).indexOf("fsrs"))},children:(O,C)=>{xt(O,{get title(){return h.fsrs.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=g(x,2);{var q=z=>{xd(z,{get state(){return n()},get newlyEnabled(){return r(u)},openHelpModal:F=>T(Object.keys(h).indexOf(F)),get onPresetChange(){return c()}})};De(E,z=>{e()&&z(q)})}v(k,R)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(y,d)=>{ct(y,{title:"FSRS",get url(){return ye.DeckOptions.fsrs},slot:"tooltip",get fsrs(){return e()},helpSections:p,$$events:{mount:k=>{f($,k.detail.modal),f(m,k.detail.carousel)}}})}}}),we()}function Rd(s,t){Ce(t,!1);let a=N(t,"html",8),e=N(t,"mounted",8);Tr(e()),ke();var n=et(),o=ne(n);zi(o,a,!1,!1),v(s,n),we()}function Dd(s){switch(s){case nt.Seconds:return"s";case nt.Minutes:return"m";case nt.Hours:return"h";case nt.Days:return"d";default:return""}}function Td(s){switch(s){case"s":return nt.Seconds;case"h":return nt.Hours;case"d":return nt.Days;default:return nt.Minutes}}function Id(s){const t=s*60;let a=ou(t);return[nt.Months,nt.Years].includes(a)&&(a=nt.Days),`${Math.round(iu(a,t))}${Dd(a)}`}function Ad(s){const t=s.match(/(\d+)(.*)/);if(t){const[a,e,n]=t,o=Td(n),c=lu(o)*parseInt(e,10);return Math.min(c,2**31)/60}else return 0}function Ed(s){return s.map(Id).join(" ")}function Ld(s){return s.split(" ").map(Ad).filter(t=>t)}var Md=K('<input type="text" class="svelte-f5c9s0">');function Nd(s,t){Ce(t,!1);let a=N(t,"value",12),e=b();function n(){a(Ld(this.value))}te(()=>je(a()),()=>{f(e,Ed(a()))}),Ve(),ke();var o=Md();gt(o),D(()=>Ir(o,r(e))),be("blur",o,n),v(s,o),we()}var Fd=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Vd=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function tn(s,t){let a=N(t,"value",12),e=N(t,"defaultValue",8);var n=Vd(),o=ne(n);ze(o,()=>({"--cols":13})),Ne(o.lastChild,{children:(c,l)=>{var u=Fd(),h=ne(u);ze(h,()=>({"--col-size":7})),Ct(h.lastChild,{breakpoint:"xs",children:($,m)=>{var T=et(),y=ne(T);yt(y,t,"default",{}),v($,T)},$$slots:{default:!0}}),A(h);var p=g(h,2);ze(p,()=>({"--col-size":6})),Ct(p.lastChild,{breakpoint:"xs",children:($,m)=>{St($,{children:(T,y)=>{Nd(T,{get value(){return a()},set value(d){a(d)},$$legacy:!0})},$$slots:{default:!0,revert:(T,y)=>{Jt(T,{slot:"revert",get defaultValue(){return e()},get value(){return a()},set value(d){a(d)},$$legacy:!0})}}})},$$slots:{default:!0}}),A(p),v(c,u)},$$slots:{default:!0}}),A(o),v(s,n)}var Hd=K("<!> <!> <!> <!> <!> <!>",1);function Bd(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(l,"$config",a),n=()=>ve(h,"$fsrs",a);let o=N(t,"state",8),c=N(t,"api",24,()=>({}));const l=o().currentConfig,u=o().defaults,h=o().fsrs;let p=b(),$=b();const m={relearningSteps:{title:Wi(),help:Gi(),url:ye.DeckOptions.relearningSteps},minimumInterval:{title:ji(),help:qi(),url:ye.DeckOptions.minimumInterval,sched:Ke.SM2},leechThreshold:{title:Fs(),help:Ui(),url:ye.Leeches.leeches},leechAction:{title:Qi(),help:Yi(),url:ye.Leeches.waiting}},T=Object.values(m);let y=b(),d=b();function k(R){r(y).show(),r(d).to(R)}te(()=>(e(),n(),lt),()=>{const R=e().relearnSteps.length?e().relearnSteps[e().relearnSteps.length-1]/60/24:0;f(p,!n()&&R>e().minimumLapseInterval?Ki():""),f($,n()&&R>=1?Ws():"")}),Ve(),ke();var P=de(()=>ns());rt(s,{get title(){return r(P)},children:(R,x)=>{at(R,{slotHost:Q,get api(){return c()},children:(E,q)=>{var z=Hd(),F=ne(z);Q(F,{children:(L,_)=>{tn(L,{get defaultValue(){return u.relearnSteps},get value(){return e().relearnSteps},set value(B){Z(l,w(e).relearnSteps=B,w(e))},children:(B,W)=>{J(B,{$$events:{click:()=>k(Object.keys(m).indexOf("relearningSteps"))},children:(re,X)=>{ee();var U=Y();D(()=>V(U,m.relearningSteps.title)),v(re,U)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var S=g(F,2);Q(S,{children:(L,_)=>{Fe(L,{get warning(){return r($)}})},$$slots:{default:!0}});var M=g(S,2);{var O=L=>{Q(L,{children:(_,B)=>{Xe(_,{get defaultValue(){return u.minimumLapseInterval},min:1,get value(){return e().minimumLapseInterval},set value(W){Z(l,w(e).minimumLapseInterval=W,w(e))},children:(W,re)=>{J(W,{$$events:{click:()=>k(Object.keys(m).indexOf("minimumInterval"))},children:(X,U)=>{ee();var ue=Y();D(()=>V(ue,m.minimumInterval.title)),v(X,ue)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}})};De(M,L=>{n()||L(O)})}var C=g(M,2);Q(C,{children:(L,_)=>{Fe(L,{get warning(){return r(p)}})},$$slots:{default:!0}});var i=g(C,2);Q(i,{children:(L,_)=>{Xe(L,{get defaultValue(){return u.leechThreshold},min:1,get value(){return e().leechThreshold},set value(B){Z(l,w(e).leechThreshold=B,w(e))},children:(B,W)=>{J(B,{$$events:{click:()=>k(Object.keys(m).indexOf("leechThreshold"))},children:(re,X)=>{ee();var U=Y();D(()=>V(U,m.leechThreshold.title)),v(re,U)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=g(i,2);Q(H,{children:(L,_)=>{var B=de(Nc);it(L,{get defaultValue(){return u.leechAction},get choices(){return r(B)},breakpoint:"md",get value(){return e().leechAction},set value(W){Z(l,w(e).leechAction=W,w(e))},children:(W,re)=>{J(W,{$$events:{click:()=>k(Object.keys(m).indexOf("leechAction"))},children:(X,U)=>{ee();var ue=Y();D(()=>V(ue,m.leechAction.title)),v(X,ue)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),v(E,z)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(R,x)=>{var E=de(()=>ns());ct(R,{get title(){return r(E)},get url(){return ye.DeckOptions.lapses},slot:"tooltip",get fsrs(){return n()},helpSections:T,$$events:{mount:q=>{f(y,q.detail.modal),f(d,q.detail.carousel)}}})}}}),we()}var zd=K("<!> <!> <!> <!>",1),Wd=K("<!> <!> <!> <!> <!>",1);function Gd(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(h,"$config",a),n=()=>ve($,"$fsrs",a),o=b(),c=b();let l=N(t,"state",8),u=N(t,"api",24,()=>({}));const h=l().currentConfig,p=l().defaults,$=l().fsrs;let m=b(),T=b();const y={learningSteps:{title:Xi(),help:Zi(),url:ye.DeckOptions.learningSteps},graduatingInterval:{title:Ji(),help:el(),url:ye.DeckOptions.graduatingInterval,sched:Ke.SM2},easyInterval:{title:tl(),help:rl(),url:ye.DeckOptions.easyInterval,sched:Ke.SM2},insertionOrder:{title:sl(),help:nl(),url:ye.DeckOptions.insertionOrder}},d=Object.values(y);let k=b(),P=b();function R(E){r(k).show(),r(P).to(E)}te(()=>(e(),n()),()=>{const E=e().learnSteps.length?e().learnSteps[e().learnSteps.length-1]/60/24:0;f(m,E>e().graduatingIntervalGood?al():""),f(T,n()&&E>=1?Ws():"")}),te(()=>(e(),lt),()=>{f(o,e().graduatingIntervalGood>e().graduatingIntervalEasy?ol():"")}),te(()=>(e(),lt),()=>{f(c,e().newCardInsertOrder==Pr.RANDOM?il():"")}),Ve(),ke();var x=de(()=>as());rt(s,{get title(){return r(x)},children:(E,q)=>{at(E,{slotHost:Q,get api(){return u()},children:(z,F)=>{var S=Wd(),M=ne(S);Q(M,{children:(_,B)=>{tn(_,{get defaultValue(){return p.learnSteps},get value(){return e().learnSteps},set value(W){Z(h,w(e).learnSteps=W,w(e))},children:(W,re)=>{J(W,{$$events:{click:()=>R(Object.keys(y).indexOf("learningSteps"))},children:(X,U)=>{ee();var ue=Y();D(()=>V(ue,y.learningSteps.title)),v(X,ue)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var O=g(M,2);Q(O,{children:(_,B)=>{Fe(_,{get warning(){return r(T)}})},$$slots:{default:!0}});var C=g(O,2);{var i=_=>{var B=zd(),W=ne(B);Q(W,{children:(ue,_e)=>{Xe(ue,{get defaultValue(){return p.graduatingIntervalGood},get value(){return e().graduatingIntervalGood},set value(ce){Z(h,w(e).graduatingIntervalGood=ce,w(e))},children:(ce,xe)=>{J(ce,{$$events:{click:()=>R(Object.keys(y).indexOf("graduatingInterval"))},children:(Se,le)=>{ee();var fe=Y();D(()=>V(fe,y.graduatingInterval.title)),v(Se,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var re=g(W,2);Q(re,{children:(ue,_e)=>{Fe(ue,{get warning(){return r(m)}})},$$slots:{default:!0}});var X=g(re,2);Q(X,{children:(ue,_e)=>{Xe(ue,{get defaultValue(){return p.graduatingIntervalEasy},get value(){return e().graduatingIntervalEasy},set value(ce){Z(h,w(e).graduatingIntervalEasy=ce,w(e))},children:(ce,xe)=>{J(ce,{$$events:{click:()=>R(Object.keys(y).indexOf("easyInterval"))},children:(Se,le)=>{ee();var fe=Y();D(()=>V(fe,y.easyInterval.title)),v(Se,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var U=g(X,2);Q(U,{children:(ue,_e)=>{Fe(ue,{get warning(){return r(o)}})},$$slots:{default:!0}}),v(_,B)};De(C,_=>{n()||_(i)})}var H=g(C,2);Q(H,{children:(_,B)=>{var W=de(Fc);it(_,{get defaultValue(){return p.newCardInsertOrder},get choices(){return r(W)},breakpoint:"md",get value(){return e().newCardInsertOrder},set value(re){Z(h,w(e).newCardInsertOrder=re,w(e))},children:(re,X)=>{J(re,{$$events:{click:()=>R(Object.keys(y).indexOf("insertionOrder"))},children:(U,ue)=>{ee();var _e=Y();D(()=>V(_e,y.insertionOrder.title)),v(U,_e)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var L=g(H,2);Q(L,{children:(_,B)=>{Fe(_,{get warning(){return r(c)}})},$$slots:{default:!0}}),v(z,S)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(E,q)=>{var z=de(()=>as());ct(E,{get title(){return r(z)},get url(){return ye.DeckOptions.newCards},slot:"tooltip",helpSections:d,get fsrs(){return n()},$$events:{mount:F=>{f(k,F.detail.modal),f(P,F.detail.carousel)}}})}}}),we()}var jd=K('<div class="show-timer-switch" style="display: contents;"><!></div>'),qd=K('<div class="show-timer-switch" style="display: contents;"><!></div>'),Ud=K("<!> <!> <!> <!>",1);function Qd(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(l,"$config",a),n=b();let o=N(t,"state",8),c=N(t,"api",8);const l=o().currentConfig,u=o().defaults,h={maximumAnswerSecs:{title:ll(),help:ul()},showAnswerTimer:{title:cl(),help:dl()},stopTimerOnAnswer:{title:fl(),help:gl()}},p=Object.values(h);let $=b(),m=b();function T(d){r($).show(),r(m).to(d)}te(()=>(e(),lt),()=>{f(n,e().capAnswerTimeToSecs>600?vl():"")}),Ve(),ke();var y=de(()=>os());rt(s,{get title(){return r(y)},children:(d,k)=>{at(d,{slotHost:Q,get api(){return c()},children:(P,R)=>{var x=Ud(),E=ne(x);Q(E,{children:(S,M)=>{Xe(S,{get defaultValue(){return u.capAnswerTimeToSecs},min:1,max:7200,get value(){return e().capAnswerTimeToSecs},set value(O){Z(l,w(e).capAnswerTimeToSecs=O,w(e))},children:(O,C)=>{J(O,{$$events:{click:()=>T(Object.keys(h).indexOf("maximumAnswerSecs"))},children:(i,H)=>{ee();var L=Y();D(()=>V(L,h.maximumAnswerSecs.title)),v(i,L)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var q=g(E,2);Q(q,{children:(S,M)=>{Fe(S,{get warning(){return r(n)}})},$$slots:{default:!0}});var z=g(q,2);Q(z,{children:(S,M)=>{var O=jd(),C=G(O);We(C,{get defaultValue(){return u.showTimer},get value(){return e().showTimer},set value(i){Z(l,w(e).showTimer=i,w(e))},children:(i,H)=>{J(i,{$$events:{click:()=>T(Object.keys(h).indexOf("showAnswerTimer"))},children:(L,_)=>{ee();var B=Y();D(()=>V(B,h.showAnswerTimer.title)),v(L,B)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),A(O),v(S,O)},$$slots:{default:!0}});var F=g(z,2);Q(F,{children:(S,M)=>{var O=qd(),C=G(O);We(C,{get defaultValue(){return u.stopTimerOnAnswer},get value(){return e().stopTimerOnAnswer},set value(i){Z(l,w(e).stopTimerOnAnswer=i,w(e))},children:(i,H)=>{J(i,{$$events:{click:()=>T(Object.keys(h).indexOf("stopTimerOnAnswer"))},children:(L,_)=>{ee();var B=Y();D(()=>V(B,h.stopTimerOnAnswer.title)),v(L,B)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),A(O),v(S,O)},$$slots:{default:!0}}),v(P,x)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(d,k)=>{var P=de(()=>os());ct(d,{get title(){return r(P)},get url(){return ye.DeckOptions.timer},slot:"tooltip",helpSections:p,$$events:{mount:R=>{f($,R.detail.modal),f(m,R.detail.carousel)}}})}}}),we()}var Yd=K("<!> <!> <!>",1),Kd=K('<datalist id="easy_day_steplist"><option>0.5</option></datalist> <!>',1);function Xd(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(T,"$config",a),n=()=>ve($,"$fsrsEnabled",a),o=()=>ve(m,"$reschedule",a),c=b(),l=b(),u=b();let h=N(t,"state",8),p=N(t,"api",8);const $=h().fsrs,m=h().fsrsReschedule,T=h().currentConfig,y=h().defaults,d=e().easyDaysPercentages.slice();te(()=>e(),()=>{e().easyDaysPercentages.length!==7&&Z(T,w(e).easyDaysPercentages=y.easyDaysPercentages.slice(),w(e))}),te(()=>e(),()=>{f(c,e().easyDaysPercentages.some((x,E)=>x!==d[E]))}),te(()=>(e(),lt),()=>{f(l,e().easyDaysPercentages.some(x=>x===1)?"":$l())}),te(()=>(r(c),n(),o(),lt),()=>{f(u,r(c)&&!(n()&&o())?hl():"")}),Ve(),ke();var k=Kd(),P=g(ne(k),2),R=de(()=>Ns());rt(P,{get title(){return r(R)},children:(x,E)=>{at(x,{slotHost:Q,get api(){return p()},children:(q,z)=>{var F=Yd(),S=ne(F);en(S,{get values(){return e().easyDaysPercentages},set values(C){Z(T,w(e).easyDaysPercentages=C,w(e))},$$legacy:!0});var M=g(S,2);Q(M,{children:(C,i)=>{Fe(C,{get warning(){return r(l)}})},$$slots:{default:!0}});var O=g(M,2);Q(O,{children:(C,i)=>{Fe(C,{get warning(){return r(u)}})},$$slots:{default:!0}}),v(q,F)},$$slots:{default:!0}})},$$slots:{default:!0}}),v(s,k),we()}var Zd=K("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!> <!></div>",1),Jd=K('<!> <div class="deck-options-page svelte-htbfcn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1);function ef(s,t){Ce(t,!1);const a=Ie(),e=()=>ve(o,"$addons",a);let n=N(t,"state",8);const o=n().addonComponents;function c(){return n().currentAuxData}function l(S){ut(o,[...e(),S])}function u(S,M){ut(o,[...e(),{component:Rd,html:S,mounted:M}])}const h={},p={},$={},m={},T={},y={},d={},k={},P={},R={};let x=b();ke();var E=Jd(),q=ne(E);nd(q,{get state(){return n()},$$events:{presetchange(...S){var M;(M=r(x))==null||M.apply(this,S)}}});var z=g(q,2),F=G(z);return ze(F,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),yl(F.lastChild,{breakpoint:"sm",class:"container-columns",children:(S,M)=>{var O=Zd(),C=ne(O),i=G(C);Ne(i,{class:"row-columns",children:(le,fe)=>{ld(le,{get state(){return n()},api:p,get onPresetChange(){return r(x)},set onPresetChange(Oe){f(x,Oe)},$$legacy:!0})},$$slots:{default:!0}});var H=g(i,2);Ne(H,{class:"row-columns",children:(le,fe)=>{Gd(le,{get state(){return n()},api:$})},$$slots:{default:!0}});var L=g(H,2);Ne(L,{class:"row-columns",children:(le,fe)=>{Bd(le,{get state(){return n()},api:m})},$$slots:{default:!0}});var _=g(L,2);Ne(_,{class:"row-columns",children:(le,fe)=>{cd(le,{get state(){return n()},api:y})},$$slots:{default:!0}});var B=g(_,2);Ne(B,{class:"row-columns",children:(le,fe)=>{Od(le,{get state(){return n()},api:{},get onPresetChange(){return r(x)},set onPresetChange(Oe){f(x,Oe)},$$legacy:!0})},$$slots:{default:!0}}),A(C);var W=g(C,2),re=G(W);Ne(re,{class:"row-columns",children:(le,fe)=>{jc(le,{get state(){return n()},api:T})},$$slots:{default:!0}});var X=g(re,2);Ne(X,{class:"row-columns",children:(le,fe)=>{Ec(le,{get state(){return n()},api:k})},$$slots:{default:!0}});var U=g(X,2);Ne(U,{class:"row-columns",children:(le,fe)=>{Qd(le,{get state(){return n()},api:d})},$$slots:{default:!0}});var ue=g(U,2);Ne(ue,{class:"row-columns",children:(le,fe)=>{Wc(le,{get state(){return n()},api:d})},$$slots:{default:!0}});var _e=g(ue,2);{var ce=le=>{Ne(le,{class:"row-columns",children:(fe,Oe)=>{Ju(fe,{get state(){return n()}})},$$slots:{default:!0}})};De(_e,le=>{e().length&&le(ce)})}var xe=g(_e,2);Ne(xe,{class:"row-columns",children:(le,fe)=>{Xd(le,{get state(){return n()},api:R})},$$slots:{default:!0}});var Se=g(xe,2);Ne(Se,{class:"row-columns",children:(le,fe)=>{Ic(le,{get state(){return n()},api:P})},$$slots:{default:!0}}),A(W),v(S,O)},$$slots:{default:!0}}),A(F),A(z),v(s,E),Ge(t,"auxData",c),Ge(t,"addSvelteAddon",l),Ge(t,"addHtmlAddon",u),Ge(t,"options",h),Ge(t,"dailyLimits",p),Ge(t,"newOptions",$),Ge(t,"lapseOptions",m),Ge(t,"buryOptions",T),Ge(t,"displayOrder",y),Ge(t,"timerOptions",d),Ge(t,"audioOptions",k),Ge(t,"advancedOptions",P),Ge(t,"easyDays",R),we({auxData:c,addSvelteAddon:l,addHtmlAddon:u,options:h,dailyLimits:p,newOptions:$,lapseOptions:m,buryOptions:T,displayOrder:y,timerOptions:d,audioOptions:k,advancedOptions:P,easyDays:R})}function Wf(s,t){Ce(t,!1);let a=N(t,"data",8),e=b();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=async()=>{await Nr(),(!await a().state.isModified()||confirm(ml()))&&Rn({})},Tr(()=>{globalThis.$deckOptions=new Promise((n,o)=>{n(r(e))}),a().state.resolveOriginalConfigs(),Dn({})}),ke(),Lt(ef(s,{get state(){return a().state},$$legacy:!0}),n=>f(e,n),()=>r(e)),we()}export{Wf as component,zf as universal};
