"use strict";(self.webpackChunkjupyterlab_leetcode=self.webpackChunkjupyterlab_leetcode||[]).push([[266],{266:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var o=n(549),a=n(560),r=n(424),l=n(88),c=n(484),s=n(345),i=n.n(s),d=n(689),u=n(186);async function m(e="",t={}){const n=u.ServerConnection.makeSettings(),o=d.URLExt.join(n.baseUrl,"jupyterlab-leetcode",e);let a;try{a=await u.ServerConnection.makeRequest(o,t,n)}catch(e){throw new u.ServerConnection.NetworkError(e)}let r=await a.text();if(r.length>0)try{r=JSON.parse(r)}catch(e){console.log("Not a JSON response body.",a)}if(!a.ok)throw new u.ServerConnection.ResponseError(a,r.message||r);return r}async function h(e){return m(`/cookies?browser=${e}`).catch((()=>({})))}var g=n(82),p=n.n(g);const b=({setCookieLoggedIn:e})=>{const t=["Chrome","Firefox","Safari","Edge","Opera","Brave","Vivaldi","Chromium","Arc","LibreWolf","Opera GX"],n=e=>e.toLowerCase().replace(/\s+/g,"_"),[o,a]=(0,s.useState)(""),[r,l]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{const e=p().getParser(window.navigator.userAgent).getBrowserName(!0);if(e){const o=t.find((t=>new RegExp(t,"i").test(e)));o&&a(n(o))}}),[]),(0,s.useEffect)((()=>{r&&e(o)}),[r,e]),i().createElement("div",null,i().createElement("label",{htmlFor:"browser-selector"},"Choose your browser that has LeetCode logged in:"),i().createElement("select",{id:"browser-selector",required:!0,value:o,onChange:e=>a(e.target.value)},i().createElement("option",{value:"",disabled:!0},"Select a browser"),t.map((e=>i().createElement("option",{key:e.toLowerCase(),value:n(e)},e)))),i().createElement("button",{onClick:()=>{o?"safari"!==o?h(o).then((e=>{l(e.checked)})):alert("Safari does not support getting cookies from the browser. Please use another browser."):alert("Please select a browser.")}},"Check"),i().createElement("p",null,"Checked: ",r?"Yes":"No"))},f=({setCookieLoggedIn:e})=>{const t=[i().createElement(b,{setCookieLoggedIn:e})];return i().createElement("div",null,i().createElement("p",null,"Welcome to JupyterLab LeetCode Widget."),i().createElement("p",null,"For this plugin to work, you may choose one of these ",t.length," ","methods to allow this plugin to log into LeetCode."),...t)},E=({profile:e})=>i().createElement("div",null,i().createElement("p",null,"Welcome ",e.username),i().createElement("img",{src:e.avatar,alt:"Avatar",style:{width:"100px",height:"100px"}})),k=({username:e})=>{const[t,n]=(0,s.useState)(null);return(0,s.useEffect)((()=>{(async function(e){return m(`/leetcode/statistics?username=${e}`).catch((()=>null))})(e).then((e=>{n(e)}))}),[]),t?i().createElement("div",null,i().createElement("p",null,"rank: ",t.userPublicProfile.matchedUser.profile.ranking)):null},y=({question:e,onGenerateSuccess:t})=>i().createElement("div",null,i().createElement("a",{target:"_blank",href:`https://leetcode.com/problems/${e.titleSlug}`},e.title),i().createElement("button",{onClick:()=>{(async function(e){return m("/notebook/create",{method:"POST",body:JSON.stringify({titleSlug:e})}).catch((()=>null))})(e.titleSlug).then((e=>{if(console.log("generateNotebook",e),e){const{filePath:n}=e;t(n)}}))}},"C")),w=({openNotebook:e})=>{const[t,n]=(0,s.useState)(0),[o,a]=(0,s.useState)(""),[r,l]=(0,s.useState)([]),[c,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(0),[g,p]=(0,s.useState)(0);return(0,s.useEffect)((()=>n(0)),[o]),(0,s.useEffect)((()=>{(async function(e,t){return m("/leetcode/questions",{method:"POST",body:JSON.stringify({skip:t,limit:100,keyword:e})}).then((e=>e.data)).catch((()=>null))})(o,t).then((e=>{if(!e)return;const{questions:t,hasMore:n,finishedLength:o,totalLength:a}=e.problemsetQuestionListV2;l(t),d(n),h(o),p(a)}))}),[o,t]),i().createElement("div",null,i().createElement("label",{htmlFor:"keyword"},"Keyword:"),i().createElement("input",{type:"text",id:"keyword",value:o,onChange:e=>a(e.target.value)}),r.length>0?i().createElement("div",null,r.map((t=>i().createElement(y,{key:t.id,question:t,onGenerateSuccess:t=>e(t)})))):null)},S=({app:e,docManager:t})=>{const[n,o]=(0,s.useState)(null);return(0,s.useEffect)((()=>{(async function(){return m("/leetcode/profile").then((e=>e.data.userStatus)).catch((()=>null))})().then((e=>{e&&e.isSignedIn?o(e):alert("Please sign in to LeetCode.")}))}),[]),n?i().createElement("div",null,i().createElement(E,{profile:n}),i().createElement(k,{username:n.username}),i().createElement(w,{openNotebook:e=>{t.openOrReveal(e)}})):null},C=({app:e,docManager:t})=>{const[n,o]=(0,s.useState)("");return(0,s.useEffect)((()=>{var e;const t=null===(e=document.cookie.split("; ").find((e=>e.startsWith("leetcode_browser="))))||void 0===e?void 0:e.split("=")[1];t&&h(t).then((e=>{e.checked&&o(t)}))})),n?i().createElement(S,{app:e,docManager:t}):i().createElement(f,{setCookieLoggedIn:e=>o(e)})},v=({notebook:e})=>i().createElement("div",null,i().createElement("button",{onClick:()=>{e.context.save().then((()=>{(async function(e){return m("/notebook/submit",{method:"POST",body:JSON.stringify({filePath:e})}).catch((()=>null))})(e.context.path).then((()=>{console.log("Notebook submitted successfully")}))}))}},"Submit"));class L extends c.ReactWidget{constructor(e,t){super(),this.id="JupyterlabLeetcodeWidget",this.addClass("jupyterlab-leetcode-widget"),this.app=e,this.docManager=t}render(){return i().createElement(s.StrictMode,null,i().createElement(C,{app:this.app,docManager:this.docManager}))}}class N extends c.ReactWidget{constructor(e){super(),this.id="JupyterlabLeetcodeNotebookHeaderWidget",this.notebook=e}render(){return i().createElement(s.StrictMode,null,i().createElement(v,{notebook:this.notebook}))}}const W={id:"jupyterlab-leetcode:plugin",description:"Integrate LeetCode into beloved Jupyter.",autoStart:!0,requires:[a.ICommandPalette,r.IDocumentManager],optional:[o.ILayoutRestorer],activate:(e,t,n,o)=>{let r;const c="leetcode-widget:open";e.commands.addCommand(c,{label:"Open LeetCode Widget",execute:()=>{r&&!r.isDisposed||(r=new L(e,n)),i.has(r)||i.add(r),r.isAttached||e.shell.add(r,"right",{rank:599}),e.shell.activateById(r.id)}}),t.addItem({command:c,category:"LeetCode"});const s="leetcode-widget:add-header";e.commands.addCommand(s,{label:"Add Header to LeetCode Widget",caption:"Add Header to LeetCode Widget",execute:()=>{const t=e.shell.currentWidget;if(t instanceof l.NotebookPanel){const e=new N(t);e.node.style.minHeight="20px",t.contentHeader.addWidget(e)}}}),t.addItem({command:s,category:"LeetCode"});const i=new a.WidgetTracker({namespace:"leetcode-widget"});o&&o.restore(i,{command:c,name:()=>"leetcode"})}}}}]);