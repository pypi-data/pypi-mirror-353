# LLMStruct

`llmstruct` is a Python library for reliably extracting structured JSON from text and validating it with Pydantic models.

## Features

- Extracts JSON objects or arrays of JSON objects from messy text.
- Validates extracted JSON against Pydantic models.
- Resilient to surrounding text and other noise.

## Installation

You can install the library using `pip`:

```bash
pip install .
```

Or with `uv`:
```bash
uv pip install .
```

## Demos

This project includes two demo scripts to showcase its capabilities by interacting with the Anthropic API.

### Prerequisites

Before running the demos, you need to install the demo-specific dependencies and set your Anthropic API key.

1.  **Install demo dependencies:**
    ```bash
    uv pip install -e ".[demos]"
    ```

2.  **Set the API Key:**
    Export your Anthropic API key as an environment variable:
    ```bash
    export ANTHROPIC_API_KEY="your-api-key"
    ```

### Simple Demo

The simple demo shows the basic usage of `extract_json_from_text` to extract a single JSON object from a response generated by the Anthropic API.

To run the simple demo:

```bash
python demos/simple.py
```

### Advanced Demo

The advanced demo illustrates a powerful, real-world use case. It performs the following steps:
1.  Fetches a large, complex JSON object for a product from the public Open Food Facts API.
2.  Sends this raw JSON to the Anthropic API and instructs the LLM to extract and structure a concise summary.
3.  Streams the LLM's response and uses `llmstruct` to parse the structured summary from the text.

The entire process is wrapped in a `tenacity` retry block, making the operation resilient to transient network issues or occasional LLM failures to generate a perfectly valid object on the first try. This demonstrates how `llmstruct` can be a key component in a robust data processing pipeline.

To run the advanced demo:

```bash
python demos/advanced.py
```

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
